!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof rollupNeedsAnOptionToDisableAMDInUMD&&rollupNeedsAnOptionToDisableAMDInUMD.amd?rollupNeedsAnOptionToDisableAMDInUMD(e):(t="undefined"!=typeof globalThis?globalThis:t||self).SGN=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")(),i=function(t){try{return!!t()}catch(t){return!0}},o=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,c={f:s&&!a.call({1:2},1)?function(t){var e=s(this,t);return!!e&&e.enumerable}:a},u=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},l={}.toString,h=function(t){return l.call(t).slice(8,-1)},f="".split,p=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?f.call(t,""):Object(t)}:Object,d=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},g=function(t){return p(d(t))},v=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=function(t,e){if(!v(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!v(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!v(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!v(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,b=function(t,e){return m.call(t,e)},w=r.document,_=v(w)&&v(w.createElement),S=function(t){return _?w.createElement(t):{}},x=!o&&!i((function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a})),k=Object.getOwnPropertyDescriptor,E={f:o?k:function(t,e){if(t=g(t),e=y(e,!0),x)try{return k(t,e)}catch(t){}if(b(t,e))return u(!c.f.call(t,e),t[e])}},T=/#|\.prototype\./,O=function(t,e){var n=P[A(t)];return n==C||n!=I&&("function"==typeof e?i(e):!!e)},A=O.normalize=function(t){return String(t).replace(T,".").toLowerCase()},P=O.data={},I=O.NATIVE="N",C=O.POLYFILL="P",j=O,L={},R=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},M=function(t,e,n){if(R(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},N=function(t){if(!v(t))throw TypeError(String(t)+" is not an object");return t},D=Object.defineProperty,z={f:o?D:function(t,e,n){if(N(t),e=y(e,!0),N(n),x)try{return D(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},F=o?function(t,e,n){return z.f(t,e,u(1,n))}:function(t,e,n){return t[e]=n,t},U=E.f,B=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},V=function(t,e){var n,i,o,a,s,c,u,l,h=t.target,f=t.global,p=t.stat,d=t.proto,g=f?r:p?r[h]:(r[h]||{}).prototype,v=f?L:L[h]||(L[h]={}),y=v.prototype;for(o in e)n=!j(f?o:h+(p?".":"#")+o,t.forced)&&g&&b(g,o),s=v[o],n&&(c=t.noTargetGet?(l=U(g,o))&&l.value:g[o]),a=n&&c?c:e[o],n&&typeof s==typeof a||(u=t.bind&&n?M(a,r):t.wrap&&n?B(a):d&&"function"==typeof a?M(Function.call,a):a,(t.sham||a&&a.sham||s&&s.sham)&&F(u,"sham",!0),v[o]=u,d&&(b(L,i=h+"Prototype")||F(L,i,{}),L[i][o]=a,t.real&&y&&!y[o]&&F(y,o,a)))};V({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:z.f});var H=e((function(t){var e=L.Object,n=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(n.sham=!0)})),W=H,q=Math.ceil,X=Math.floor,Y=function(t){return isNaN(t=+t)?0:(t>0?X:q)(t)},G=Math.min,$=function(t){return t>0?G(Y(t),9007199254740991):0},Z=Math.max,K=Math.min,J=function(t,e){var n=Y(t);return n<0?Z(n+e,0):K(n,e)},Q=function(t){return function(e,n,r){var i,o=g(e),a=$(o.length),s=J(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},tt={includes:Q(!0),indexOf:Q(!1)},et={},nt=tt.indexOf,rt=function(t,e){var n,r=g(t),i=0,o=[];for(n in r)!b(et,n)&&b(r,n)&&o.push(n);for(;e.length>i;)b(r,n=e[i++])&&(~nt(o,n)||o.push(n));return o},it=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ot=Object.keys||function(t){return rt(t,it)},at=o?Object.defineProperties:function(t,e){N(t);for(var n,r=ot(e),i=r.length,o=0;i>o;)z.f(t,n=r[o++],e[n]);return t};V({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:at});var st=e((function(t){var e=L.Object,n=t.exports=function(t,n){return e.defineProperties(t,n)};e.defineProperties.sham&&(n.sham=!0)})),ct=function(t){return"function"==typeof t?t:void 0},ut=function(t,e){return arguments.length<2?ct(L[t])||ct(r[t]):L[t]&&L[t][e]||r[t]&&r[t][e]},lt=it.concat("length","prototype"),ht={f:Object.getOwnPropertyNames||function(t){return rt(t,lt)}},ft={f:Object.getOwnPropertySymbols},pt=ut("Reflect","ownKeys")||function(t){var e=ht.f(N(t)),n=ft.f;return n?e.concat(n(t)):e},dt=function(t,e,n){var r=y(e);r in t?z.f(t,r,u(0,n)):t[r]=n};V({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=g(t),i=E.f,o=pt(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&dt(a,e,n);return a}});var gt=L.Object.getOwnPropertyDescriptors,vt={},yt="__core-js_shared__",mt=r[yt]||function(t,e){try{F(r,t,e)}catch(n){r[t]=e}return e}(yt,{}),bt=Function.toString;"function"!=typeof mt.inspectSource&&(mt.inspectSource=function(t){return bt.call(t)});var wt,_t,St,xt=mt.inspectSource,kt=r.WeakMap,Et="function"==typeof kt&&/native code/.test(xt(kt)),Tt=!0,Ot=e((function(t){(t.exports=function(t,e){return mt[t]||(mt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.2",mode:"pure",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),At=0,Pt=Math.random(),It=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++At+Pt).toString(36)},Ct=Ot("keys"),jt=function(t){return Ct[t]||(Ct[t]=It(t))},Lt=r.WeakMap;if(Et){var Rt=mt.state||(mt.state=new Lt),Mt=Rt.get,Nt=Rt.has,Dt=Rt.set;wt=function(t,e){return e.facade=t,Dt.call(Rt,t,e),e},_t=function(t){return Mt.call(Rt,t)||{}},St=function(t){return Nt.call(Rt,t)}}else{var zt=jt("state");et[zt]=!0,wt=function(t,e){return e.facade=t,F(t,zt,e),e},_t=function(t){return b(t,zt)?t[zt]:{}},St=function(t){return b(t,zt)}}var Ft,Ut,Bt,Vt={set:wt,get:_t,has:St,enforce:function(t){return St(t)?_t(t):wt(t,{})},getterFor:function(t){return function(e){var n;if(!v(e)||(n=_t(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Ht=function(t){return Object(d(t))},Wt=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),qt=jt("IE_PROTO"),Xt=Object.prototype,Yt=Wt?Object.getPrototypeOf:function(t){return t=Ht(t),b(t,qt)?t[qt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xt:null},Gt=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),$t=Gt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Zt=Ot("wks"),Kt=r.Symbol,Jt=$t?Kt:Kt&&Kt.withoutSetter||It,Qt=function(t){return b(Zt,t)||(Gt&&b(Kt,t)?Zt[t]=Kt[t]:Zt[t]=Jt("Symbol."+t)),Zt[t]},te=(Qt("iterator"),!1);[].keys&&("next"in(Bt=[].keys())?(Ut=Yt(Yt(Bt)))!==Object.prototype&&(Ft=Ut):te=!0),null==Ft&&(Ft={});var ee,ne={IteratorPrototype:Ft,BUGGY_SAFARI_ITERATORS:te},re=ut("document","documentElement"),ie=jt("IE_PROTO"),oe=function(){},ae=function(t){return"<script>"+t+"</"+"script>"},se=function(){try{ee=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;se=ee?function(t){t.write(ae("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ee):((e=S("iframe")).style.display="none",re.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ae("document.F=Object")),t.close(),t.F);for(var n=it.length;n--;)delete se.prototype[it[n]];return se()};et[ie]=!0;var ce=Object.create||function(t,e){var n;return null!==t?(oe.prototype=N(t),n=new oe,oe.prototype=null,n[ie]=t):n=se(),void 0===e?n:at(n,e)},ue={};ue[Qt("toStringTag")]="z";var le="[object z]"===String(ue),he=Qt("toStringTag"),fe="Arguments"==h(function(){return arguments}()),pe=le?h:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),he))?n:fe?h(e):"Object"==(r=h(e))&&"function"==typeof e.callee?"Arguments":r},de=le?{}.toString:function(){return"[object "+pe(this)+"]"},ge=z.f,ve=Qt("toStringTag"),ye=function(t,e,n,r){if(t){var i=n?t:t.prototype;b(i,ve)||ge(i,ve,{configurable:!0,value:e}),r&&!le&&F(i,"toString",de)}},me=ne.IteratorPrototype,be=function(){return this},we=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return N(n),function(t){if(!v(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),_e=function(t,e,n,r){r&&r.enumerable?t[e]=n:F(t,e,n)},Se=ne.IteratorPrototype,xe=ne.BUGGY_SAFARI_ITERATORS,ke=Qt("iterator"),Ee="keys",Te="values",Oe="entries",Ae=function(){return this},Pe=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=ce(me,{next:u(1,n)}),ye(t,r,!1,!0),vt[r]=be}(n,e,r);var s,c,l,h=function(t){if(t===i&&v)return v;if(!xe&&t in d)return d[t];switch(t){case Ee:case Te:case Oe:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",p=!1,d=t.prototype,g=d[ke]||d["@@iterator"]||i&&d[i],v=!xe&&g||h(i),y="Array"==e&&d.entries||g;if(y&&(s=Yt(y.call(new t)),Se!==Object.prototype&&s.next&&(ye(s,f,!0,!0),vt[f]=Ae)),i==Te&&g&&g.name!==Te&&(p=!0,v=function(){return g.call(this)}),a&&d[ke]!==v&&F(d,ke,v),vt[e]=v,i)if(c={values:h(Te),keys:o?v:h(Ee),entries:h(Oe)},a)for(l in c)(xe||p||!(l in d))&&_e(d,l,c[l]);else V({target:e,proto:!0,forced:xe||p},c);return c},Ie="Array Iterator",Ce=Vt.set,je=Vt.getterFor(Ie);Pe(Array,"Array",(function(t,e){Ce(this,{type:Ie,target:g(t),index:0,kind:e})}),(function(){var t=je(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");vt.Arguments=vt.Array;var Le=Qt("toStringTag");for(var Re in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Me=r[Re],Ne=Me&&Me.prototype;Ne&&pe(Ne)!==Le&&F(Ne,Le,Re),vt[Re]=vt.Array}var De=Array.isArray||function(t){return"Array"==h(t)},ze=Qt("species"),Fe=function(t,e){var n;return De(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!De(n.prototype)?v(n)&&null===(n=n[ze])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Ue=[].push,Be=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(c,u,l,h){for(var f,d,g=Ht(c),v=p(g),y=M(u,l,3),m=$(v.length),b=0,w=h||Fe,_=e?w(c,m):n||a?w(c,0):void 0;m>b;b++)if((s||b in v)&&(d=y(f=v[b],b,g),t))if(e)_[b]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return b;case 2:Ue.call(_,f)}else switch(t){case 4:return!1;case 7:Ue.call(_,f)}return o?-1:r||i?i:_}},Ve={forEach:Be(0),map:Be(1),filter:Be(2),some:Be(3),every:Be(4),find:Be(5),findIndex:Be(6),filterOut:Be(7)},He=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))},We=Object.defineProperty,qe={},Xe=function(t){throw t},Ye=function(t,e){if(b(qe,t))return qe[t];e||(e={});var n=[][t],r=!!b(e,"ACCESSORS")&&e.ACCESSORS,a=b(e,0)?e[0]:Xe,s=b(e,1)?e[1]:void 0;return qe[t]=!!n&&!i((function(){if(r&&!o)return!0;var t={length:-1};r?We(t,1,{enumerable:!0,get:Xe}):t[1]=1,n.call(t,a,s)}))},Ge=Ve.forEach,$e=He("forEach"),Ze=Ye("forEach"),Ke=$e&&Ze?[].forEach:function(t){return Ge(this,t,arguments.length>1?arguments[1]:void 0)};V({target:"Array",proto:!0,forced:[].forEach!=Ke},{forEach:Ke});var Je=function(t){return L[t+"Prototype"]},Qe=Je("Array").forEach,tn=Array.prototype,en={DOMTokenList:!0,NodeList:!0},nn=function(t){var e=t.forEach;return t===tn||t instanceof Array&&e===tn.forEach||en.hasOwnProperty(pe(t))?Qe:e},rn=E.f,on=i((function(){rn(1)}));V({target:"Object",stat:!0,forced:!o||on,sham:!o},{getOwnPropertyDescriptor:function(t,e){return rn(g(t),e)}});var an,sn,cn=e((function(t){var e=L.Object,n=t.exports=function(t,n){return e.getOwnPropertyDescriptor(t,n)};e.getOwnPropertyDescriptor.sham&&(n.sham=!0)})),un=ut("navigator","userAgent")||"",ln=r.process,hn=ln&&ln.versions,fn=hn&&hn.v8;fn?sn=(an=fn.split("."))[0]+an[1]:un&&(!(an=un.match(/Edge\/(\d+)/))||an[1]>=74)&&(an=un.match(/Chrome\/(\d+)/))&&(sn=an[1]);var pn=sn&&+sn,dn=Qt("species"),gn=function(t){return pn>=51||!i((function(){var e=[];return(e.constructor={})[dn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},vn=Ve.filter,yn=gn("filter"),mn=Ye("filter");V({target:"Array",proto:!0,forced:!yn||!mn},{filter:function(t){return vn(this,t,arguments.length>1?arguments[1]:void 0)}});var bn=Je("Array").filter,wn=Array.prototype,_n=function(t){var e=t.filter;return t===wn||t instanceof Array&&e===wn.filter?bn:e},Sn=ht.f,xn={}.toString,kn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],En={f:function(t){return kn&&"[object Window]"==xn.call(t)?function(t){try{return Sn(t)}catch(t){return kn.slice()}}(t):Sn(g(t))}},Tn={f:Qt},On=z.f,An=function(t){var e=L.Symbol||(L.Symbol={});b(e,t)||On(e,t,{value:Tn.f(t)})},Pn=Ve.forEach,In=jt("hidden"),Cn="Symbol",jn=Qt("toPrimitive"),Ln=Vt.set,Rn=Vt.getterFor(Cn),Mn=Object.prototype,Nn=r.Symbol,Dn=ut("JSON","stringify"),zn=E.f,Fn=z.f,Un=En.f,Bn=c.f,Vn=Ot("symbols"),Hn=Ot("op-symbols"),Wn=Ot("string-to-symbol-registry"),qn=Ot("symbol-to-string-registry"),Xn=Ot("wks"),Yn=r.QObject,Gn=!Yn||!Yn.prototype||!Yn.prototype.findChild,$n=o&&i((function(){return 7!=ce(Fn({},"a",{get:function(){return Fn(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=zn(Mn,e);r&&delete Mn[e],Fn(t,e,n),r&&t!==Mn&&Fn(Mn,e,r)}:Fn,Zn=function(t,e){var n=Vn[t]=ce(Nn.prototype);return Ln(n,{type:Cn,tag:t,description:e}),o||(n.description=e),n},Kn=$t?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Nn},Jn=function(t,e,n){t===Mn&&Jn(Hn,e,n),N(t);var r=y(e,!0);return N(n),b(Vn,r)?(n.enumerable?(b(t,In)&&t[In][r]&&(t[In][r]=!1),n=ce(n,{enumerable:u(0,!1)})):(b(t,In)||Fn(t,In,u(1,{})),t[In][r]=!0),$n(t,r,n)):Fn(t,r,n)},Qn=function(t,e){N(t);var n=g(e),r=ot(n).concat(rr(n));return Pn(r,(function(e){o&&!tr.call(n,e)||Jn(t,e,n[e])})),t},tr=function(t){var e=y(t,!0),n=Bn.call(this,e);return!(this===Mn&&b(Vn,e)&&!b(Hn,e))&&(!(n||!b(this,e)||!b(Vn,e)||b(this,In)&&this[In][e])||n)},er=function(t,e){var n=g(t),r=y(e,!0);if(n!==Mn||!b(Vn,r)||b(Hn,r)){var i=zn(n,r);return!i||!b(Vn,r)||b(n,In)&&n[In][r]||(i.enumerable=!0),i}},nr=function(t){var e=Un(g(t)),n=[];return Pn(e,(function(t){b(Vn,t)||b(et,t)||n.push(t)})),n},rr=function(t){var e=t===Mn,n=Un(e?Hn:g(t)),r=[];return Pn(n,(function(t){!b(Vn,t)||e&&!b(Mn,t)||r.push(Vn[t])})),r};if(Gt||(_e((Nn=function(){if(this instanceof Nn)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=It(t),n=function(t){this===Mn&&n.call(Hn,t),b(this,In)&&b(this[In],e)&&(this[In][e]=!1),$n(this,e,u(1,t))};return o&&Gn&&$n(Mn,e,{configurable:!0,set:n}),Zn(e,t)}).prototype,"toString",(function(){return Rn(this).tag})),_e(Nn,"withoutSetter",(function(t){return Zn(It(t),t)})),c.f=tr,z.f=Jn,E.f=er,ht.f=En.f=nr,ft.f=rr,Tn.f=function(t){return Zn(Qt(t),t)},o&&Fn(Nn.prototype,"description",{configurable:!0,get:function(){return Rn(this).description}})),V({global:!0,wrap:!0,forced:!Gt,sham:!Gt},{Symbol:Nn}),Pn(ot(Xn),(function(t){An(t)})),V({target:Cn,stat:!0,forced:!Gt},{for:function(t){var e=String(t);if(b(Wn,e))return Wn[e];var n=Nn(e);return Wn[e]=n,qn[n]=e,n},keyFor:function(t){if(!Kn(t))throw TypeError(t+" is not a symbol");if(b(qn,t))return qn[t]},useSetter:function(){Gn=!0},useSimple:function(){Gn=!1}}),V({target:"Object",stat:!0,forced:!Gt,sham:!o},{create:function(t,e){return void 0===e?ce(t):Qn(ce(t),e)},defineProperty:Jn,defineProperties:Qn,getOwnPropertyDescriptor:er}),V({target:"Object",stat:!0,forced:!Gt},{getOwnPropertyNames:nr,getOwnPropertySymbols:rr}),V({target:"Object",stat:!0,forced:i((function(){ft.f(1)}))},{getOwnPropertySymbols:function(t){return ft.f(Ht(t))}}),Dn){var ir=!Gt||i((function(){var t=Nn();return"[null]"!=Dn([t])||"{}"!=Dn({a:t})||"{}"!=Dn(Object(t))}));V({target:"JSON",stat:!0,forced:ir},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(v(e)||void 0!==t)&&!Kn(t))return De(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Kn(e))return e}),i[1]=e,Dn.apply(null,i)}})}Nn.prototype[jn]||F(Nn.prototype,jn,Nn.prototype.valueOf),ye(Nn,Cn),et[In]=!0;var or=L.Object.getOwnPropertySymbols,ar=i((function(){ot(1)}));V({target:"Object",stat:!0,forced:ar},{keys:function(t){return ot(Ht(t))}});var sr=L.Object.keys,cr=[].slice,ur={},lr=function(t,e,n){if(!(e in ur)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";ur[e]=Function("C,a","return new C("+r.join(",")+")")}return ur[e](t,n)},hr=Function.bind||function(t){var e=R(this),n=cr.call(arguments,1),r=function(){var i=n.concat(cr.call(arguments));return this instanceof r?lr(e,i.length,i):e.apply(t,i)};return v(e.prototype)&&(r.prototype=e.prototype),r};V({target:"Function",proto:!0},{bind:hr});var fr=Je("Function").bind,pr=Function.prototype,dr=function(t){var e=t.bind;return t===pr||t instanceof Function&&e===pr.bind?fr:e},gr=H;var vr,yr=function(t,e,n){return e in t?gr(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},mr=function(t){try{return!!t()}catch(t){return!0}},br={}.toString,wr=function(t){return br.call(t).slice(8,-1)},_r="".split,Sr=mr((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==wr(t)?_r.call(t,""):Object(t)}:Object,xr=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},kr=function(t){return Sr(xr(t))},Er=function(t){return t&&t.Math==Math&&t},Tr=Er("object"==typeof globalThis&&globalThis)||Er("object"==typeof window&&window)||Er("object"==typeof self&&self)||Er("object"==typeof t&&t)||function(){return this}()||Function("return this")(),Or=!mr((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Ar=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Pr=Tr.document,Ir=Ar(Pr)&&Ar(Pr.createElement),Cr=function(t){return Ir?Pr.createElement(t):{}},jr=!Or&&!mr((function(){return 7!=Object.defineProperty(Cr("div"),"a",{get:function(){return 7}}).a})),Lr=function(t){if(!Ar(t))throw TypeError(String(t)+" is not an object");return t},Rr=function(t,e){if(!Ar(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Ar(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Ar(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Ar(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Mr=Object.defineProperty,Nr={f:Or?Mr:function(t,e,n){if(Lr(t),e=Rr(e,!0),Lr(n),jr)try{return Mr(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Dr=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},zr=Or?function(t,e,n){return Nr.f(t,e,Dr(1,n))}:function(t,e,n){return t[e]=n,t},Fr=function(t,e){try{zr(Tr,t,e)}catch(n){Tr[t]=e}return e},Ur="__core-js_shared__",Br=Tr[Ur]||Fr(Ur,{}),Vr=e((function(t){(t.exports=function(t,e){return Br[t]||(Br[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),Hr={}.hasOwnProperty,Wr=function(t,e){return Hr.call(t,e)},qr=0,Xr=Math.random(),Yr=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++qr+Xr).toString(36)},Gr=!!Object.getOwnPropertySymbols&&!mr((function(){return!String(Symbol())})),$r=Gr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Zr=Vr("wks"),Kr=Tr.Symbol,Jr=$r?Kr:Kr&&Kr.withoutSetter||Yr,Qr=function(t){return Wr(Zr,t)||(Gr&&Wr(Kr,t)?Zr[t]=Kr[t]:Zr[t]=Jr("Symbol."+t)),Zr[t]},ti=Math.ceil,ei=Math.floor,ni=function(t){return isNaN(t=+t)?0:(t>0?ei:ti)(t)},ri=Math.min,ii=function(t){return t>0?ri(ni(t),9007199254740991):0},oi=Math.max,ai=Math.min,si=function(t){return function(e,n,r){var i,o=kr(e),a=ii(o.length),s=function(t,e){var n=ni(t);return n<0?oi(n+e,0):ai(n,e)}(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},ci={includes:si(!0),indexOf:si(!1)},ui={},li=ci.indexOf,hi=function(t,e){var n,r=kr(t),i=0,o=[];for(n in r)!Wr(ui,n)&&Wr(r,n)&&o.push(n);for(;e.length>i;)Wr(r,n=e[i++])&&(~li(o,n)||o.push(n));return o},fi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pi=Object.keys||function(t){return hi(t,fi)},di=Or?Object.defineProperties:function(t,e){Lr(t);for(var n,r=pi(e),i=r.length,o=0;i>o;)Nr.f(t,n=r[o++],e[n]);return t},gi=Tr,vi=function(t){return"function"==typeof t?t:void 0},yi=function(t,e){return arguments.length<2?vi(gi[t])||vi(Tr[t]):gi[t]&&gi[t][e]||Tr[t]&&Tr[t][e]},mi=yi("document","documentElement"),bi=Vr("keys"),wi=function(t){return bi[t]||(bi[t]=Yr(t))},_i=wi("IE_PROTO"),Si=function(){},xi=function(t){return"<script>"+t+"</"+"script>"},ki=function(){try{vr=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ki=vr?function(t){t.write(xi("")),t.close();var e=t.parentWindow.Object;return t=null,e}(vr):((e=Cr("iframe")).style.display="none",mi.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(xi("document.F=Object")),t.close(),t.F);for(var n=fi.length;n--;)delete ki.prototype[fi[n]];return ki()};ui[_i]=!0;var Ei=Object.create||function(t,e){var n;return null!==t?(Si.prototype=Lr(t),n=new Si,Si.prototype=null,n[_i]=t):n=ki(),void 0===e?n:di(n,e)},Ti=Qr("unscopables"),Oi=Array.prototype;null==Oi[Ti]&&Nr.f(Oi,Ti,{configurable:!0,value:Ei(null)});var Ai=function(t){Oi[Ti][t]=!0},Pi={},Ii=Function.toString;"function"!=typeof Br.inspectSource&&(Br.inspectSource=function(t){return Ii.call(t)});var Ci,ji,Li,Ri=Br.inspectSource,Mi=Tr.WeakMap,Ni="function"==typeof Mi&&/native code/.test(Ri(Mi)),Di=Tr.WeakMap;if(Ni){var zi=Br.state||(Br.state=new Di),Fi=zi.get,Ui=zi.has,Bi=zi.set;Ci=function(t,e){return e.facade=t,Bi.call(zi,t,e),e},ji=function(t){return Fi.call(zi,t)||{}},Li=function(t){return Ui.call(zi,t)}}else{var Vi=wi("state");ui[Vi]=!0,Ci=function(t,e){return e.facade=t,zr(t,Vi,e),e},ji=function(t){return Wr(t,Vi)?t[Vi]:{}},Li=function(t){return Wr(t,Vi)}}var Hi,Wi,qi,Xi={set:Ci,get:ji,has:Li,enforce:function(t){return Li(t)?ji(t):Ci(t,{})},getterFor:function(t){return function(e){var n;if(!Ar(e)||(n=ji(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Yi={}.propertyIsEnumerable,Gi=Object.getOwnPropertyDescriptor,$i={f:Gi&&!Yi.call({1:2},1)?function(t){var e=Gi(this,t);return!!e&&e.enumerable}:Yi},Zi=Object.getOwnPropertyDescriptor,Ki={f:Or?Zi:function(t,e){if(t=kr(t),e=Rr(e,!0),jr)try{return Zi(t,e)}catch(t){}if(Wr(t,e))return Dr(!$i.f.call(t,e),t[e])}},Ji=e((function(t){var e=Xi.get,n=Xi.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a,s=!!o&&!!o.unsafe,c=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||Wr(i,"name")||zr(i,"name",e),(a=n(i)).source||(a.source=r.join("string"==typeof e?e:""))),t!==Tr?(s?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=i:zr(t,e,i)):c?t[e]=i:Fr(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Ri(this)}))})),Qi=fi.concat("length","prototype"),to={f:Object.getOwnPropertyNames||function(t){return hi(t,Qi)}},eo={f:Object.getOwnPropertySymbols},no=yi("Reflect","ownKeys")||function(t){var e=to.f(Lr(t)),n=eo.f;return n?e.concat(n(t)):e},ro=function(t,e){for(var n=no(e),r=Nr.f,i=Ki.f,o=0;o<n.length;o++){var a=n[o];Wr(t,a)||r(t,a,i(e,a))}},io=/#|\.prototype\./,oo=function(t,e){var n=so[ao(t)];return n==uo||n!=co&&("function"==typeof e?mr(e):!!e)},ao=oo.normalize=function(t){return String(t).replace(io,".").toLowerCase()},so=oo.data={},co=oo.NATIVE="N",uo=oo.POLYFILL="P",lo=oo,ho=Ki.f,fo=function(t,e){var n,r,i,o,a,s=t.target,c=t.global,u=t.stat;if(n=c?Tr:u?Tr[s]||Fr(s,{}):(Tr[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=ho(n,r))&&a.value:n[r],!lo(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;ro(o,i)}(t.sham||i&&i.sham)&&zr(o,"sham",!0),Ji(n,r,o,t)}},po=function(t){return Object(xr(t))},go=!mr((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),vo=wi("IE_PROTO"),yo=Object.prototype,mo=go?Object.getPrototypeOf:function(t){return t=po(t),Wr(t,vo)?t[vo]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?yo:null},bo=Qr("iterator"),wo=!1;[].keys&&("next"in(qi=[].keys())?(Wi=mo(mo(qi)))!==Object.prototype&&(Hi=Wi):wo=!0),null==Hi&&(Hi={}),Wr(Hi,bo)||zr(Hi,bo,(function(){return this}));var _o={IteratorPrototype:Hi,BUGGY_SAFARI_ITERATORS:wo},So=Nr.f,xo=Qr("toStringTag"),ko=function(t,e,n){t&&!Wr(t=n?t:t.prototype,xo)&&So(t,xo,{configurable:!0,value:e})},Eo=_o.IteratorPrototype,To=function(){return this},Oo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Lr(n),function(t){if(!Ar(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ao=_o.IteratorPrototype,Po=_o.BUGGY_SAFARI_ITERATORS,Io=Qr("iterator"),Co="keys",jo="values",Lo="entries",Ro=function(){return this},Mo=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=Ei(Eo,{next:Dr(1,n)}),ko(t,r,!1),Pi[r]=To}(n,e,r);var s,c,u,l=function(t){if(t===i&&g)return g;if(!Po&&t in p)return p[t];switch(t){case Co:case jo:case Lo:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,p=t.prototype,d=p[Io]||p["@@iterator"]||i&&p[i],g=!Po&&d||l(i),v="Array"==e&&p.entries||d;if(v&&(s=mo(v.call(new t)),Ao!==Object.prototype&&s.next&&(mo(s)!==Ao&&(Oo?Oo(s,Ao):"function"!=typeof s[Io]&&zr(s,Io,Ro)),ko(s,h,!0))),i==jo&&d&&d.name!==jo&&(f=!0,g=function(){return d.call(this)}),p[Io]!==g&&zr(p,Io,g),Pi[e]=g,i)if(c={values:l(jo),keys:o?g:l(Co),entries:l(Lo)},a)for(u in c)(Po||f||!(u in p))&&Ji(p,u,c[u]);else fo({target:e,proto:!0,forced:Po||f},c);return c},No="Array Iterator",Do=Xi.set,zo=Xi.getterFor(No),Fo=Mo(Array,"Array",(function(t,e){Do(this,{type:No,target:kr(t),index:0,kind:e})}),(function(){var t=zo(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Pi.Arguments=Pi.Array,Ai("keys"),Ai("values"),Ai("entries");var Uo={};Uo[Qr("toStringTag")]="z";var Bo="[object z]"===String(Uo),Vo=Qr("toStringTag"),Ho="Arguments"==wr(function(){return arguments}()),Wo=Bo?wr:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Vo))?n:Ho?wr(e):"Object"==(r=wr(e))&&"function"==typeof e.callee?"Arguments":r},qo=Bo?{}.toString:function(){return"[object "+Wo(this)+"]"};Bo||Ji(Object.prototype,"toString",qo,{unsafe:!0});var Xo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Yo=Qr("iterator"),Go=Qr("toStringTag"),$o=Fo.values;for(var Zo in Xo){var Ko=Tr[Zo],Jo=Ko&&Ko.prototype;if(Jo){if(Jo[Yo]!==$o)try{zr(Jo,Yo,$o)}catch(al){Jo[Yo]=$o}if(Jo[Go]||zr(Jo,Go,Zo),Xo[Zo])for(var Qo in Fo)if(Jo[Qo]!==Fo[Qo])try{zr(Jo,Qo,Fo[Qo])}catch(al){Jo[Qo]=Fo[Qo]}}}var ta=Je("Array").keys,ea=Array.prototype,na={DOMTokenList:!0,NodeList:!0},ra=function(t){var e=t.keys;return t===ea||t instanceof Array&&e===ea.keys||na.hasOwnProperty(pe(t))?ta:e},ia=tt.includes,oa=Ye("indexOf",{ACCESSORS:!0,1:0});V({target:"Array",proto:!0,forced:!oa},{includes:function(t){return ia(this,t,arguments.length>1?arguments[1]:void 0)}});var aa=Je("Array").includes,sa=Qt("match"),ca=function(t){if(function(t){var e;return v(t)&&(void 0!==(e=t[sa])?!!e:"RegExp"==h(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},ua=Qt("match");V({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ua]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(d(this)).indexOf(ca(t),arguments.length>1?arguments[1]:void 0)}});var la=Je("String").includes,ha=Array.prototype,fa=String.prototype,pa=function(t){var e=t.includes;return t===ha||t instanceof Array&&e===ha.includes?aa:"string"==typeof t||t===fa||t instanceof String&&e===fa.includes?la:e};var da=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function ga(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),gr(t,r.key,r)}}var va=function(t,e,n){return e&&ga(t.prototype,e),n&&ga(t,n),t},ya=e((function(t){var e=function(){};e.prototype={bind:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},unbind:function(t,e){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(t){for(var n=["bind","unbind","trigger"],r=0;r<n.length;r++)t.prototype[n[r]]=e.prototype[n[r]]},"exports"in t&&(t.exports=e)})),ma=function(){function t(){da(this,t),yr(this,"attrs",{})}return va(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};for(var n in t){var r,i=t[n];pa(r=ra(this)).call(r,n)&&(this.attrs[n]=i,e[n]=i)}this.trigger("change",e)}},{key:"get",value:function(t){return this.attrs[t]}}]),t}();ma.prototype.keys=["appVersion","appKey","appSecret","authToken","eventTracker","locale","coreSessionToken","coreSessionClientId","coreUrl","eventsTrackUrl"],ya.mixin(ma);var ba="https://wolf-api.tjek.com/sync",wa=Object.freeze({__proto__:null,locale:"en_US",coreUrl:"https://squid-api.tjek.com",eventsTrackUrl:ba}),_a=e((function(t,e){var n;n=function(){
/*!
	   * mustache.js - Logic-less {{mustache}} templates with JavaScript
	   * http://github.com/janl/mustache.js
	   */
var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"==typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}var o=RegExp.prototype.test,a=/\S/;function s(t){return!function(t,e){return o.call(t,e)}(a,t)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,l=/\s+/,h=/\s*=/,f=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function d(t){this.string=t,this.tail=t,this.pos=0}function g(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function v(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},g.prototype.push=function(t){return new g(t,this)},g.prototype.lookup=function(t){var e,r,o,a=this.cache;if(a.hasOwnProperty(t))e=a[t];else{for(var s,c,u,l=this,h=!1;l;){if(t.indexOf(".")>0)for(s=l.view,c=t.split("."),u=0;null!=s&&u<c.length;)u===c.length-1&&(h=i(s,c[u])||(r=s,o=c[u],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(o))),s=s[c[u++]];else s=l.view[t],h=i(l.view,t);if(h){e=s;break}l=l.parent}a[t]=e}return n(e)&&(e=e.call(this.view)),e},v.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},v.prototype.parse=function(t,n){var i=this.templateCache,o=t+":"+(n||y.tags).join(":"),a=void 0!==i,c=a?i.get(o):void 0;return null==c&&(c=function(t,n){if(!t)return[];var i,o,a,c=!1,g=[],v=[],m=[],b=!1,w=!1,_="",S=0;function x(){if(b&&!w)for(;m.length;)delete v[m.pop()];else m=[];b=!1,w=!1}function k(t){if("string"==typeof t&&(t=t.split(l,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(r(t[0])+"\\s*"),o=new RegExp("\\s*"+r(t[1])),a=new RegExp("\\s*"+r("}"+t[1]))}k(n||y.tags);for(var E,T,O,A,P,I,C=new d(t);!C.eos();){if(E=C.pos,O=C.scanUntil(i))for(var j=0,L=O.length;j<L;++j)s(A=O.charAt(j))?(m.push(v.length),_+=A):(w=!0,c=!0,_+=" "),v.push(["text",A,E,E+1]),E+=1,"\n"===A&&(x(),_="",S=0,c=!1);if(!C.scan(i))break;if(b=!0,T=C.scan(p)||"name",C.scan(u),"="===T?(O=C.scanUntil(h),C.scan(h),C.scanUntil(o)):"{"===T?(O=C.scanUntil(a),C.scan(f),C.scanUntil(o),T="&"):O=C.scanUntil(o),!C.scan(o))throw new Error("Unclosed tag at "+C.pos);if(P=">"==T?[T,O,E,C.pos,_,S,c]:[T,O,E,C.pos],S++,v.push(P),"#"===T||"^"===T)g.push(P);else if("/"===T){if(!(I=g.pop()))throw new Error('Unopened section "'+O+'" at '+E);if(I[1]!==O)throw new Error('Unclosed section "'+I[1]+'" at '+E)}else"name"===T||"{"===T||"&"===T?w=!0:"="===T&&k(O)}if(x(),I=g.pop())throw new Error('Unclosed section "'+I[1]+'" at '+C.pos);return function(t){for(var e,n=[],r=n,i=[],o=0,a=t.length;o<a;++o)switch((e=t[o])[0]){case"#":case"^":r.push(e),i.push(e),r=e[4]=[];break;case"/":i.pop()[5]=e[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(v))}(t,n),a&&i.set(o,c)),c},v.prototype.render=function(t,e,n,r){var i=this.getConfigTags(r),o=this.parse(t,i),a=e instanceof g?e:new g(e,void 0);return this.renderTokens(o,a,n,t,r)},v.prototype.renderTokens=function(t,e,n,r,i){for(var o,a,s,c="",u=0,l=t.length;u<l;++u)s=void 0,"#"===(a=(o=t[u])[0])?s=this.renderSection(o,e,n,r,i):"^"===a?s=this.renderInverted(o,e,n,r,i):">"===a?s=this.renderPartial(o,e,n,i):"&"===a?s=this.unescapedValue(o,e):"name"===a?s=this.escapedValue(o,e,i):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(c+=s);return c},v.prototype.renderSection=function(t,r,i,o,a){var s=this,c="",u=r.lookup(t[1]);if(u){if(e(u))for(var l=0,h=u.length;l<h;++l)c+=this.renderTokens(t[4],r.push(u[l]),i,o,a);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)c+=this.renderTokens(t[4],r.push(u),i,o,a);else if(n(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(r.view,o.slice(t[3],t[5]),(function(t){return s.render(t,r,i,a)})))&&(c+=u)}else c+=this.renderTokens(t[4],r,i,o,a);return c}},v.prototype.renderInverted=function(t,n,r,i,o){var a=n.lookup(t[1]);if(!a||e(a)&&0===a.length)return this.renderTokens(t[4],n,r,i,o)},v.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),i=t.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!n)&&(i[o]=r+i[o]);return i.join("\n")},v.prototype.renderPartial=function(t,e,r,i){if(r){var o=this.getConfigTags(i),a=n(r)?r(t[1]):r[t[1]];if(null!=a){var s=t[6],c=t[5],u=t[4],l=a;0==c&&u&&(l=this.indentPartial(a,u,s));var h=this.parse(l,o);return this.renderTokens(h,e,r,l,i)}}},v.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},v.prototype.escapedValue=function(t,e,n){var r=this.getConfigEscape(n)||y.escape,i=e.lookup(t[1]);if(null!=i)return"number"==typeof i&&r===y.escape?String(i):r(i)},v.prototype.rawValue=function(t){return t[1]},v.prototype.getConfigTags=function(t){return e(t)?t:t&&"object"==typeof t?t.tags:void 0},v.prototype.getConfigEscape=function(t){return t&&"object"==typeof t&&!e(t)?t.escape:void 0};var y={name:"mustache.js",version:"4.1.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){m.templateCache=t},get templateCache(){return m.templateCache}},m=new v;return y.clearCache=function(){return m.clearCache()},y.parse=function(t,e){return m.parse(t,e)},y.render=function(t,n,r,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(e(o=t)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return m.render(t,n,r,i)},y.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return c[t]}))},y.Scanner=d,y.Context=g,y.Writer=v,y},t.exports=n()})),Sa={"paged_publication.hotspot_picker.header":"Which offer did you mean?","incito_publication.product_picker.header":"Which product?"};function xa(t,e){var n,r=null!==(n=Sa[t])&&void 0!==n?n:"";return _a.render(r,e)}var ka=Object.freeze({__proto__:null,t:xa,update:function(t){for(var e in t){var n=t[e];Sa[e]=n}}}),Ea=Nr.f,Ta=Function.prototype,Oa=Ta.toString,Aa=/^\s*function ([^ (]*)/,Pa="name";Or&&!(Pa in Ta)&&Ea(Ta,Pa,{configurable:!0,get:function(){try{return Oa.call(this).match(Aa)[1]}catch(t){return""}}});var Ia=Qr("match"),Ca=function(t){var e;return Ar(t)&&(void 0!==(e=t[Ia])?!!e:"RegExp"==wr(t))},ja=function(){var t=Lr(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function La(t,e){return RegExp(t,e)}var Ra={UNSUPPORTED_Y:mr((function(){var t=La("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:mr((function(){var t=La("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Ma=Qr("species"),Na=function(t){var e=yi(t),n=Nr.f;Or&&e&&!e[Ma]&&n(e,Ma,{configurable:!0,get:function(){return this}})},Da=Nr.f,za=to.f,Fa=Xi.set,Ua=Qr("match"),Ba=Tr.RegExp,Va=Ba.prototype,Ha=/a/g,Wa=/a/g,qa=new Ba(Ha)!==Ha,Xa=Ra.UNSUPPORTED_Y;if(Or&&lo("RegExp",!qa||Xa||mr((function(){return Wa[Ua]=!1,Ba(Ha)!=Ha||Ba(Wa)==Wa||"/a/i"!=Ba(Ha,"i")})))){for(var Ya=function(t,e){var n,r=this instanceof Ya,i=Ca(t),o=void 0===e;if(!r&&i&&t.constructor===Ya&&o)return t;qa?i&&!o&&(t=t.source):t instanceof Ya&&(o&&(e=ja.call(t)),t=t.source),Xa&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a,s,c,u,l,h=(a=qa?new Ba(t,e):Ba(t,e),s=r?this:Va,c=Ya,Oo&&"function"==typeof(u=s.constructor)&&u!==c&&Ar(l=u.prototype)&&l!==c.prototype&&Oo(a,l),a);return Xa&&n&&Fa(h,{sticky:n}),h},Ga=function(t){t in Ya||Da(Ya,t,{configurable:!0,get:function(){return Ba[t]},set:function(e){Ba[t]=e}})},$a=za(Ba),Za=0;$a.length>Za;)Ga($a[Za++]);Va.constructor=Ya,Ya.prototype=Va,Ji(Tr,"RegExp",Ya)}Na("RegExp");var Ka=RegExp.prototype.exec,Ja=String.prototype.replace,Qa=Ka,ts=function(){var t=/a/,e=/b*/g;return Ka.call(t,"a"),Ka.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),es=Ra.UNSUPPORTED_Y||Ra.BROKEN_CARET,ns=void 0!==/()??/.exec("")[1];(ts||ns||es)&&(Qa=function(t){var e,n,r,i,o=this,a=es&&o.sticky,s=ja.call(o),c=o.source,u=0,l=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,u++),n=new RegExp("^(?:"+c+")",s)),ns&&(n=new RegExp("^"+c+"$(?!\\s)",s)),ts&&(e=o.lastIndex),r=Ka.call(a?n:o,l),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:ts&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),ns&&r&&r.length>1&&Ja.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var rs=Qa;fo({target:"RegExp",proto:!0,forced:/./.exec!==rs},{exec:rs});var is="toString",os=RegExp.prototype,as=os.toString,ss=mr((function(){return"/a/b"!=as.call({source:"a",flags:"b"})})),cs=as.name!=is;(ss||cs)&&Ji(RegExp.prototype,is,(function(){var t=Lr(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in os)?ja.call(t):n)}),{unsafe:!0});var us=Qr("species"),ls=!mr((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),hs="$0"==="a".replace(/./,"$0"),fs=Qr("replace"),ps=!!/./[fs]&&""===/./[fs]("a","$0"),ds=!mr((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),gs=function(t,e,n,r){var i=Qr(t),o=!mr((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!mr((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[us]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!ls||!hs||ps)||"split"===t&&!ds){var s=/./[i],c=n(i,""[t],(function(t,e,n,r,i){return e.exec===rs?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:hs,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ps}),u=c[0],l=c[1];Ji(String.prototype,t,u),Ji(RegExp.prototype,i,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}r&&zr(RegExp.prototype[i],"sham",!0)},vs=function(t){return function(e,n){var r,i,o=String(xr(e)),a=ni(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},ys={codeAt:vs(!1),charAt:vs(!0)},ms=ys.charAt,bs=function(t,e,n){return e+(n?ms(t,e).length:1)},ws=Math.floor,_s="".replace,Ss=/\$([$&'`]|\d\d?|<[^>]*>)/g,xs=/\$([$&'`]|\d\d?)/g,ks=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,c=xs;return void 0!==i&&(i=po(i),c=Ss),_s.call(o,c,(function(o,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=i[c.slice(1,-1)];break;default:var l=+c;if(0===l)return o;if(l>s){var h=ws(l/10);return 0===h?o:h<=s?void 0===r[h-1]?c.charAt(1):r[h-1]+c.charAt(1):o}u=r[l-1]}return void 0===u?"":u}))},Es=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==wr(t))throw TypeError("RegExp#exec called on incompatible receiver");return rs.call(t,e)},Ts=Math.max,Os=Math.min;gs("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=xr(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(e,t,this,r);if(s.done)return s.value}var c=Lr(t),u=String(this),l="function"==typeof r;l||(r=String(r));var h=c.global;if(h){var f=c.unicode;c.lastIndex=0}for(var p=[];;){var d=Es(c,u);if(null===d)break;if(p.push(d),!h)break;""===String(d[0])&&(c.lastIndex=bs(u,ii(c.lastIndex),f))}for(var g,v="",y=0,m=0;m<p.length;m++){d=p[m];for(var b=String(d[0]),w=Ts(Os(ni(d.index),u.length),0),_=[],S=1;S<d.length;S++)_.push(void 0===(g=d[S])?g:String(g));var x=d.groups;if(l){var k=[b].concat(_,w,u);void 0!==x&&k.push(x);var E=String(r.apply(void 0,k))}else E=ks(b,u,w,_,x,r);w>=y&&(v+=u.slice(y,w)+E,y=w+b.length)}return v+u.slice(y)}]}));var As=Qt("iterator"),Ps=Array.prototype,Is=function(t){return void 0!==t&&(vt.Array===t||Ps[As]===t)},Cs=Qt("iterator"),js=function(t){if(null!=t)return t[Cs]||t["@@iterator"]||vt[pe(t)]},Ls=function(t){var e=t.return;if(void 0!==e)return N(e.call(t)).value},Rs=function(t,e){this.stopped=t,this.result=e},Ms=function(t,e,n){var r,i,o,a,s,c,u,l=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),d=M(e,l,1+h+p),g=function(t){return r&&Ls(r),new Rs(!0,t)},v=function(t){return h?(N(t),p?d(t[0],t[1],g):d(t[0],t[1])):p?d(t,g):d(t)};if(f)r=t;else{if("function"!=typeof(i=js(t)))throw TypeError("Target is not iterable");if(Is(i)){for(o=0,a=$(t.length);a>o;o++)if((s=v(t[o]))&&s instanceof Rs)return s;return new Rs(!1)}r=i.call(t)}for(c=r.next;!(u=c.call(r)).done;){try{s=v(u.value)}catch(t){throw Ls(r),t}if("object"==typeof s&&s&&s instanceof Rs)return s}return new Rs(!1)},Ns=function(t,e){var n=this;if(!(n instanceof Ns))return new Ns(t,e);we&&(n=we(new Error(void 0),Yt(n))),void 0!==e&&F(n,"message",String(e));var r=[];return Ms(t,r.push,{that:r}),F(n,"errors",r),n};Ns.prototype=ce(Error.prototype,{constructor:u(5,Ns),message:u(5,""),name:u(5,"AggregateError")}),V({global:!0},{AggregateError:Ns});var Ds=r.Promise,zs=Qt("species"),Fs=Qt("iterator"),Us=!1;try{var Bs=0,Vs={next:function(){return{done:!!Bs++}},return:function(){Us=!0}};Vs[Fs]=function(){return this},Array.from(Vs,(function(){throw 2}))}catch(al){}var Hs,Ws,qs,Xs=function(t,e){if(!e&&!Us)return!1;var n=!1;try{var r={};r[Fs]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Ys=Qt("species"),Gs=function(t,e){var n,r=N(t).constructor;return void 0===r||null==(n=N(r)[Ys])?e:R(n)},$s=/(iphone|ipod|ipad).*applewebkit/i.test(un),Zs="process"==h(r.process),Ks=r.location,Js=r.setImmediate,Qs=r.clearImmediate,tc=r.process,ec=r.MessageChannel,nc=r.Dispatch,rc=0,ic={},oc="onreadystatechange",ac=function(t){if(ic.hasOwnProperty(t)){var e=ic[t];delete ic[t],e()}},sc=function(t){return function(){ac(t)}},cc=function(t){ac(t.data)},uc=function(t){r.postMessage(t+"",Ks.protocol+"//"+Ks.host)};Js&&Qs||(Js=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ic[++rc]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Hs(rc),rc},Qs=function(t){delete ic[t]},Zs?Hs=function(t){tc.nextTick(sc(t))}:nc&&nc.now?Hs=function(t){nc.now(sc(t))}:ec&&!$s?(qs=(Ws=new ec).port2,Ws.port1.onmessage=cc,Hs=M(qs.postMessage,qs,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts&&Ks&&"file:"!==Ks.protocol&&!i(uc)?(Hs=uc,r.addEventListener("message",cc,!1)):Hs=oc in S("script")?function(t){re.appendChild(S("script")).onreadystatechange=function(){re.removeChild(this),ac(t)}}:function(t){setTimeout(sc(t),0)});var lc,hc,fc,pc,dc,gc,vc,yc,mc={set:Js,clear:Qs},bc=/web0s(?!.*chrome)/i.test(un),wc=E.f,_c=mc.set,Sc=r.MutationObserver||r.WebKitMutationObserver,xc=r.document,kc=r.process,Ec=r.Promise,Tc=wc(r,"queueMicrotask"),Oc=Tc&&Tc.value;Oc||(lc=function(){var t,e;for(Zs&&(t=kc.domain)&&t.exit();hc;){e=hc.fn,hc=hc.next;try{e()}catch(t){throw hc?pc():fc=void 0,t}}fc=void 0,t&&t.enter()},$s||Zs||bc||!Sc||!xc?Ec&&Ec.resolve?(vc=Ec.resolve(void 0),yc=vc.then,pc=function(){yc.call(vc,lc)}):pc=Zs?function(){kc.nextTick(lc)}:function(){_c.call(r,lc)}:(dc=!0,gc=xc.createTextNode(""),new Sc(lc).observe(gc,{characterData:!0}),pc=function(){gc.data=dc=!dc}));var Ac,Pc,Ic,Cc=Oc||function(t){var e={fn:t,next:void 0};fc&&(fc.next=e),hc||(hc=e,pc()),fc=e},jc=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=R(e),this.reject=R(n)},Lc={f:function(t){return new jc(t)}},Rc=function(t,e){if(N(t),v(e)&&e.constructor===t)return e;var n=Lc.f(t);return(0,n.resolve)(e),n.promise},Mc=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Nc=mc.set,Dc=Qt("species"),zc="Promise",Fc=Vt.get,Uc=Vt.set,Bc=Vt.getterFor(zc),Vc=Ds,Hc=r.TypeError,Wc=r.document,qc=r.process,Xc=(ut("fetch"),Lc.f),Yc=Xc,Gc=!!(Wc&&Wc.createEvent&&r.dispatchEvent),$c="function"==typeof PromiseRejectionEvent,Zc="unhandledrejection",Kc=j(zc,(function(){if(!(xt(Vc)!==String(Vc))){if(66===pn)return!0;if(!Zs&&!$c)return!0}if(!Vc.prototype.finally)return!0;if(pn>=51&&/native code/.test(Vc))return!1;var t=Vc.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Dc]=e,!(t.then((function(){}))instanceof e)})),Jc=Kc||!Xs((function(t){Vc.all(t).catch((function(){}))})),Qc=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},tu=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Cc((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,h=u.resolve,f=u.reject,p=u.domain;try{l?(i||(2===t.rejection&&iu(t),t.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?f(Hc("Promise-chain cycle")):(s=Qc(a))?s.call(a,h,f):h(a)):f(r)}catch(t){p&&!c&&p.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&nu(t)}))}},eu=function(t,e,n){var i,o;Gc?((i=Wc.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),r.dispatchEvent(i)):i={promise:e,reason:n},!$c&&(o=r["on"+t])?o(i):t===Zc&&function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},nu=function(t){Nc.call(r,(function(){var e,n=t.facade,r=t.value;if(ru(t)&&(e=Mc((function(){Zs?qc.emit("unhandledRejection",r,n):eu(Zc,n,r)})),t.rejection=Zs||ru(t)?2:1,e.error))throw e.value}))},ru=function(t){return 1!==t.rejection&&!t.parent},iu=function(t){Nc.call(r,(function(){var e=t.facade;Zs?qc.emit("rejectionHandled",e):eu("rejectionhandled",e,t.value)}))},ou=function(t,e,n){return function(r){t(e,r,n)}},au=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,tu(t,!0))},su=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Hc("Promise can't be resolved itself");var r=Qc(e);r?Cc((function(){var n={done:!1};try{r.call(e,ou(su,n,t),ou(au,n,t))}catch(e){au(n,e,t)}})):(t.value=e,t.state=1,tu(t,!1))}catch(e){au({done:!1},e,t)}}};Kc&&(Vc=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Vc,zc),R(t),Ac.call(this);var e=Fc(this);try{t(ou(su,e),ou(au,e))}catch(t){au(e,t)}},(Ac=function(t){Uc(this,{type:zc,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)n&&n.unsafe&&t[r]?t[r]=e[r]:_e(t,r,e[r],n);return t}(Vc.prototype,{then:function(t,e){var n=Bc(this),r=Xc(Gs(this,Vc));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Zs?qc.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&tu(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Pc=function(){var t=new Ac,e=Fc(t);this.promise=t,this.resolve=ou(su,e),this.reject=ou(au,e)},Lc.f=Xc=function(t){return t===Vc||t===Ic?new Pc(t):Yc(t)}),V({global:!0,wrap:!0,forced:Kc},{Promise:Vc}),ye(Vc,zc,!1,!0),function(t){var e=ut(t),n=z.f;o&&e&&!e[zs]&&n(e,zs,{configurable:!0,get:function(){return this}})}(zc),Ic=ut(zc),V({target:zc,stat:!0,forced:Kc},{reject:function(t){var e=Xc(this);return e.reject.call(void 0,t),e.promise}}),V({target:zc,stat:!0,forced:Tt},{resolve:function(t){return Rc(this===Ic?Vc:this,t)}}),V({target:zc,stat:!0,forced:Jc},{all:function(t){var e=this,n=Xc(e),r=n.resolve,i=n.reject,o=Mc((function(){var n=R(e.resolve),o=[],a=0,s=1;Ms(t,(function(t){var c=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[c]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Xc(e),r=n.reject,i=Mc((function(){var i=R(e.resolve);Ms(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),V({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Lc.f(e),r=n.resolve,i=n.reject,o=Mc((function(){var n=R(e.resolve),i=[],o=0,a=1;Ms(t,(function(t){var s=o++,c=!1;i.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){c||(c=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var cu="No one promise resolved";V({target:"Promise",stat:!0},{any:function(t){var e=this,n=Lc.f(e),r=n.resolve,i=n.reject,o=Mc((function(){var n=R(e.resolve),o=[],a=0,s=1,c=!1;Ms(t,(function(t){var u=a++,l=!1;o.push(void 0),s++,n.call(e,t).then((function(t){l||c||(c=!0,r(t))}),(function(t){l||c||(l=!0,o[u]=t,--s||i(new(ut("AggregateError"))(o,cu)))}))})),--s||i(new(ut("AggregateError"))(o,cu))}));return o.error&&i(o.value),n.promise}});var uu=!!Ds&&i((function(){Ds.prototype.finally.call({then:function(){}},(function(){}))}));V({target:"Promise",proto:!0,real:!0,forced:uu},{finally:function(t){var e=Gs(this,ut("Promise")),n="function"==typeof t;return this.then(n?function(n){return Rc(e,t()).then((function(){return n}))}:t,n?function(n){return Rc(e,t()).then((function(){throw n}))}:t)}});var lu=function(t){return function(e,n){var r,i,o=String(d(e)),a=Y(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},hu={codeAt:lu(!1),charAt:lu(!0)}.charAt,fu="String Iterator",pu=Vt.set,du=Vt.getterFor(fu);Pe(String,"String",(function(t){pu(this,{type:fu,string:String(t),index:0})}),(function(){var t,e=du(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=hu(n,r),e.index+=t.length,{value:t,done:!1})}));var gu=L.Promise,vu=gu,yu=[].slice,mu=/MSIE .\./.test(un),bu=function(t){return function(e,n){var r=arguments.length>2,i=r?yu.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};V({global:!0,bind:!0,forced:mu},{setTimeout:bu(r.setTimeout),setInterval:bu(r.setInterval)});var wu=L.setTimeout,_u=gn("splice"),Su=Ye("splice",{ACCESSORS:!0,0:0,1:2}),xu=Math.max,ku=Math.min,Eu=9007199254740991,Tu="Maximum allowed length exceeded";V({target:"Array",proto:!0,forced:!_u||!Su},{splice:function(t,e){var n,r,i,o,a,s,c=Ht(this),u=$(c.length),l=J(t,u),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=u-l):(n=h-2,r=ku(xu(Y(e),0),u-l)),u+n-r>Eu)throw TypeError(Tu);for(i=Fe(c,r),o=0;o<r;o++)(a=l+o)in c&&dt(i,o,c[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-r+n;o--)delete c[o-1]}else if(n>r)for(o=u-r;o>l;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+l]=arguments[o+2];return c.length=u-r+n,i}});var Ou=Je("Array").splice,Au=Array.prototype,Pu=function(t){var e=t.splice;return t===Au||t instanceof Array&&e===Au.splice?Ou:e},Iu="\t\n\v\f\r                　\u2028\u2029\ufeff",Cu="["+Iu+"]",ju=RegExp("^"+Cu+Cu+"*"),Lu=RegExp(Cu+Cu+"*$"),Ru=function(t){return function(e){var n=String(d(e));return 1&t&&(n=n.replace(ju,"")),2&t&&(n=n.replace(Lu,"")),n}},Mu={start:Ru(1),end:Ru(2),trim:Ru(3)},Nu=Mu.trim,Du=r.parseInt,zu=/^[+-]?0[Xx]/,Fu=8!==Du(Iu+"08")||22!==Du(Iu+"0x16")?function(t,e){var n=Nu(String(t));return Du(n,e>>>0||(zu.test(n)?16:10))}:Du;V({global:!0,forced:parseInt!=Fu},{parseInt:Fu});var Uu=L.parseInt,Bu=Math.min,Vu=[].lastIndexOf,Hu=!!Vu&&1/[1].lastIndexOf(1,-0)<0,Wu=He("lastIndexOf"),qu=Ye("indexOf",{ACCESSORS:!0,1:0}),Xu=Hu||!Wu||!qu?function(t){if(Hu)return Vu.apply(this,arguments)||0;var e=g(this),n=$(e.length),r=n-1;for(arguments.length>1&&(r=Bu(r,Y(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Vu;V({target:"Array",proto:!0,forced:Xu!==[].lastIndexOf},{lastIndexOf:Xu});var Yu=Je("Array").lastIndexOf,Gu=Array.prototype,$u=function(t){var e=t.lastIndexOf;return t===Gu||t instanceof Array&&e===Gu.lastIndexOf?Yu:e},Zu=tt.indexOf,Ku=[].indexOf,Ju=!!Ku&&1/[1].indexOf(1,-0)<0,Qu=He("indexOf"),tl=Ye("indexOf",{ACCESSORS:!0,1:0});V({target:"Array",proto:!0,forced:Ju||!Qu||!tl},{indexOf:function(t){return Ju?Ku.apply(this,arguments)||0:Zu(this,t,arguments.length>1?arguments[1]:void 0)}});var el=Je("Array").indexOf,nl=Array.prototype,rl=function(t){var e=t.indexOf;return t===nl||t instanceof Array&&e===nl.indexOf?el:e};function il(){return"object"==typeof window&&"object"==typeof document}function ol(){return"object"==typeof process}function al(t,e){if(t.message=t.message||null,"string"==typeof e)t.message=e;else if("object"==typeof e&&null!=e){for(var n in e){var r=e[n];t[n]=r}null!=e.message&&(t.message=e.message),null==e.code&&null==e.message||(t.code=e.code||e.name),null!=e.stack&&(t.stack=e.stack)}return t.name=(null==e?void 0:e.name)||t.name||t.code||"Error",t.time=new Date,t}function sl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function cl(){var t="desktop";return"iPod"===navigator.platform||"iPhone"===navigator.platform?t="mobile":"iPad"===navigator.platform?t="tablet":("Android"===navigator.platform||/android/gi.test(navigator.userAgent))&&(t=/tablet/gi.test(navigator.userAgent)?"tablet":"mobile"),t}function ul(){var t="fine";return matchMedia("(pointer:coarse)").matches&&(t="coarse"),t}function ll(t,e){return t===e?"quadratic":t>e?"horizontal":"vertical"}function hl(t){t=t.replace("#","");for(var e=Uu((e+"").replace(/[^a-f0-9]/gi,""),16),n=[],r=0,i=0;i<3;){var o=Uu(t.substring(2*i,2),16);n[i]=o,o>0&&(r+=o),++i}return r<=381?"dark":"light"}function fl(t){if(il())return window.btoa(t);return(t instanceof Buffer?t:Buffer.from(t.toString(),"binary")).toString("base64")}function pl(t,e){for(var n=[];t.length;)n.push(Pu(t).call(t,0,e));return n}function dl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2?arguments[2]:void 0,r=void 0,i=void 0;return function(){var o=n||this,a=(new Date).getTime(),s=arguments;r&&a<r+e?(clearTimeout(i),i=wu((function(){r=a,t.apply(o,s)}),e)):(r=a,t.apply(o,s))}}function gl(t,e){var n=new Image;return n.onload=function(){return e(null,n.width,n.height)},n.onerror=function(){return e(new Error)},n.src=t,n}function vl(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length-1,r=function(t,n,r){return new vu((function(i,o){for(var a=function(t,e){return t?o(t):i(e)},s=[],c=0,u=Math.max(r.length,n)+1,l=0<=u;l?c<u:c>u;l?c++:c--)s.push(c===n?a:r[c]);return t.apply(e,s)}))};return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];if("function"==typeof i[n])return t.apply(null,i);if("function"==typeof vu)return r(t,n,i);throw new Error("To be able to use this asynchronous method you should:\nSupply a callback function as argument #".concat(1+n,".\nThis callback function will be called with the method call response.\nAlternatively, when supported, it can return a Promise if no callback function is given."))}}var yl=Object.freeze({__proto__:null,isBrowser:il,isNode:ol,error:al,uuid:sl,getQueryParam:function(t,e){var n=e||window.location.href,r=new RegExp("[?&]"+t+"=([^&#]*)","i").exec(n);if(r)return r[1]},getRandomNumberBetween:function(t,e){return Math.floor(Math.random()*e)+t},getOS:function(){var t=null,e=window.navigator.userAgent;return rl(e).call(e,"Windows")>-1?t="Windows":rl(e).call(e,"Mac")>-1?t="macOS":rl(e).call(e,"X11")>-1?t="unix":rl(e).call(e,"Linux")>-1?t="Linux":rl(e).call(e,"iOS")>-1?t="iOS":rl(e).call(e,"Android")>-1&&(t="Android"),t},getDeviceCategory:cl,getPointer:ul,getOrientation:ll,getScreenDimensions:function(){var t,e=null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,n={width:window.screen.width,height:window.screen.height};return{density:e,logical:n,physical:{width:Math.round(n.width*e),height:Math.round(n.height*e)}}},getUtcOffsetSeconds:function(){var t=new Date,e=new Date(t.getFullYear(),0,1,0,0,0,0),n=e.toGMTString();return(e-new Date(n.substring(0,$u(n).call(n," ")-1)))/1e3},getUtcDstOffsetSeconds:function(){return 60*(new Date).getTimezoneOffset()*-1},getColorBrightness:hl,btoa:fl,chunk:pl,throttle:dl,loadImage:gl,distance:function(t,e,n,r){var i=Math.PI*t/180,o=Math.PI*n/180,a=e-r,s=Math.PI*a/180,c=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(s);return c=1.609344*(c=60*(c=180*(c=Math.acos(c))/Math.PI)*1.1515)*1e3},promiseCallbackInterop:vl}),ml=new ma;ml.set(wa);var bl=Object.freeze({__proto__:null,translations:ka,util:yl,config:ml}),wl=[].join,_l=Sr!=Object,Sl=function(t,e){var n=[][t];return!!n&&mr((function(){n.call(null,e||function(){throw 1},1)}))}("join",",");fo({target:"Array",proto:!0,forced:_l||!Sl},{join:function(t){return wl.call(kr(this),void 0===t?",":t)}});var xl=Qt("isConcatSpreadable"),kl=9007199254740991,El="Maximum allowed index exceeded",Tl=pn>=51||!i((function(){var t=[];return t[xl]=!1,t.concat()[0]!==t})),Ol=gn("concat"),Al=function(t){if(!v(t))return!1;var e=t[xl];return void 0!==e?!!e:De(t)};V({target:"Array",proto:!0,forced:!Tl||!Ol},{concat:function(t){var e,n,r,i,o,a=Ht(this),s=Fe(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(Al(o=-1===e?a:arguments[e])){if(c+(i=$(o.length))>kl)throw TypeError(El);for(n=0;n<i;n++,c++)n in o&&dt(s,c,o[n])}else{if(c>=kl)throw TypeError(El);dt(s,c++,o)}return s.length=c,s}});var Pl=Je("Array").concat,Il=Array.prototype,Cl=function(t){var e=t.concat;return t===Il||t instanceof Array&&e===Il.concat?Pl:e};V({target:"Array",stat:!0},{isArray:De});var jl=L.Array.isArray,Ll=jl,Rl=Ve.map,Ml=gn("map"),Nl=Ye("map");V({target:"Array",proto:!0,forced:!Ml||!Nl},{map:function(t){return Rl(this,t,arguments.length>1?arguments[1]:void 0)}});var Dl=Je("Array").map,zl=Array.prototype,Fl=function(t){var e=t.map;return t===zl||t instanceof Array&&e===zl.map?Dl:e},Ul=ut("JSON","stringify"),Bl=/[\uD800-\uDFFF]/g,Vl=/^[\uD800-\uDBFF]$/,Hl=/^[\uDC00-\uDFFF]$/,Wl=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return Vl.test(t)&&!Hl.test(i)||Hl.test(t)&&!Vl.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},ql=i((function(){return'"\\udf06\\ud834"'!==Ul("\udf06\ud834")||'"\\udead"'!==Ul("\udead")}));Ul&&V({target:"JSON",stat:!0,forced:ql},{stringify:function(t,e,n){var r=Ul.apply(null,arguments);return"string"==typeof r?r.replace(Bl,Wl):r}}),L.JSON||(L.JSON={stringify:JSON.stringify});var Xl=function(t,e,n){return L.JSON.stringify.apply(null,arguments)},Yl=e((function(e,n){var r=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:t);!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function g(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=d(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=u(t),e=l(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[u(t)]},f.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},f.prototype.set=function(t,e){this.map[u(t)]=l(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),h(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),h(t)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var n,r,i=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),m.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];_.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function x(t,n){return new Promise((function(r,o){var a=new b(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new _(i,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",c)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}x.polyfill=!0,t.fetch||(t.fetch=x,t.Headers=f,t.Request=b,t.Response=_),e.Headers=f,e.Request=b,e.Response=_,e.fetch=x}({})}(r),delete r.fetch.polyfill,(n=r.fetch).default=r.fetch,n.fetch=r.fetch,n.Headers=r.Headers,n.Request=r.Request,n.Response=r.Response,e.exports=n})),Gl=e((function(e){!function(t){var n={bytesToHex:function(t){return function(t){return t.map((function(t){return e=t.toString(16),n=2,e.length>n?e:Array(n-e.length+1).join("0")+e;var e,n})).join("")}(t)},hexToBytes:function(t){if(t.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),t.match(/../g).map((function(t){return parseInt(t,16)}))}};e.exports?e.exports=n:t.convertHex=n}(t)})),$l=e((function(e){!function(t){var n={bytesToString:function(t){return t.map((function(t){return String.fromCharCode(t)})).join("")},stringToBytes:function(t){return t.split("").map((function(t){return t.charCodeAt(0)}))}};n.UTF8={bytesToString:function(t){return decodeURIComponent(escape(n.bytesToString(t)))},stringToBytes:function(t){return n.stringToBytes(unescape(encodeURIComponent(t)))}},e.exports?e.exports=n:t.convertString=n}(t)})),Zl=e((function(e){!function(t){var n={};e.exports?(n.bytesToHex=Gl.bytesToHex,n.convertString=$l,e.exports=a):(n.bytesToHex=t.convertHex.bytesToHex,n.convertString=t.convertString,t.sha256=a);var r=[];!function(){function t(t){for(var e=Math.sqrt(t),n=2;n<=e;n++)if(!(t%n))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)t(n)&&(r[i]=e(Math.pow(n,1/3)),i++),n++}();var i=[],o=function(t,e,n){for(var o=t[0],a=t[1],s=t[2],c=t[3],u=t[4],l=t[5],h=t[6],f=t[7],p=0;p<64;p++){if(p<16)i[p]=0|e[n+p];else{var d=i[p-15],g=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,v=i[p-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;i[p]=g+i[p-7]+y+i[p-16]}var m=o&a^o&s^a&s,b=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),w=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&h)+r[p]+i[p];f=h,h=l,l=u,u=c+w|0,c=s,s=a,a=o,o=w+(b+m)|0}t[0]=t[0]+o|0,t[1]=t[1]+a|0,t[2]=t[2]+s|0,t[3]=t[3]+c|0,t[4]=t[4]+u|0,t[5]=t[5]+l|0,t[6]=t[6]+h|0,t[7]=t[7]+f|0};function a(t,e){t.constructor===String&&(t=n.convertString.UTF8.stringToBytes(t));var r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e}(t),a=8*t.length;i[a>>5]|=128<<24-a%32,i[15+(a+64>>9<<4)]=a;for(var s=0;s<i.length;s+=16)o(r,i,s);var c=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e}(r);return e&&e.asBytes?c:e&&e.asString?n.convertString.bytesToString(c):n.bytesToHex(c)}a.x2=function(t,e){return a(a(t,{asBytes:!0}),e)}}(t)})),Kl=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Jl=Qr("species"),Ql=function(t,e){var n,r=Lr(t).constructor;return void 0===r||null==(n=Lr(r)[Jl])?e:Kl(n)},th=[].push,eh=Math.min,nh=4294967295,rh=!mr((function(){return!RegExp(nh,"y")}));gs("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(xr(this)),i=void 0===n?nh:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Ca(t))return e.call(r,t,i);for(var o,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,h=new RegExp(t.source,u+"g");(o=rs.call(h,r))&&!((a=h.lastIndex)>l&&(c.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&th.apply(c,o.slice(1)),s=o[0].length,l=a,c.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return l===r.length?!s&&h.test("")||c.push(""):c.push(r.slice(l)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=xr(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=Lr(t),s=String(this),c=Ql(a,RegExp),u=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(rh?"y":"g"),h=new c(rh?a:"^(?:"+a.source+")",l),f=void 0===i?nh:i>>>0;if(0===f)return[];if(0===s.length)return null===Es(h,s)?[s]:[];for(var p=0,d=0,g=[];d<s.length;){h.lastIndex=rh?d:0;var v,y=Es(h,rh?s:s.slice(d));if(null===y||(v=eh(ii(h.lastIndex+(rh?0:d)),s.length))===p)d=bs(s,d,u);else{if(g.push(s.slice(p,d)),g.length===f)return g;for(var m=1;m<=y.length-1;m++)if(g.push(y[m]),g.length===f)return g;d=p=v}}return g.push(s.slice(p)),g}]}),!rh);var ih=Mu.trim;V({target:"String",proto:!0,forced:function(t){return i((function(){return!!Iu[t]()||"​᠎"!="​᠎"[t]()||Iu[t].name!==t}))}("trim")},{trim:function(){return ih(this)}});var oh=Je("String").trim,ah=String.prototype,sh=function(t){var e=t.trim;return"string"==typeof t||t===ah||t instanceof String&&e===ah.trim?oh:e},ch="sgn-";function uh(t,e){if(!ol())try{var n,r,i,o=new Date,a=Xl(e);o.setTime(o.getTime()+31536e6),document.cookie=Cl(n=Cl(r=Cl(i="".concat(ch)).call(i,t,"=")).call(r,a,";expires=")).call(n,o.toUTCString(),";path=/")}catch(t){}}var lh=Object.freeze({__proto__:null,get:function(t){var e;if(!ol()){try{var n,r=Cl(n="".concat(ch)).call(n,t,"="),i=document.cookie.split(";");nn(i).call(i,(function(t){var n=sh(t).call(t);0===rl(n).call(n,r)&&(e=n.substring(r.length,n.length))})),e=JSON.parse(e)}catch(t){e={}}return e}},set:uh}),hh=[],fh=!1;function ph(t){if(!t)throw new Error("No token provided for saving");ml.set({coreSessionToken:t}),gh()}function dh(t){ml.set({coreSessionClientId:t}),gh()}function gh(){uh("session",{token:ml.get("coreSessionToken"),client_id:ml.get("coreSessionClientId")})}function vh(t){var e,n=ml.get("appKey");Yl(ml.get("coreUrl")+Cl(e="/v2/sessions?api_key=".concat(n,"&token_ttl=")).call(e,5184e3),{method:"post"}).then((function(e){return e.json().then((function(n){201===e.status?(ph(n.token),dh(n.client_id),t(null,n)):t(new Error("Could not create session"))}))})).catch((function(e){t(e)}))}function yh(t){var e={},n=ml.get("coreSessionToken"),r=ml.get("appSecret");e["X-Token"]=n,r&&(e["X-Signature"]=bh(r,n)),Yl(ml.get("coreUrl")+"/v2/sessions",{method:"put",headers:e}).then((function(e){return e.json().then((function(n){200===e.status?(ph(n.token),dh(n.client_id),t(null,n)):t(new Error("Could not renew session"))}))})).catch((function(e){t(e)}))}function mh(t){var e=hh.length,n=function(t){hh=_n(hh).call(hh,(function(e){return e(t),!1}))};hh.push(t),0===e&&(null==ml.get("coreSessionToken")?vh(n):!1===fh?(fh=!0,yh((function(t){null!=t?vh(n):n()}))):n())}function bh(t,e){return Zl([t,e].join(""))}var wh=Object.freeze({__proto__:null,saveToken:ph,saveClientId:dh,saveCookie:gh,create:vh,update:function(t){var e={},n=ml.get("coreSessionToken"),r=ml.get("appSecret");e["X-Token"]=n,null!=r&&(e["X-Signature"]=bh(r,n)),Yl(ml.get("coreUrl")+"/v2/sessions",{method:"put",headers:e}).then((function(e){return e.json().then((function(n){200===e.status?(ph(n.token),dh(n.client_id),t(null,n)):t(new Error("Could not update session"))}))})).catch((function(e){t(e)}))},renew:yh,ensure:mh,sign:bh});var _h=vl((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;mh((function(i){var o,a,s;if(null!=i)return n(i);var c,u=ml.get("coreUrl")+(null!==(o=e.url)&&void 0!==o?o:""),l=null!==(a=e.headers)&&void 0!==a?a:{},h="boolean"!=typeof e.json||e.json,f=ml.get("coreSessionToken"),p=ml.get("appKey"),d=ml.get("appVersion"),g=ml.get("appSecret"),v=ml.get("locale"),y=null!==(s=e.qs)&&void 0!==s?s:{},m=e.geolocation,b=e.body;(l["X-Api-Key"]=p,l["X-Token"]=f,null!=g&&(l["X-Signature"]=bh(g,f)),h&&(l["Content-Type"]="application/json",l.Accept="application/json",b&&(b=Xl(b))),null!=v&&(y.r_locale=v),null!=d&&(y.api_av=d),null!=m&&(null!=m.latitude&&null==y.r_lat&&(y.r_lat=m.latitude),null!=m.longitude&&null==y.r_lng&&(y.r_lng=m.longitude),null!=m.radius&&null==y.r_radius&&(y.r_radius=m.radius),null!=m.sensor&&null==y.r_sensor&&(y.r_sensor=m.sensor)),sr(y).length)&&(u+="?"+Fl(c=sr(y)).call(c,(function(t){var e,n;return Ll(t)?Fl(n=y[t]).call(n,(function(e){var n;return Cl(n="".concat(encodeURIComponent(t),"[]=")).call(n,encodeURIComponent(e))})).join("&"):Cl(e="".concat(encodeURIComponent(t),"=")).call(e,encodeURIComponent(y[t]))})).join("&"));return Yl(u,{method:e.method,body:b,headers:l}).then((function(i){return i.json().then((function(o){f=ml.get("coreSessionToken");var a,s=i.headers.get("x-token");(s&&f!==s&&ph(s),i.status>=200&&i.status<300||304===i.status)?n(null,o):!0!==r&&pa(a=[1101,1107,1108]).call(a,null==o?void 0:o.code)?(ml.set({coreSessionToken:void 0}),t(e,n,!0)):n(al(new Error("Core API error"),{code:"CoreAPIError",statusCode:i.status}),o)}))})).catch(n)}))}),1),Sh=Object.freeze({__proto__:null,session:wh,request:_h});gs("match",1,(function(t,e,n){return[function(e){var n=xr(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=Lr(t),o=String(this);if(!i.global)return Es(i,o);var a=i.unicode;i.lastIndex=0;for(var s,c=[],u=0;null!==(s=Es(i,o));){var l=String(s[0]);c[u]=l,""===l&&(i.lastIndex=bs(o,ii(i.lastIndex),a)),u++}return 0===u?null:c}]}));var xh=e((function(t){var e,n=0,r=0,i={},o={};function a(t,r,i){return"_root"==r?i:t!==i?function(t){return e||(e=t.matches?t.matches:t.webkitMatchesSelector?t.webkitMatchesSelector:t.mozMatchesSelector?t.mozMatchesSelector:t.msMatchesSelector?t.msMatchesSelector:t.oMatchesSelector?t.oMatchesSelector:l.matchesSelector)}(t).call(t,r)?t:t.parentNode?(n++,a(t.parentNode,r,i)):void 0:void 0}function s(t,e,n,r){i[t.id]||(i[t.id]={}),i[t.id][e]||(i[t.id][e]={}),i[t.id][e][n]||(i[t.id][e][n]=[]),i[t.id][e][n].push(r)}function c(t,e,n,r){if(i[t.id])if(e)if(r||n)if(r){if(i[t.id][e][n])for(var o=0;o<i[t.id][e][n].length;o++)if(i[t.id][e][n][o]===r){var a;Pu(a=i[t.id][e][n]).call(a,o,1);break}}else delete i[t.id][e][n];else i[t.id][e]={};else for(var s in i[t.id])i[t.id].hasOwnProperty(s)&&(i[t.id][s]={})}function u(t,e,r,u){if(this.element){t instanceof Array||(t=[t]),r||"function"!=typeof e||(r=e,e="_root");var h,f=this.id;for(h=0;h<t.length;h++)u?c(this,t[h],e,r):(i[f]&&i[f][t[h]]||l.addEvent(this,t[h],p(t[h])),s(this,t[h],e,r));return this}function p(t){return function(e){!function(t,e,r){if(i[t][r]){var s,c,u=e.target||e.srcElement,h={},f=0,p=0;for(s in n=0,i[t][r])i[t][r].hasOwnProperty(s)&&(c=a(u,s,o[t].element))&&l.matchesEvent(r,o[t].element,c,"_root"==s,e)&&(n++,i[t][r][s].match=c,h[n]=i[t][r][s]);for(e.stopPropagation=function(){e.cancelBubble=!0},f=0;f<=n;f++)if(h[f])for(p=0;p<h[f].length;p++){if(!1===h[f][p].call(h[f].match,e))return void l.cancel(e);if(e.cancelBubble)return}}}(f,e,t)}}}function l(t,e){if(!(this instanceof l)){for(var n in o)if(o[n].element===t)return o[n];return r++,o[r]=new l(t,r),o[r]}this.element=t,this.id=e}l.prototype.on=function(t,e,n){return u.call(this,t,e,n)},l.prototype.off=function(t,e,n){return u.call(this,t,e,n,!0)},l.matchesSelector=function(){},l.cancel=function(t){t.preventDefault(),t.stopPropagation()},l.addEvent=function(t,e,n){var r="blur"==e||"focus"==e;t.element.addEventListener(e,n,r)},l.matchesEvent=function(){return!0},t.exports&&(t.exports=l),"undefined"!=typeof window&&window.exports&&(window.Gator=l)})),kh=function(){function t(e){var n,r=e.minWidth,i=void 0===r?300:r,o=e.maxWidth,a=void 0===o?"100vw":o,s=e.anchorEl,c=e.contentEl;da(this,t),this.resize=dr(n=this.resize).call(n,this),this.minWidth=i,this.maxWidth=a,this.anchorEl=s,this.contentEl=c,this.elInner=document.createElement("div"),this.elInner.className="sgn-offer-details-inner",this.el=document.createElement("div"),this.el.className="sgn-offer-details",this.el.setAttribute("tabindex",-1),this.el.appendChild(this.elInner),this.el.appendChild(this.contentEl),this.position()}return va(t,[{key:"appendTo",value:function(t){return t.appendChild(this.el),this.el.offsetWidth,this.show(),this}},{key:"show",value:function(){return this.el.className+=" in",window.addEventListener("resize",this.resize,!1),this}},{key:"destroy",value:function(){window.removeEventListener("resize",this.resize,!1),this.el.parentNode.removeChild(this.el)}},{key:"position",value:function(){var t=this.anchorEl.getBoundingClientRect(),e=window.pageYOffset+t.top+this.anchorEl.offsetHeight,n=(window.pageXOffset,t.left),r=this.anchorEl.offsetWidth;this.el.style.top=e+"px";var i=t.left>=window.outerWidth/2;n=window.pageXOffset+t.left;var o=window.pageXOffset+(window.outerWidth-t.right);i?(this.el.style.left="auto",this.el.style.right=o+"px",this.elInner.style.left="auto",this.elInner.style.right=0):(this.el.style.left=n+"px",this.el.style.right="auto",this.elInner.style.left=0,this.elInner.style.right="auto"),this.el.style.minWidth="number"==typeof this.minWidth?Math.max(r,this.minWidth)+"px":this.minWidth,this.el.style.maxWidth=this.maxWidth,this.elInner.style.width=r-8+"px"}},{key:"resize",value:function(){this.position()}}]),t}(),Eh=function(){function t(){var e,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};da(this,t),this.keyUp=dr(e=this.keyUp).call(e,this),this.resize=dr(n=this.resize).call(n,this),this.scroll=dr(r=this.scroll).call(r,this),this.options=i,this.el=document.createElement("div"),this.backgroundEl=document.createElement("div")}return va(t,[{key:"render",value:function(){var t=this.options,e=t.header,n=t.singleChoiceItems,r=t.template,i=void 0===r?'<div class="sgn-popover__background" data-close></div>\n<div class="sgn-popover__menu">\n    {{#header}}\n        <div class="sgn-popover__header">{{header}}</div>\n    {{/header}}\n    <div class="sgn-popover__content">\n        <ul>\n            {{#singleChoiceItems}}\n                <li data-index="{{index}}">\n                    <p class="sgn-popover-item__title">{{item.title}}</p>\n                    {{#item.subtitle}}\n                        <p class="sgn-popover-item__subtitle">{{item.subtitle}}</p>\n                    {{/item.subtitle}}\n                </li>\n            {{/singleChoiceItems}}\n        </ul>\n    </div>\n</div>':r,o={header:e,singleChoiceItems:null==n?void 0:Fl(n).call(n,(function(t,e){return{item:t,index:e}}))};return this.el.className="sgn-popover",this.el.setAttribute("tabindex",-1),this.el.innerHTML=_a.render(i,o),this.position(),this.addEventListeners(),this}},{key:"destroy",value:function(){xh(this.el).off(),window.removeEventListener("resize",this.resize,!1),window.removeEventListener("scroll",this.scroll,!1),this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.trigger("destroyed"))}},{key:"position",value:function(){var t=this.options.y,e=this.options.x,n=this.el.querySelector(".sgn-popover__menu"),r=n.offsetWidth,i=n.offsetHeight,o=this.el.parentNode.offsetWidth,a=this.el.parentNode.offsetHeight,s=this.el.parentNode.getBoundingClientRect();t-=s.top,e-=s.left,t-=window.pageYOffset,e-=window.pageXOffset,n.style.top=t+i>a?a-i+"px":t+"px",n.style.left=e+r>o?o-r+"px":e+"px"}},{key:"addEventListeners",value:function(){var t,e=this,n=dr(t=this.trigger).call(t,this);this.el.addEventListener("keyup",this.keyUp),xh(this.el).on("click","[data-index]",(function(t){t.preventDefault(),t.stopPropagation(),n("selected",{index:+this.getAttribute("data-index")})})),xh(this.el).on("click","[data-close]",(function(t){t.preventDefault(),t.stopPropagation(),e.destroy()})),xh(this.el).on("click",".sgn-popover__menu",(function(t){t.stopPropagation()})),window.addEventListener("resize",this.resize,!1),window.addEventListener("scroll",this.scroll,!1)}},{key:"keyUp",value:function(t){27===t.keyCode&&this.destroy()}},{key:"resize",value:function(){this.destroy()}},{key:"scroll",value:function(){this.destroy()}}]),t}();function Th(t,e){var n=t.items,r=null;return 1===n.length?e(n[0]):n.length>1&&(r=new Eh({header:t.header,x:t.x,y:t.y,singleChoiceItems:n}),dr(r).call(r,"selected",(function(t){e(n[t.index]),r.destroy()})),dr(r).call(r,"destroyed",(function(){t.el.focus()})),t.el.appendChild(r.el),r.render().el.focus()),{destroy:function(){var t;null===(t=r)||void 0===t||t.destroy()}}}ya.mixin(Eh);var Oh=Object.freeze({__proto__:null,on:function(t,e,n,r){return xh(t).on(e,n,r)},off:function(t,e,n,r){return xh(t).off(e,n,r)},OfferDetails:kh,Popover:Eh,singleChoicePopover:Th}),Ah=L.setInterval,Ph=gn("slice"),Ih=Ye("slice",{ACCESSORS:!0,0:0,1:2}),Ch=Qt("species"),jh=[].slice,Lh=Math.max;V({target:"Array",proto:!0,forced:!Ph||!Ih},{slice:function(t,e){var n,r,i,o=g(this),a=$(o.length),s=J(t,a),c=J(void 0===e?a:e,a);if(De(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!De(n.prototype)?v(n)&&null===(n=n[Ch])&&(n=void 0):n=void 0,n===Array||void 0===n))return jh.call(o,s,c);for(r=new(void 0===n?Array:n)(Lh(c-s,0)),i=0;s<c;s++,i++)s in o&&dt(r,i,o[s]);return r.length=i,r}});var Rh=Je("Array").slice,Mh=Array.prototype,Nh=function(t){var e=t.slice;return t===Mh||t instanceof Array&&e===Mh.slice?Rh:e},Dh=Nh,zh=Object.assign,Fh=Object.defineProperty,Uh=!zh||i((function(){if(o&&1!==zh({b:1},zh(Fh({},"a",{enumerable:!0,get:function(){Fh(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=zh({},t)[n]||ot(zh({},e)).join("")!=r}))?function(t,e){for(var n=Ht(t),r=arguments.length,i=1,a=ft.f,s=c.f;r>i;)for(var u,l=p(arguments[i++]),h=a?ot(l).concat(a(l)):ot(l),f=h.length,d=0;f>d;)u=h[d++],o&&!s.call(l,u)||(n[u]=l[u]);return n}:zh;V({target:"Object",stat:!0,forced:Object.assign!==Uh},{assign:Uh});var Bh=L.Object.assign,Vh=e((function(t){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()})),Hh={utf8:{stringToBytes:function(t){return Hh.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(Hh.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},Wh=Hh,qh=function(t){return null!=t&&(Xh(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Xh(t.slice(0,0))}(t)||!!t._isBuffer)};function Xh(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Yh=e((function(t){!function(){var e=Vh,n=Wh.utf8,r=qh,i=Wh.bin,o=function(t,a){t.constructor==String?t=a&&"binary"===a.encoding?i.stringToBytes(t):n.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var s=e.bytesToWords(t),c=8*t.length,u=1732584193,l=-271733879,h=-1732584194,f=271733878,p=0;p<s.length;p++)s[p]=16711935&(s[p]<<8|s[p]>>>24)|4278255360&(s[p]<<24|s[p]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var d=o._ff,g=o._gg,v=o._hh,y=o._ii;for(p=0;p<s.length;p+=16){var m=u,b=l,w=h,_=f;u=d(u,l,h,f,s[p+0],7,-680876936),f=d(f,u,l,h,s[p+1],12,-389564586),h=d(h,f,u,l,s[p+2],17,606105819),l=d(l,h,f,u,s[p+3],22,-1044525330),u=d(u,l,h,f,s[p+4],7,-176418897),f=d(f,u,l,h,s[p+5],12,1200080426),h=d(h,f,u,l,s[p+6],17,-1473231341),l=d(l,h,f,u,s[p+7],22,-45705983),u=d(u,l,h,f,s[p+8],7,1770035416),f=d(f,u,l,h,s[p+9],12,-1958414417),h=d(h,f,u,l,s[p+10],17,-42063),l=d(l,h,f,u,s[p+11],22,-1990404162),u=d(u,l,h,f,s[p+12],7,1804603682),f=d(f,u,l,h,s[p+13],12,-40341101),h=d(h,f,u,l,s[p+14],17,-1502002290),u=g(u,l=d(l,h,f,u,s[p+15],22,1236535329),h,f,s[p+1],5,-165796510),f=g(f,u,l,h,s[p+6],9,-1069501632),h=g(h,f,u,l,s[p+11],14,643717713),l=g(l,h,f,u,s[p+0],20,-373897302),u=g(u,l,h,f,s[p+5],5,-701558691),f=g(f,u,l,h,s[p+10],9,38016083),h=g(h,f,u,l,s[p+15],14,-660478335),l=g(l,h,f,u,s[p+4],20,-405537848),u=g(u,l,h,f,s[p+9],5,568446438),f=g(f,u,l,h,s[p+14],9,-1019803690),h=g(h,f,u,l,s[p+3],14,-187363961),l=g(l,h,f,u,s[p+8],20,1163531501),u=g(u,l,h,f,s[p+13],5,-1444681467),f=g(f,u,l,h,s[p+2],9,-51403784),h=g(h,f,u,l,s[p+7],14,1735328473),u=v(u,l=g(l,h,f,u,s[p+12],20,-1926607734),h,f,s[p+5],4,-378558),f=v(f,u,l,h,s[p+8],11,-2022574463),h=v(h,f,u,l,s[p+11],16,1839030562),l=v(l,h,f,u,s[p+14],23,-35309556),u=v(u,l,h,f,s[p+1],4,-1530992060),f=v(f,u,l,h,s[p+4],11,1272893353),h=v(h,f,u,l,s[p+7],16,-155497632),l=v(l,h,f,u,s[p+10],23,-1094730640),u=v(u,l,h,f,s[p+13],4,681279174),f=v(f,u,l,h,s[p+0],11,-358537222),h=v(h,f,u,l,s[p+3],16,-722521979),l=v(l,h,f,u,s[p+6],23,76029189),u=v(u,l,h,f,s[p+9],4,-640364487),f=v(f,u,l,h,s[p+12],11,-421815835),h=v(h,f,u,l,s[p+15],16,530742520),u=y(u,l=v(l,h,f,u,s[p+2],23,-995338651),h,f,s[p+0],6,-198630844),f=y(f,u,l,h,s[p+7],10,1126891415),h=y(h,f,u,l,s[p+14],15,-1416354905),l=y(l,h,f,u,s[p+5],21,-57434055),u=y(u,l,h,f,s[p+12],6,1700485571),f=y(f,u,l,h,s[p+3],10,-1894986606),h=y(h,f,u,l,s[p+10],15,-1051523),l=y(l,h,f,u,s[p+1],21,-2054922799),u=y(u,l,h,f,s[p+8],6,1873313359),f=y(f,u,l,h,s[p+15],10,-30611744),h=y(h,f,u,l,s[p+6],15,-1560198380),l=y(l,h,f,u,s[p+13],21,1309151649),u=y(u,l,h,f,s[p+4],6,-145523070),f=y(f,u,l,h,s[p+11],10,-1120210379),h=y(h,f,u,l,s[p+2],15,718787259),l=y(l,h,f,u,s[p+9],21,-343485551),u=u+m>>>0,l=l+b>>>0,h=h+w>>>0,f=f+_>>>0}return e.endian([u,l,h,f])};o._ff=function(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._gg=function(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._hh=function(t,e,n,r,i,o,a){var s=t+(e^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._ii=function(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(o(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()})),Gh="sgn-",$h=function(){try{var t=window.localStorage;return t["".concat(Gh,"test-storage")]="foobar",delete t["".concat(Gh,"test-storage")],t}catch(t){return{}}}();function Zh(t){try{var e;return JSON.parse($h[Cl(e="".concat(Gh)).call(e,t)])}catch(t){}}function Kh(t,e){try{var n;$h[Cl(n="".concat(Gh)).call(n,t)]=Xl(e)}catch(t){}}var Jh=Object.freeze({__proto__:null,get:Zh,set:Kh}),Qh=function(){var t,e=Zh("client-id");return null!==(t=e)&&void 0!==t&&t.data&&(e=e.data),null==e&&Kh("client-id",e=sl()),{id:e}};function tf(){var t=Zh("event-tracker-pool");return!1===Ll(t)&&(t=[]),t=_n(t).call(t,(function(t){return"string"==typeof t._i}))}var ef=tf(),nf=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in da(this,t),this.defaultOptions){var r=this.defaultOptions[n];this[n]=e[n]||r}this.client=(null==e?void 0:e.client)||Qh(),this.eventsTrackUrl=(null==e?void 0:e.eventsTrackUrl)||ba,this.location={geohash:null,time:null,country:null},this.dispatching=!1,this.hasMadeInitialDispatch=!1,this.eventsTrackUrl&&(af(this.eventsTrackUrl),this.hasMadeInitialDispatch=!0)}return va(t,[{key:"setEventsTrackUrl",value:function(t){this.eventsTrackUrl=t,this.hasMadeInitialDispatch||(af(this.eventsTrackUrl),this.hasMadeInitialDispatch=!0)}},{key:"trackEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if("number"!=typeof t)throw al(new Error("Event type is required"));if(null!=this.trackId){var r=Bh({},e,{_e:t,_v:n,_i:sl(),_t:Math.round((new Date).getTime()/1e3),_a:this.trackId});for(this.location.geohash&&(r["l.h"]=this.location.geohash),this.location.time&&(r["l.ht"]=this.location.time),this.location.country&&(r["l.c"]=this.location.country),ef.push(r);ef.length>this.poolLimit;)ef.shift();return af(this.eventsTrackUrl),this}}},{key:"setLocation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in t){var n=t[e];Object.prototype.hasOwnProperty.call(this.location,e)&&(this.location[e]=n)}return this}},{key:"trackPagedPublicationOpened",value:function(t,e){return this.trackEvent(1,t,e)}},{key:"trackPagedPublicationPageDisappeared",value:function(t,e){return this.trackEvent(2,t,e)}},{key:"trackOfferOpened",value:function(t,e){return this.trackEvent(3,t,e)}},{key:"trackSearched",value:function(t,e){return this.trackEvent(5,t,e)}},{key:"trackIncitoPublicationOpened",value:function(t,e){return this.trackEvent(11,t,e)}},{key:"createViewToken",value:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Cl(t=[this.client.id]).call(t,r).join(""),a=fl(String.fromCharCode.apply(null,Dh(e=Yh(o,{asBytes:!0})).call(e,0,8)));return a}}]),t}();nf.prototype.defaultOptions={trackId:null,poolLimit:1e3};var rf=!1;var of=null;var af=dl((function(t){if(!0!==rf&&0!==ef.length){var e=Dh(ef).call(ef,0,100),n=0;rf=!0,function(){return Yl(arguments.length>1?arguments[1]:void 0,{method:"post",timeout:2e4,headers:{"Content-Type":"application/json; charset=utf-8"},body:Xl({events:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]})}).then((function(t){return t.json()}))}(e,t).then((function(e){var r;rf=!1,of&&(clearInterval(of),of=null),nn(r=e.events).call(r,(function(t){"validation_error"===t.status||"ack"===t.status?ef=_n(ef).call(ef,(function(e){return e._i!==t.id})):n++})),ef.length>=100&&0===n&&af(t)})).catch((function(e){rf=!1,of||(console.warn("We're gonna keep trying, but there was an error while dispatching events:",e),of=Ah((function(){return af(t)}),2e4))}))}}),4e3);Kh("event-tracker-pool",[]);try{window.addEventListener("beforeunload",(function(){Kh("event-tracker-pool",ef=Cl(ef).call(ef,tf()))}),!1)}catch(al){}var sf=Object.freeze({__proto__:null,Tracker:nf}),cf=e((function(t,e){var n;n=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}var c=function(t){return null==t?0:"number"==typeof t?"".concat(t,"px"):"string"==typeof t?t.replace("dp","px"):0},u=function(t){return"string"==typeof t&&t.length>0},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},h=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this.attrs=n,this.el=this.createElement(),this.setAttributes()}return n(e,[{key:"render",value:function(){return this}},{key:"createElement",value:function(){var t,e=document.createElement(this.tagName),n=null!==(t=this.className)&&void 0!==t?t:"";return e.className="incito__view "+n,e}},{key:"setAttributes",value:function(){var t=this;if(u(this.attrs.id)&&this.el.setAttribute("data-id",this.attrs.id),u(this.attrs.role)&&this.el.setAttribute("data-role",this.attrs.role),u(this.attrs.accessibility_label)&&this.el.setAttribute("aria-label",this.attrs.accessibility_label),!0===this.attrs.accessibility_hidden&&this.el.setAttribute("aria-hidden",!0),Array.isArray(this.attrs.feature_labels)){var e=this.attrs.feature_labels.filter((function(t){return/^[a-z_-]{1,14}$/.test(t)}));e.length&&this.el.setAttribute("data-feature-labels",e.join(","))}u(this.attrs.title)&&this.el.setAttribute("title",this.attrs.title),u(this.attrs.gravity)&&this.el.setAttribute("data-gravity",this.attrs.gravity),u(this.attrs.link)&&(this.el.setAttribute("data-link",""),this.el.addEventListener("click",(function(){window.open(t.attrs.link,"_blank")}),!1)),"match_parent"===this.attrs.layout_width?this.el.style.width="100%":"wrap_content"===this.attrs.layout_width?this.el.style.display="inline-block":null!=this.attrs.layout_width&&(this.el.style.width=c(this.attrs.layout_width)),"match_parent"===this.attrs.layout_height?this.el.style.height="100%":"wrap_content"===this.attrs.layout_height?this.el.style.height="auto":null!=this.attrs.layout_height&&(this.el.style.height=c(this.attrs.layout_height)),null!=this.attrs.min_width&&(this.el.style.minWidth=c(this.attrs.min_width)),null!=this.attrs.max_width&&(this.el.style.maxWidth=c(this.attrs.max_width)),null!=this.attrs.min_height&&(this.el.style.minHeight=c(this.attrs.min_height)),null!=this.attrs.max_height&&(this.el.style.maxHeight=c(this.attrs.max_height)),null!=this.attrs.layout_top&&(this.el.style.top=c(this.attrs.layout_top)),null!=this.attrs.layout_left&&(this.el.style.left=c(this.attrs.layout_left)),null!=this.attrs.layout_right&&(this.el.style.right=c(this.attrs.layout_right)),null!=this.attrs.layout_bottom&&(this.el.style.bottom=c(this.attrs.layout_bottom)),u(this.attrs.background_color)&&(this.el.style.backgroundColor=this.attrs.background_color),u(this.attrs.background_image)&&(this.el.setAttribute("data-src",this.attrs.background_image),this.lazyload=!0),-1!==["repeat_x","repeat_y","repeat"].indexOf(this.attrs.background_tile_mode)&&(this.el.style.backgroundRepeat=this.attrs.background_tile_mode.replace("_","-")),u(this.attrs.background_image_position)&&(this.el.style.backgroundPosition=this.attrs.background_image_position.replace("_"," ")),"center_crop"===this.attrs.background_image_scale_type?this.el.style.backgroundSize="cover":"center_inside"===this.attrs.background_image_scale_type&&(this.el.style.backgroundSize="contain"),null!=this.attrs.layout_margin&&(this.el.style.margin=c(this.attrs.layout_margin)),null!=this.attrs.layout_margin_top&&(this.el.style.marginTop=c(this.attrs.layout_margin_top)),null!=this.attrs.layout_margin_left&&(this.el.style.marginLeft=c(this.attrs.layout_margin_left)),null!=this.attrs.layout_margin_right&&(this.el.style.marginRight=c(this.attrs.layout_margin_right)),null!=this.attrs.layout_margin_bottom&&(this.el.style.marginBottom=c(this.attrs.layout_margin_bottom)),null!=this.attrs.padding&&(this.el.style.padding=c(this.attrs.padding)),null!=this.attrs.padding_top&&(this.el.style.paddingTop=c(this.attrs.padding_top)),null!=this.attrs.padding_left&&(this.el.style.paddingLeft=c(this.attrs.padding_left)),null!=this.attrs.padding_right&&(this.el.style.paddingRight=c(this.attrs.padding_right)),null!=this.attrs.padding_bottom&&(this.el.style.paddingBottom=c(this.attrs.padding_bottom)),null!=this.attrs.corner_radius&&(this.el.style.borderRadius=c(this.attrs.corner_radius)),null!=this.attrs.corner_top_left_radius&&(this.el.style.borderTopLeftRadius=c(this.attrs.corner_top_left_radius)),null!=this.attrs.corner_top_right_radius&&(this.el.style.borderTopRightRadius=c(this.attrs.corner_top_right_radius)),null!=this.attrs.corner_bottom_left_radius&&(this.el.style.borderBottomLeftRadius=c(this.attrs.corner_bottom_left_radius)),null!=this.attrs.corner_bottom_right_radius&&(this.el.style.borderBottomRightRadius=c(this.attrs.corner_bottom_right_radius)),!1===this.attrs.clip_children&&(this.el.style.overflow="visible");var n=this.getShadow();null!=n&&(this.el.style.boxShadow="".concat(n.dx,"px ").concat(n.dy,"px ").concat(n.radius,"px ").concat(n.color)),null!=this.attrs.stroke_width&&(this.el.style.borderWidth=c(this.attrs.stroke_width)),null!=this.attrs.stroke_color&&(this.el.style.borderColor=this.attrs.stroke_color),-1!==["solid","dotted","dashed"].indexOf(this.attrs.stroke_style)&&(this.el.style.borderStyle=this.attrs.stroke_style),null!=this.attrs.stroke_top_width&&(this.el.style.borderTopWidth=c(this.attrs.stroke_top_width)),null!=this.attrs.stroke_top_color&&(this.el.style.borderTopColor=this.attrs.stroke_top_color),null!=this.attrs.stroke_left_width&&(this.el.style.borderLeftWidth=c(this.attrs.stroke_left_width)),null!=this.attrs.stroke_left_color&&(this.el.style.borderLeftColor=this.attrs.stroke_left_color),null!=this.attrs.stroke_right_width&&(this.el.style.borderRightWidth=c(this.attrs.stroke_right_width)),null!=this.attrs.stroke_right_color&&(this.el.style.borderRightColor=this.attrs.stroke_right_color),null!=this.attrs.stroke_bottom_width&&(this.el.style.borderBottomWidth=c(this.attrs.stroke_bottom_width)),null!=this.attrs.stroke_bottom_color&&(this.el.style.borderBottomColor=this.attrs.stroke_bottom_color),"number"==typeof this.attrs.layout_flex_shrink&&(this.el.style.flexShrink=this.attrs.layout_flex_shrink,this.el.style.msFlexShrink=this.attrs.layout_flex_shrink),"number"==typeof this.attrs.layout_flex_grow&&(this.el.style.flexGrow=this.attrs.layout_flex_grow,this.el.style.msFlexGrow=this.attrs.layout_flex_grow),null!=this.attrs.layout_flex_basis&&(this.el.style.flexBasis=c(this.attrs.layout_flex_basis),this.el.style.msFlexBasis=c(this.attrs.layout_flex_basis));var r=this.getTransforms();r.length>0&&(this.el.style.transform=r.join(" ")),Array.isArray(this.attrs.transform_origin)&&2===this.attrs.transform_origin.length&&(this.el.style.transformOrigin=[c(this.attrs.transform_origin[0]),c(this.attrs.transform_origin[1])].join(" "))}},{key:"getTransforms",value:function(){var t=[],e=c(this.attrs.transform_translate_x),n=c(this.attrs.transform_translate_y);return 0!==e&&t.push("translateX(".concat(e,")")),0!==n&&t.push("translateY(".concat(n,")")),"number"==typeof this.attrs.transform_rotate&&0!==this.attrs.transform_rotate&&t.push("rotate(".concat(this.attrs.transform_rotate,"deg)")),"number"==typeof this.attrs.transform_scale&&1!==this.attrs.transform_scale&&t.push("scale(".concat(this.attrs.transform_scale,")")),t}},{key:"getShadow",value:function(){if(u(this.attrs.shadow_color))return{dx:"number"==typeof this.attrs.shadow_dx?this.attrs.shadow_dx:0,dy:"number"==typeof this.attrs.shadow_dy?this.attrs.shadow_dy:0,radius:"number"==typeof this.attrs.shadow_radius?this.attrs.shadow_radius:0,color:this.attrs.shadow_color}}}]),e}();h.prototype.tagName="div",h.prototype.className=null;var f=function(e){r(o,e);var i=s(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:"render",value:function(){return u(this.attrs.src)&&this.el.setAttribute("data-src",this.attrs.src),u(this.attrs.label)?this.el.setAttribute("alt",this.attrs.label):this.el.setAttribute("alt",""),this}}]),o}(h);f.prototype.tagName="img",f.prototype.className="incito__image-view",f.prototype.lazyload=!0;var p=function(e){r(o,e);var i=s(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:"render",value:function(){if(!u(this.attrs.text))return this;var t=(this.attrs.text_style||"").split("|"),e=this.attrs.text;e=Array.isArray(this.attrs.spans)&&this.attrs.spans.length>0?(e=this.parseSpans(e,this.attrs.spans).map((function(t){var e,n,r=l(t.text||"");if("link"===(null===(e=t.span)||void 0===e?void 0:e.name)&&null!=t.span.url)return'<a href="'.concat(encodeURI(t.span.url),'" rel="external" target="_blank">').concat(r,"</a>");if(null!=(null===(n=t.span)||void 0===n?void 0:n.name)){var i=t.span.name;return'<span data-name="'.concat(i,'">').concat(r,"</span>")}return r}))).join(""):l(e),this.attrs.text_prevent_widow&&(e=e.replace(/&nbsp;([^\s]+)$/," $1").replace(/\s([^\s]+)\s*$/,"&nbsp;$1")),this.el.innerHTML=e.replace(/\n/g,"<br>"),Array.isArray(this.attrs.font_family)&&this.attrs.font_family.length>0?this.el.style.fontFamily=this.attrs.font_family.join(", "):this.el.style.fontFamily="inherit",null!=this.attrs.text_size&&(this.el.style.fontSize="".concat(this.attrs.text_size,"px")),null!=this.attrs.line_spacing_multiplier&&(this.el.style.lineHeight=this.attrs.line_spacing_multiplier),null!=this.attrs.text_color&&(this.el.style.color=this.attrs.text_color),-1!==t.indexOf("bold")&&(this.el.style.fontWeight="bold"),-1!==t.indexOf("italic")&&(this.el.style.fontStyle="italic"),Array.isArray(this.attrs.text_decoration_line)&&(this.el.style.textDecorationLine=this.attrs.text_decoration_line.join(" "));var n=this.getTextShadow();return u(this.attrs.text_shadow)?this.el.style.textShadow=this.attrs.text_shadow:null!=n&&(this.el.style.textShadow="".concat(n.dx,"px ").concat(n.dy,"px ").concat(n.radius,"px ").concat(n.color)),"left"===this.attrs.text_alignment?this.el.style.textAlign="left":"center"===this.attrs.text_alignment?this.el.style.textAlign="center":"right"===this.attrs.text_alignment&&(this.el.style.textAlign="right"),!0===this.attrs.single_line||1===this.attrs.max_lines?this.el.setAttribute("data-single-line",!0):"number"==typeof this.attrs.max_lines&&(this.el.style.display="-webkit-box",this.el.style.webkitLineClamp=this.attrs.max_lines,this.el.style.webkitBoxOrient="vertical"),!0===this.attrs.text_all_caps&&(this.el.style.textTransform="uppercase"),this}},{key:"parseSpans",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return 0===e.length?n.push({text:t}):e[0].start>0&&n.push({text:t.slice(0,e[0].start)}),e.forEach((function(r,i){var o=r.start,a=r.end;n.push({text:t.slice(o,a),span:r}),i===e.length-1?a<t.length&&n.push({text:t.slice(a,t.length)}):a<e[i+1].start&&n.push({text:t.slice(a,e[i+1].start)})})),n}},{key:"getTextShadow",value:function(){if(u(this.attrs.text_shadow_color))return{dx:"number"==typeof this.attrs.text_shadow_dx?this.attrs.text_shadow_dx:0,dy:"number"==typeof this.attrs.text_shadow_dy?this.attrs.text_shadow_dy:0,radius:"number"==typeof this.attrs.text_shadow_radius?this.attrs.text_shadow_radius:0,color:this.attrs.text_shadow_color}}}]),o}(h);p.prototype.tagName="p",p.prototype.className="incito__text-view";var d=[".youtube.com",".vimeo.com",".twentythree.net"],g=function(e){r(o,e);var i=s(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:"render",value:function(){if(!u(this.attrs.src))return this;var t=this.attrs.src,e=document.createElement("a");return e.setAttribute("href",t),d.find((function(t){return e.hostname.slice(-t.length)===t}))&&(this.el.setAttribute("data-src",t),this.lazyload=!0),this}}]),o}(h);g.prototype.className="incito__video-embed-view",g.prototype.lazyload=!1;var v=function(e){r(o,e);var i=s(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:"render",value:function(){return u(this.attrs.src)?(this.el.muted=!0,this.el.preload="metadata",this.el.setAttribute("muted",""),this.el.setAttribute("playsinline","true"),this.el.setAttribute("webkit-playsinline","true"),this.el.setAttribute("data-src",this.attrs.src),this.el.setAttribute("data-mime",this.attrs.mime),!0===this.attrs.autoplay&&(this.el.autoplay=!0),!0===this.attrs.loop&&(this.el.loop=!0),!0===this.attrs.controls&&(this.el.controls=!0),this):this}}]),o}(h);v.prototype.className="incito__video-view",v.prototype.tagName="video",v.prototype.lazyload=!0;var y=function(e){r(i,e);var n=s(i);function i(){return t(this,i),n.apply(this,arguments)}return i}(h);y.prototype.className="incito__absolute-layout-view";var m=["stretch","center","flex-start","flex-end","baseline"],b=["flex-start","flex-end","center","space-between","space-around"],w=["row","column"],_=function(e){r(o,e);var i=s(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:"render",value:function(){return-1!==m.indexOf(this.attrs.layout_flex_align_items)&&(this.el.style.alignItems=this.attrs.layout_flex_align_items,this.el.style.msAlignItems=this.attrs.layout_flex_align_items),-1!==b.indexOf(this.attrs.layout_flex_justify_content)&&(this.el.style.justifyContent=this.attrs.layout_flex_justify_content,this.el.style.msFlexPack=this.attrs.layout_flex_justify_content),-1!==w.indexOf(this.attrs.layout_flex_direction)&&(this.el.style.flexDirection=this.attrs.layout_flex_direction,this.el.style.msFlexDirection=this.attrs.layout_flex_direction),this}}]),o}(h);_.prototype.className="incito__flex-layout-view";var S,x=Object.freeze({__proto__:null,View:h,ImageView:f,TextView:p,VideoEmbedView:g,VideoView:v,AbsoluteLayout:y,FlexLayout:_});if("undefined"!=typeof window&&"function"==typeof window.requestIdleCallback){var k=window;S=k.requestIdleCallback}else S=function(t){return setTimeout((function(){var e=Date.now();return t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)};var E=function(){function e(n,r){var i=r.incito,o=void 0===i?{}:i,a=r.renderLaziness,s=void 0===a?1:a;t(this,e),this.containerEl=n,this.incito=o,this.renderLaziness=s,this.el=document.createElement("div"),this.ids={},this.views=T([],this.incito.root_view),this.viewsLength=this.views.length,this.viewIndex=0,this.lazyloadables=[],this.lazyloader=function(t,e){if(0===e)return t;var n=!1;return function(){if(!n)return n=!0,setTimeout((function(){n=!1,t.apply(void 0,arguments)}),e)}}(this.lazyload.bind(this),150),this.renderedOutsideOfViewport=!1,this._events={}}return n(e,[{key:"bind",value:function(t,e){return this._events[t]=this._events[t]||[],this._events[t].push(e)}},{key:"unbind",value:function(t,e){if(this._events[t])return this._events[t].splice(this._events[t].indexOf(e),1)}},{key:"trigger",value:function(t){if(this._events[t])return this._events[t].map((function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))}))}},{key:"start",value:function(){var t=this,e=!1,n=function n(r){t.render(r),t.viewIndex<=t.viewsLength-1?t.renderCallbackHandle=S(n):(t.renderedOutsideOfViewport=!0,t.trigger("allRendered")),t.renderedOutsideOfViewport&&!e&&(t.trigger("visibleRendered"),e=!0),t.renderedOutsideOfViewport&&t.lazyload(0)};return this.el.className="incito",null!=this.incito.locale&&this.el.setAttribute("lang",this.incito.locale),O(this.incito.font_assets),this.applyTheme(this.incito.theme),this.containerEl.appendChild(this.el),2===this.renderLaziness?this.renderCallbackHandle=S(n):n({timeRemaining:function(){return Number.MAX_VALUE},didTimeout:!1}),document.addEventListener("scroll",this.lazyloader,!0),window.addEventListener("resize",this.lazyloader,!1),this}},{key:"destroy",value:function(){cancelIdleCallback(this.renderCallbackHandle),this.containerEl.removeChild(this.el),document.removeEventListener("scroll",this.lazyloader,!0),window.removeEventListener("resize",this.lazyloader,!1),this.trigger("destroyed")}},{key:"render",value:function(t){for(;t.timeRemaining()>0&&this.viewIndex<=this.viewsLength-1;){var e,n,r=this.views[this.viewIndex],i=r.attrs,o=new(null!==(e=x[i.view_name])&&void 0!==e?e:h)(i).render();if(null!=i.id&&"object"==typeof i.meta&&(this.ids[i.id]=i.meta),!0===o.lazyload&&this.lazyloadables.push(o.el),r.view=o,null!=(null===(n=r.parent)||void 0===n?void 0:n.view)?r.parent.view.el.appendChild(o.el):this.el.appendChild(o.el),this.viewIndex++,this.renderLaziness&&!(this.viewIndex%20)&&!this.renderedOutsideOfViewport&&!A(o.el)){this.renderedOutsideOfViewport=!0;break}}}},{key:"applyTheme",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(t.font_family)&&(this.el.style.fontFamily=t.font_family.join(", ")),u(t.background_color)&&(this.el.style.backgroundColor=t.background_color),u(t.text_color)&&(this.el.style.color=t.text_color),"number"==typeof t.line_spacing_multiplier&&(this.el.style.lineHeight=t.line_spacing_multiplier)}},{key:"lazyload",value:function(t){this.lazyloadables=this.lazyloadables.filter((function(e){return!A(e,t)||(P(e),!1)}))}}]),e}(),T=function t(e,n,r){var i={attrs:n,view:null,parent:r};return e.push(i),Array.isArray(n.child_views)&&n.child_views.forEach((function(n){return t(e,n,i)})),e},O=function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("FontFace"in window)for(t in r){var i,o;e=(n=r[t]).src.map((function(t){return"url(".concat(t[1],")")})).join(", ");var a=new FontFace(t,e,{style:null!==(i=n.style)&&void 0!==i?i:"normal",weight:null!==(o=n.weight)&&void 0!==o?o:"normal",display:"swap"});document.fonts.add(a),a.load()}else{var s=document.createElement("style");for(t in r){e=(n=r[t]).src.map((function(t){return"url('".concat(t[1],"') format('").concat(t[0],"')")})).join(", ");var c="@font-face {\n    font-family: '".concat(t,"';\n    font-display: swap;\n    src: ").concat(e,";\n}");s.appendChild(document.createTextNode(c))}document.head.appendChild(s)}},A=function(t,e){var n,r=window.innerHeight;e=null!==(n=e)&&void 0!==n?n:r;var i=t.getBoundingClientRect();return i.top<=r+e&&i.top+i.height>=-e},P=function(t){var e=t.getAttribute("data-src");if("img"===t.tagName.toLowerCase())t.addEventListener("load",(function(){t.className+=" incito--loaded"})),t.setAttribute("src",e);else if("video"===t.tagName.toLowerCase()){var n=document.createElement("source");n.setAttribute("src",e),n.setAttribute("type",t.getAttribute("data-mime")),t.appendChild(n)}else if(/incito__video-embed-view/gi.test(t.className)){var r=document.createElement("iframe");r.setAttribute("allow","fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),r.setAttribute("src",e),t.appendChild(r)}else t.style.backgroundImage="url(".concat(e,")")};return E},t.exports=n()})),uf=function(){function t(e,n){da(this,t),this.eventTracker=e,this.details=n}return va(t,[{key:"trackOpened",value:function(){var t;return null==this.eventTracker||null==this.details||this.eventTracker.trackIncitoPublicationOpened({"ip.paged":rl(t=this.details.types).call(t,"paged")>-1,"ip.id":this.details.id,vt:this.eventTracker.createViewToken(this.details.id)}),this}}]),t}();ya.mixin(uf);var lf=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};da(this,t),this.el=e,this.options=n,this.incito=new cf(this.el,{incito:this.options.incito,renderLaziness:this.options.renderLaziness}),this._eventTracking=new uf(this.options.eventTracker,this.options.details)}return va(t,[{key:"start",value:function(){return this.incito.start(),this.el.classList.add("sgn-incito--started"),this._eventTracking.trackOpened(),this}},{key:"destroy",value:function(){this.incito.destroy()}}]),t}();lf.Incito=cf,ya.mixin(lf);var hf=function(t){var e=js(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return N(e.call(t))},ff=js;An("asyncIterator");An("hasInstance"),An("isConcatSpreadable"),An("iterator"),An("match"),An("matchAll"),An("replace"),An("search"),An("species"),An("split"),An("toPrimitive"),An("toStringTag"),An("unscopables"),ye(r.JSON,"JSON",!0);var pf=L.Symbol,df=pf,gf=function(t,e,n,r){try{return r?e(N(n)[0],n[1]):e(n)}catch(e){throw Ls(t),e}},vf=!Xs((function(t){Array.from(t)}));V({target:"Array",stat:!0,forced:vf},{from:function(t){var e,n,r,i,o,a,s=Ht(t),c="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=js(s),p=0;if(h&&(l=M(l,u>2?arguments[2]:void 0,2)),null==f||c==Array&&Is(f))for(n=new c(e=$(s.length));e>p;p++)a=h?l(s[p],p):s[p],dt(n,p,a);else for(o=(i=f.call(s)).next,n=new c;!(r=o.call(i)).done;p++)a=h?gf(i,l,[r.value,p],!0):r.value,dt(n,p,a);return n.length=p,n}});var yf=L.Array.from,mf=yf,bf=c.f,wf=function(t){return function(e){for(var n,r=g(e),i=ot(r),a=i.length,s=0,c=[];a>s;)n=i[s++],o&&!bf.call(r,n)||c.push(t?[n,r[n]]:r[n]);return c}},_f={entries:wf(!0),values:wf(!1)}.values;V({target:"Object",stat:!0},{values:function(t){return _f(t)}});var Sf=L.Object.values,xf=function(t){return function(e,n,r,i){R(n);var o=Ht(e),a=p(o),s=$(o.length),c=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},kf={left:xf(!1),right:xf(!0)}.left,Ef=He("reduce"),Tf=Ye("reduce",{1:0});V({target:"Array",proto:!0,forced:!Ef||!Tf||!Zs&&pn>79&&pn<83},{reduce:function(t){return kf(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Of=Je("Array").reduce,Af=Array.prototype,Pf=function(t){var e=t.reduce;return t===Af||t instanceof Array&&e===Af.reduce?Of:e},If=function(){function t(e){var n,r,i=this;(da(this,t),this.scroll=dr(n=this.scroll).call(n,this),this.viewer=e,this.progressEl=this.viewer.el.querySelector(".sgn-incito__progress"),this.isScrolling=!1,this.progressEl)&&(this.progressEl.textContent="0 %",window.addEventListener("scroll",this.scroll,!1),dr(r=this.viewer).call(r,"destroyed",(function(){window.removeEventListener("scroll",i.scroll,!1)})))}return va(t,[{key:"scroll",value:function(){var t=this,e=window.innerHeight,n=this.viewer.el.getBoundingClientRect(),r=Math.min(100,Math.round(Math.abs(n.top-e)/n.height*100));clearTimeout(this.scrollTimeout),this.scrollTimeout=wu((function(){t.isScrolling=!1,t.viewer.el.classList.remove("sgn-incito--scrolling")}),1e3),!1===this.isScrolling&&(this.viewer.el.classList.add("sgn-incito--scrolling"),this.isScrolling=!0),this.progressEl.textContent="".concat(r," %"),this.viewer.trigger("progress",{progress:r})}}]),t}();function Cf(t,e){var n;if(void 0===df||null==ff(t)){if(Ll(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return jf(t,e);var r=Dh(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return mf(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=hf(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function jf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Lf=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};da(this,t),this.fetchDetails=dr(e=this.fetchDetails).call(e,this),this.options=n,this.deviceCategory=this.getDeviceCategory(),this.pixelRatio=this.getPixelRatio(),this.pointer=this.getPointer(),this.orientation=this.getOrientation(),this.time=this.getTime(),this.locale=this.getLocale(),this.maxWidth=this.getMaxWidth(),this.featureLabels=this.getFeatureLabels(),this.versionsSupported=["1.0.0"]}return va(t,[{key:"getDeviceCategory",value:function(){return cl()}},{key:"getPixelRatio",value:function(){return window.devicePixelRatio||1}},{key:"getPointer",value:function(){return ul()}},{key:"getOrientation",value:function(){var t=ll(screen.width,screen.height);return"quadratic"===t&&(t="horizontal"),t}},{key:"getTime",value:function(){return(new Date).toISOString()}},{key:"getLocale",value:function(){var t=[],e=null;Ll(navigator.languages)&&navigator.languages.length>0?t=Cl(t).call(t,navigator.languages):"string"==typeof navigator.language&&navigator.language.length>0?t.push(navigator.language):"string"==typeof navigator.browserLanguage&&navigator.browserLanguage.length>0&&t.push(navigator.browserLanguage),t.push("en_US");var n,r=Cf(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(null!=i&&(i=i.replace("-","_"),/[a-z][a-z]_[A-Z][A-Z]/g.test(i))){e=i;break}}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"getMaxWidth",value:function(){return 90===Math.abs(window.orientation)?Math.min(this.options.el.offsetWidth,screen.width):this.options.el.offsetWidth}},{key:"getFeatureLabels",value:function(){var t=Zh("incito-feature-labels");return!1===Ll(t)&&(t=[]),t}},{key:"anonymizeFeatureLabels",value:function(){var t,e,n=this.featureLabels.length,r=Pf(t=this.featureLabels).call(t,(function(t,e){return t[e]||(t[e]={key:e,value:0}),t[e].value++,t}),{});return Fl(e=Sf(r)).call(e,(function(t){return{key:t.key,value:Math.round(t.value/n*100)/100}}))}},{key:"fetch",value:function(t){var e=this;this.fetchDetails(this.options.id,(function(n,r){if(null!=n)return t(n);e.fetchIncito(r.incito_publication_id,(function(e,n){if(null!=e)return t(e);t(null,{details:r,incito:n})}))}))}},{key:"fetchDetails",value:function(t,e){_h({url:"/v2/catalogs/".concat(this.options.id)},e)}},{key:"fetchIncito",value:function(t,e){Yl(ml.get("coreUrl")+"/v4/rpc/generate_incito_from_publication",{method:"post",headers:{"X-Api-Key":ml.get("appKey"),"Content-Type":"application/json",Accept:"application/json"},body:Xl({id:t,device_category:this.deviceCategory,pointer:this.pointer,orientation:this.orientation,pixel_ratio:this.pixelRatio,max_width:this.maxWidth,versions_supported:this.versionsSupported,locale_code:this.locale,time:this.time,feature_labels:this.anonymizeFeatureLabels(this.featureLabels)})}).then((function(t){return t.json()})).then((function(t){return e(null,t)})).catch((function(t){return e(t)}))}},{key:"createViewer",value:function(t){if(null==t.incito)throw al(new Error,"You need to supply valid Incito to create a viewer");var e=new lf(this.options.el,{id:this.options.id,details:t.details,incito:t.incito,eventTracker:this.options.eventTracker});new If(e);var n=this;return xh(e.el).on("click",".incito__view[data-feature-labels]",(function(){var t,e=this.getAttribute("data-feature-labels").split(",");for(n.featureLabels=Cl(t=n.featureLabels).call(t,e);n.featureLabels.length>1e3;)n.featureLabels.shift();Kh("incito-feature-labels",n.featureLabels)})),e}}]),t}(),Rf=Object.freeze({__proto__:null,Viewer:lf,Bootstrapper:Lf}),Mf=Ve.find,Nf="find",Df=!0,zf=Ye(Nf);Nf in[]&&Array(1).find((function(){Df=!1})),V({target:"Array",proto:!0,forced:Df||!zf},{find:function(t){return Mf(this,t,arguments.length>1?arguments[1]:void 0)}});var Ff=Je("Array").find,Uf=Array.prototype,Bf=function(t){var e=t.find;return t===Uf||t instanceof Array&&e===Uf.find?Ff:e},Vf=function(){function t(e){var n,r,i,o,a,s,c,u,l,h,f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};da(this,t),this.destroy=dr(n=this.destroy).call(n,this),this.beforeNavigation=dr(r=this.beforeNavigation).call(r,this),this.prevClicked=dr(i=this.prevClicked).call(i,this),this.nextClicked=dr(o=this.nextClicked).call(o,this),this.closeClicked=dr(a=this.closeClicked).call(a,this),this.keyDown=dr(s=this.keyDown).call(s,this),this.options=p,this.els={root:e,progress:e.querySelector(".sgn-pp__progress"),progressBar:e.querySelector(".sgn-pp-progress__bar"),progressLabel:e.querySelector(".sgn-pp__progress-label"),prevControl:e.querySelector(".sgn-pp__control[data-direction=prev]"),nextControl:e.querySelector(".sgn-pp__control[data-direction=next]"),close:e.querySelector(".sgn-pp--close")},this.keyDownHandler=dl(this.keyDown,150,this),!0===this.options.keyboard&&this.els.root.addEventListener("keydown",this.keyDownHandler,!1),null===(c=this.els.prevControl)||void 0===c||c.addEventListener("mousedown",this.prevClicked,!1),null===(u=this.els.nextControl)||void 0===u||u.addEventListener("mousedown",this.nextClicked,!1),null===(l=this.els.close)||void 0===l||l.addEventListener("mousedown",this.closeClicked,!1),dr(h=this).call(h,"beforeNavigation",this.beforeNavigation),dr(f=this).call(f,"destroyed",this.destroy)}return va(t,[{key:"destroy",value:function(){var t,e,n;!0===this.options.keyboard&&this.els.root.removeEventListener("keydown",this.keyDownHandler,!1),null===(t=this.els.prevControl)||void 0===t||t.removeEventListener("mousedown",this.prevClicked,!1),null===(e=this.els.nextControl)||void 0===e||e.removeEventListener("mousedown",this.nextClicked,!1),null===(n=this.els.close)||void 0===n||n.removeEventListener("mousedown",this.closeClicked,!1)}},{key:"beforeNavigation",value:function(t){var e="string"==typeof t.progressLabel&&t.progressLabel.length>0,n="sgn-pp--hidden";this.els.progress&&this.els.progressBar&&(this.els.progressBar.style.width="".concat(t.progress,"%"),!0===e?this.els.progress.classList.remove(n):this.els.progress.classList.add(n)),this.els.progressLabel&&(!0===e?(this.els.progressLabel.textContent=t.progressLabel,this.els.progressLabel.classList.remove(n)):this.els.progressLabel.classList.add(n)),this.els.prevControl&&(0===t.verso.newPosition?this.els.prevControl.classList.add(n):this.els.prevControl.classList.remove(n)),this.els.nextControl&&(t.verso.newPosition===t.pageSpreadCount-1?this.els.nextControl.classList.add(n):this.els.nextControl.classList.remove(n))}},{key:"prevClicked",value:function(t){t.preventDefault(),this.trigger("prev")}},{key:"nextClicked",value:function(t){t.preventDefault(),this.trigger("next")}},{key:"closeClicked",value:function(t){t.preventDefault(),this.trigger("close")}},{key:"keyDown",value:function(t){var e=t.keyCode;37===e?this.trigger("prev",{duration:0}):39===e||32===e?this.trigger("next",{duration:0}):49===e&&this.trigger("first",{duration:0})}}]),t}();ya.mixin(Vf);var Hf=e((function(e,n){var r;r=function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},i=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},a=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,u={f:c&&!s.call({1:2},1)?function(t){var e=c(this,t);return!!e&&e.enumerable}:s},l=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},h={}.toString,f=function(t){return h.call(t).slice(8,-1)},p="".split,d=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==f(t)?p.call(t,""):Object(t)}:Object,g=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return d(g(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=function(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,w=function(t,e){return b.call(t,e)},_=i.document,S=y(_)&&y(_.createElement),x=function(t){return S?_.createElement(t):{}},k=!a&&!o((function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a})),E=Object.getOwnPropertyDescriptor,T={f:a?E:function(t,e){if(t=v(t),e=m(e,!0),k)try{return E(t,e)}catch(t){}if(w(t,e))return l(!u.f.call(t,e),t[e])}},O=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},A=Object.defineProperty,P={f:a?A:function(t,e,n){if(O(t),e=m(e,!0),O(n),k)try{return A(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=a?function(t,e,n){return P.f(t,e,l(1,n))}:function(t,e,n){return t[e]=n,t},C=function(t,e){try{I(i,t,e)}catch(n){i[t]=e}return e},j="__core-js_shared__",L=i[j]||C(j,{}),R=Function.toString;"function"!=typeof L.inspectSource&&(L.inspectSource=function(t){return R.call(t)});var M,N,D,z=L.inspectSource,F=i.WeakMap,U="function"==typeof F&&/native code/.test(z(F)),B=n((function(t){(t.exports=function(t,e){return L[t]||(L[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),V=0,H=Math.random(),W=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++V+H).toString(36)},q=B("keys"),X=function(t){return q[t]||(q[t]=W(t))},Y={},G=i.WeakMap;if(U){var $=L.state||(L.state=new G),Z=$.get,K=$.has,J=$.set;M=function(t,e){return e.facade=t,J.call($,t,e),e},N=function(t){return Z.call($,t)||{}},D=function(t){return K.call($,t)}}else{var Q=X("state");Y[Q]=!0,M=function(t,e){return e.facade=t,I(t,Q,e),e},N=function(t){return w(t,Q)?t[Q]:{}},D=function(t){return w(t,Q)}}var tt={set:M,get:N,has:D,enforce:function(t){return D(t)?N(t):M(t,{})},getterFor:function(t){return function(e){var n;if(!y(e)||(n=N(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},et=n((function(t){var e=tt.get,n=tt.enforce,r=String(String).split("String");(t.exports=function(t,e,o,a){var s,c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof o&&("string"!=typeof e||w(o,"name")||I(o,"name",e),(s=n(o)).source||(s.source=r.join("string"==typeof e?e:""))),t!==i?(c?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=o:I(t,e,o)):u?t[e]=o:C(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||z(this)}))})),nt=i,rt=function(t){return"function"==typeof t?t:void 0},it=function(t,e){return arguments.length<2?rt(nt[t])||rt(i[t]):nt[t]&&nt[t][e]||i[t]&&i[t][e]},ot=Math.ceil,at=Math.floor,st=function(t){return isNaN(t=+t)?0:(t>0?at:ot)(t)},ct=Math.min,ut=function(t){return t>0?ct(st(t),9007199254740991):0},lt=Math.max,ht=Math.min,ft=function(t,e){var n=st(t);return n<0?lt(n+e,0):ht(n,e)},pt=function(t){return function(e,n,r){var i,o=v(e),a=ut(o.length),s=ft(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},dt={includes:pt(!0),indexOf:pt(!1)},gt=dt.indexOf,vt=function(t,e){var n,r=v(t),i=0,o=[];for(n in r)!w(Y,n)&&w(r,n)&&o.push(n);for(;e.length>i;)w(r,n=e[i++])&&(~gt(o,n)||o.push(n));return o},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mt=yt.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return vt(t,mt)}},wt={f:Object.getOwnPropertySymbols},_t=it("Reflect","ownKeys")||function(t){var e=bt.f(O(t)),n=wt.f;return n?e.concat(n(t)):e},St=function(t,e){for(var n=_t(e),r=P.f,i=T.f,o=0;o<n.length;o++){var a=n[o];w(t,a)||r(t,a,i(e,a))}},xt=/#|\.prototype\./,kt=function(t,e){var n=Tt[Et(t)];return n==At||n!=Ot&&("function"==typeof e?o(e):!!e)},Et=kt.normalize=function(t){return String(t).replace(xt,".").toLowerCase()},Tt=kt.data={},Ot=kt.NATIVE="N",At=kt.POLYFILL="P",Pt=kt,It=T.f,Ct=function(t,e){var n,r,o,a,s,c=t.target,u=t.global,l=t.stat;if(n=u?i:l?i[c]||C(c,{}):(i[c]||{}).prototype)for(r in e){if(a=e[r],o=t.noTargetGet?(s=It(n,r))&&s.value:n[r],!Pt(u?r:c+(l?".":"#")+r,t.forced)&&void 0!==o){if(typeof a==typeof o)continue;St(a,o)}(t.sham||o&&o.sham)&&I(a,"sham",!0),et(n,r,a,t)}},jt=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Lt=function(t){return Object(g(t))},Rt=function(t,e,n,r){try{return r?e(O(n)[0],n[1]):e(n)}catch(e){throw function(t){var e=t.return;void 0!==e&&O(e.call(t)).value}(t),e}},Mt=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Nt=Mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Dt=B("wks"),zt=i.Symbol,Ft=Nt?zt:zt&&zt.withoutSetter||W,Ut=function(t){return w(Dt,t)||(Mt&&w(zt,t)?Dt[t]=zt[t]:Dt[t]=Ft("Symbol."+t)),Dt[t]},Bt={},Vt=Ut("iterator"),Ht=Array.prototype,Wt=function(t){return void 0!==t&&(Bt.Array===t||Ht[Vt]===t)},qt=function(t,e,n){var r=m(e);r in t?P.f(t,r,l(0,n)):t[r]=n},Xt={};Xt[Ut("toStringTag")]="z";var Yt="[object z]"===String(Xt),Gt=Ut("toStringTag"),$t="Arguments"==f(function(){return arguments}()),Zt=Yt?f:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Gt))?n:$t?f(e):"Object"==(r=f(e))&&"function"==typeof e.callee?"Arguments":r},Kt=Ut("iterator"),Jt=function(t){if(null!=t)return t[Kt]||t["@@iterator"]||Bt[Zt(t)]},Qt=Ut("iterator"),te=!1;try{var ee=0,ne={next:function(){return{done:!!ee++}},return:function(){te=!0}};ne[Qt]=function(){return this},Array.from(ne,(function(){throw 2}))}catch(t){}Ct({target:"Array",stat:!0,forced:!function(t,e){if(!e&&!te)return!1;var n=!1;try{var r={};r[Qt]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){Array.from(t)}))},{from:function(t){var e,n,r,i,o,a,s=Lt(t),c="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=Jt(s),p=0;if(h&&(l=jt(l,u>2?arguments[2]:void 0,2)),null==f||c==Array&&Wt(f))for(n=new c(e=ut(s.length));e>p;p++)a=h?l(s[p],p):s[p],qt(n,p,a);else for(o=(i=f.call(s)).next,n=new c;!(r=o.call(i)).done;p++)a=h?Rt(i,l,[r.value,p],!0):r.value,qt(n,p,a);return n.length=p,n}});var re=Object.defineProperty,ie={},oe=function(t){throw t},ae=function(t,e){if(w(ie,t))return ie[t];e||(e={});var n=[][t],r=!!w(e,"ACCESSORS")&&e.ACCESSORS,i=w(e,0)?e[0]:oe,s=w(e,1)?e[1]:void 0;return ie[t]=!!n&&!o((function(){if(r&&!a)return!0;var t={length:-1};r?re(t,1,{enumerable:!0,get:oe}):t[1]=1,n.call(t,i,s)}))},se=dt.indexOf,ce=[].indexOf,ue=!!ce&&1/[1].indexOf(1,-0)<0,le=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}("indexOf"),he=ae("indexOf",{ACCESSORS:!0,1:0});Ct({target:"Array",proto:!0,forced:ue||!le||!he},{indexOf:function(t){return ue?ce.apply(this,arguments)||0:se(this,t,arguments.length>1?arguments[1]:void 0)}});var fe,pe=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return O(n),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),de=function(t,e,n){var r,i;return pe&&"function"==typeof(r=e.constructor)&&r!==n&&y(i=r.prototype)&&i!==n.prototype&&pe(t,i),t},ge=Object.keys||function(t){return vt(t,yt)},ve=a?Object.defineProperties:function(t,e){O(t);for(var n,r=ge(e),i=r.length,o=0;i>o;)P.f(t,n=r[o++],e[n]);return t},ye=it("document","documentElement"),me=X("IE_PROTO"),be=function(){},we=function(t){return"<script>"+t+"<\/script>"},_e=function(){try{fe=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;_e=fe?function(t){t.write(we("")),t.close();var e=t.parentWindow.Object;return t=null,e}(fe):((e=x("iframe")).style.display="none",ye.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(we("document.F=Object")),t.close(),t.F);for(var n=yt.length;n--;)delete _e.prototype[yt[n]];return _e()};Y[me]=!0;var Se=Object.create||function(t,e){var n;return null!==t?(be.prototype=O(t),n=new be,be.prototype=null,n[me]=t):n=_e(),void 0===e?n:ve(n,e)},xe="[\t\n\v\f\r                　\u2028\u2029\ufeff]",ke=RegExp("^"+xe+xe+"*"),Ee=RegExp(xe+xe+"*$"),Te=function(t){return function(e){var n=String(g(e));return 1&t&&(n=n.replace(ke,"")),2&t&&(n=n.replace(Ee,"")),n}},Oe={start:Te(1),end:Te(2),trim:Te(3)},Ae=bt.f,Pe=T.f,Ie=P.f,Ce=Oe.trim,je="Number",Le=i.Number,Re=Le.prototype,Me=f(Se(Re))==je,Ne=function(t){var e,n,r,i,o,a,s,c,u=m(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=Ce(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((c=o.charCodeAt(s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(Pt(je,!Le(" 0o1")||!Le("0b1")||Le("+0x1"))){for(var De,ze=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof ze&&(Me?o((function(){Re.valueOf.call(n)})):f(n)!=je)?de(new Le(Ne(e)),n,ze):Ne(e)},Fe=a?Ae(Le):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Ue=0;Fe.length>Ue;Ue++)w(Le,De=Fe[Ue])&&!w(ze,De)&&Ie(ze,De,Pe(Le,De));ze.prototype=Re,Re.constructor=ze,et(i,je,ze)}function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t,e,n){return e&&He(t.prototype,e),n&&He(t,n),t}function qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach((function(e){qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return $e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ze,Ke,Je=Array.isArray||function(t){return"Array"==f(t)},Qe=Ut("species"),tn=function(t,e){var n;return Je(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Je(n.prototype)?y(n)&&null===(n=n[Qe])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},en=it("navigator","userAgent")||"",nn=i.process,rn=nn&&nn.versions,on=rn&&rn.v8;on?Ke=(Ze=on.split("."))[0]+Ze[1]:en&&(!(Ze=en.match(/Edge\/(\d+)/))||Ze[1]>=74)&&(Ze=en.match(/Chrome\/(\d+)/))&&(Ke=Ze[1]);var an=Ke&&+Ke,sn=Ut("species"),cn=function(t){return an>=51||!o((function(){var e=[];return(e.constructor={})[sn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},un=Ut("isConcatSpreadable"),ln=9007199254740991,hn="Maximum allowed index exceeded",fn=an>=51||!o((function(){var t=[];return t[un]=!1,t.concat()[0]!==t})),pn=cn("concat"),dn=function(t){if(!y(t))return!1;var e=t[un];return void 0!==e?!!e:Je(t)};Ct({target:"Array",proto:!0,forced:!fn||!pn},{concat:function(t){var e,n,r,i,o,a=Lt(this),s=tn(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(dn(o=-1===e?a:arguments[e])){if(c+(i=ut(o.length))>ln)throw TypeError(hn);for(n=0;n<i;n++,c++)n in o&&qt(s,c,o[n])}else{if(c>=ln)throw TypeError(hn);qt(s,c++,o)}return s.length=c,s}});var gn=cn("slice"),vn=ae("slice",{ACCESSORS:!0,0:0,1:2}),yn=Ut("species"),mn=[].slice,bn=Math.max;Ct({target:"Array",proto:!0,forced:!gn||!vn},{slice:function(t,e){var n,r,i,o=v(this),a=ut(o.length),s=ft(t,a),c=ft(void 0===e?a:e,a);if(Je(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Je(n.prototype)?y(n)&&null===(n=n[yn])&&(n=void 0):n=void 0,n===Array||void 0===n))return mn.call(o,s,c);for(r=new(void 0===n?Array:n)(bn(c-s,0)),i=0;s<c;s++,i++)s in o&&qt(r,i,o[s]);return r.length=i,r}});var wn=Object.assign,_n=Object.defineProperty,Sn=!wn||o((function(){if(a&&1!==wn({b:1},wn(_n({},"a",{enumerable:!0,get:function(){_n(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=wn({},t)[n]||ge(wn({},e)).join("")!=r}))?function(t,e){for(var n=Lt(t),r=arguments.length,i=1,o=wt.f,s=u.f;r>i;)for(var c,l=d(arguments[i++]),h=o?ge(l).concat(o(l)):ge(l),f=h.length,p=0;f>p;)c=h[p++],a&&!s.call(l,c)||(n[c]=l[c]);return n}:wn;Ct({target:"Object",stat:!0,forced:Object.assign!==Sn},{assign:Sn});var xn=u.f,kn=function(t){return function(e){for(var n,r=v(e),i=ge(r),o=i.length,s=0,c=[];o>s;)n=i[s++],a&&!xn.call(r,n)||c.push(t?[n,r[n]]:r[n]);return c}},En=[kn(!0),kn(!1)][0];Ct({target:"Object",stat:!0},{entries:function(t){return En(t)}});
/*! Hammer.JS - v2.0.7 - 2016-04-22
		 * http://hammerjs.github.io/
		 *
		 * Copyright (c) 2016 Jorik Tangelder;
		 * Licensed under the MIT license */
var Tn=["","webkit","Moz","MS","ms","o"],On=Math.round,An=Math.abs,Pn=Date.now;function In(t,e,n){return!!Array.isArray(t)&&(Cn(t,n[e],n),!0)}function Cn(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function jn(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&Object.assign(r,n)}function Ln(t,e){return"function"==Be(t)?t.apply(e&&e[0]||void 0,e):t}function Rn(t,e){return void 0===t?e:t}function Mn(t,e,n){Fn(e).forEach((function(e){return t.addEventListener(e,n,!1)}))}function Nn(t,e,n){Fn(e).forEach((function(e){return t.removeEventListener(e,n,!1)}))}function Dn(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function zn(t,e){return t.indexOf(e)>-1}function Fn(t){return t.trim().split(/\s+/g)}var Un=function(t){return Array.prototype.slice.call(t,0)};function Bn(t,e,n){var r=[],i=[];return t.forEach((function(t,n){var o=e?t[e]:t;i.indexOf(o)<0&&r.push(t),i[n]=o})),n&&r.sort(e?function(t,n){return t[e]>n[e]}:void 0),r}function Vn(t,e){var n=e[0].toUpperCase()+e.slice(1);return Tn.find((function(r){return(r?r+n:e)in t}))}var Hn=1;function Wn(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||"undefined"!=typeof window&&window}var qn=/mobile|tablet|ip(ad|hone|od)|android/i,Xn=function(){return"undefined"!=typeof window&&"ontouchstart"in window},Yn="touch",Gn="mouse",$n=24,Zn=["x","y"],Kn=["clientX","clientY"];function Jn(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){Ln(t.options.enable,[t])&&n.handler(e)},this.init()}function Qn(t){var e=t.options.inputClass;return new(e||("undefined"!=typeof window&&void 0!==Vn(window,"PointerEvent")?yr:Xn()&&qn.test(navigator.userAgent)?kr:Xn()?Tr:fr))(t,tr)}function tr(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,a=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=er(e)),i>1&&!n.firstMultiple?n.firstMultiple=er(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,c=e.center=nr(r);e.timeStamp=Pn(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=ar(s,c),e.distance=or(s,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=ir(e.deltaX,e.deltaY);var u=rr(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=An(u.x)>An(u.y)?u.x:u.y,e.scale=a?cr(a.pointers,r):1,e.rotation=a?sr(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(s>25||void 0===a.velocity)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,l=rr(s,c,u);r=l.x,i=l.y,n=An(l.x)>An(l.y)?l.x:l.y,o=ir(c,u),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var l=t.element;Dn(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function er(t){var e=t.pointers.map((function(t){return{clientX:On(t.clientX),clientY:On(t.clientY)}}));return{timeStamp:Pn(),pointers:e,center:nr(e),deltaX:t.deltaX,deltaY:t.deltaY}}function nr(t){var e=t.length;if(1===e)return{x:On(t[0].clientX),y:On(t[0].clientY)};var n=0,r=0;return t.forEach((function(t){var e=t.clientX,i=t.clientY;n+=e,r+=i})),{x:On(n/e),y:On(r/e)}}Jn.prototype={handler:function(){},init:function(){this.evEl&&Mn(this.element,this.evEl,this.domHandler),this.evTarget&&Mn(this.target,this.evTarget,this.domHandler),this.evWin&&Mn(Wn(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Nn(this.element,this.evEl,this.domHandler),this.evTarget&&Nn(this.target,this.evTarget,this.domHandler),this.evWin&&Nn(Wn(this.element),this.evWin,this.domHandler)}};var rr=function(t,e,n){return{x:e/t||0,y:n/t||0}};function ir(t,e){return t===e?1:An(t)>=An(e)?t<0?2:4:e<0?8:16}var or=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zn,r=Ge(n,2),i=r[0],o=r[1];return Math.sqrt(Math.pow(e[i]-t[i],2)+Math.pow(e[o]-t[o],2))},ar=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zn,r=Ge(n,2),i=r[0],o=r[1];return 180*Math.atan2(e[o]-t[o],e[i]-t[i])/Math.PI},sr=function(t,e){return ar(e[1],e[0],Kn)+ar(t[1],t[0],Kn)},cr=function(t,e){return or(e[0],e[1],Kn)/or(t[0],t[1],Kn)},ur={mousedown:1,mousemove:2,mouseup:4},lr="mousedown",hr="mousemove mouseup";function fr(){this.evEl=lr,this.evWin=hr,this.pressed=!1,Jn.apply(this,arguments)}jn(fr,Jn,{handler:function(t){var e=ur[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Gn,srcEvent:t}))}});var pr={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},dr={2:Yn,3:"pen",4:Gn,5:"kinect"},gr="pointerdown",vr="pointermove pointerup pointercancel";function yr(){this.evEl=gr,this.evWin=vr,Jn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}"undefined"!=typeof window&&window.MSPointerEvent&&!window.PointerEvent&&(gr="MSPointerDown",vr="MSPointerMove MSPointerUp MSPointerCancel"),jn(yr,Jn,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=pr[r],o=dr[t.pointerType]||t.pointerType,a=o==Yn,s=e.findIndex((function(e){return e.pointerId==t.pointerId}));1&i&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var mr={touchstart:1,touchmove:2,touchend:4,touchcancel:8},br="touchstart",wr="touchstart touchmove touchend touchcancel";function _r(){this.evTarget=br,this.evWin=wr,this.started=!1,Jn.apply(this,arguments)}jn(_r,Jn,{handler:function(t){var e=mr[t.type];if(1===e&&(this.started=!0),this.started){var n=Ge(function(t,e){var n=Un(t.touches),r=Un(t.changedTouches);return 12&e&&(n=Bn(n.concat(r),"identifier",!0)),[n,r]}(t,e),2),r=n[0],i=n[1];12&e&&r.length-i.length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:r,changedPointers:i,pointerType:Yn,srcEvent:t})}}});var Sr={touchstart:1,touchmove:2,touchend:4,touchcancel:8},xr="touchstart touchmove touchend touchcancel";function kr(){this.evTarget=xr,this.targetIds={},Jn.apply(this,arguments)}function Er(t,e){var n=Un(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o=Un(t.changedTouches),a=[],s=this.target;return i=n.filter((function(t){return Dn(t.target,s)})),1===e&&i.forEach((function(t){r[t.identifier]=!0})),o.forEach((function(t,n){r[t.identifier]&&a.push(t),12&e&&delete r[t.identifier]})),a.length?[Bn(i.concat(a),"identifier",!0),a]:void 0}function Tr(){Jn.apply(this,arguments);var t=this.handler.bind(this);this.touch=new kr(this.manager,t),this.mouse=new fr(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Or(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,Ar.call(this,e)):12&t&&Ar.call(this,e)}function Ar(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function Pr(t){var e=t.srcEvent,n=e.clientX,r=e.clientY;return!!this.lastTouches.find((function(t){return Math.abs(n-t.x)<=25&&Math.abs(r-t.y)<=25}))}jn(kr,Jn,{handler:function(t){var e=Sr[t.type],n=Er.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Yn,srcEvent:t})}}),jn(Tr,Jn,{handler:function(t,e,n){var r=n.pointerType==Yn,i=n.pointerType==Gn;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Or.call(this,e,n);else if(i&&Pr.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ir=function(){var t="undefined"!=typeof document&&document.createElement("div");if(t)return Vn(t.style,"touchAction")},Cr=function(){return void 0!==Ir()},jr="compute",Lr="auto",Rr="manipulation",Mr="none",Nr="pan-x",Dr="pan-y";function zr(t,e){this.manager=t,this.set(e)}zr.prototype={set:function(t){t==jr&&(t=this.compute());var e=Ur();Cr()&&this.manager.element.style&&e[t]&&(this.manager.element.style[Ir()]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return this.manager.recognizers.forEach((function(e){Ln(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(zn(t,Mr))return Mr;var e=zn(t,Nr),n=zn(t,Dr);return e&&n?Mr:e||n?e?Nr:Dr:zn(t,Rr)?Rr:Lr}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=Ur(),o=zn(r,Mr)&&!i.none,a=zn(r,Dr)&&!i["pan-y"],s=zn(r,Nr)&&!i["pan-x"];if(o){var c=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(c&&u&&l)return}if(!s||!a)return o||a&&6&n||s&&n&$n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Fr=["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"];function Ur(){if(!Cr())return!1;var t="undefined"!=typeof window&&window.CSS&&window.CSS.supports;return Fr.reduce((function(e,n){return e[n]=!t||window.CSS.supports("touch-action",n),e}),{})}var Br=32;function Vr(t){this.options=Ye(Ye({},this.defaults),t),this.id=Hn++,this.manager=null,this.options.enable=Rn(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Hr(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Wr(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}Vr.prototype={defaults:{},set:function(t){return Object.assign(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(In(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=qr(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return In(t,"dropRecognizeWith",this)||(t=qr(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(In(t,"requireFailure",this))return this;var e=this.requireFail;return t=qr(t,this),-1===e.indexOf(t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(In(t,"dropRequireFailure",this))return this;t=qr(t,this);var e=this.requireFail.indexOf(t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Hr(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Hr(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Br},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=Ye({},t);if(!Ln(this.options.enable,[this,e]))return this.reset(),void(this.state=Br);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}};var qr=function(t,e){var n=e.manager;return n?n.get(t):t};function Xr(){Vr.apply(this,arguments)}function Yr(){Xr.apply(this,arguments),this.pX=null,this.pY=null}function Gr(){Xr.apply(this,arguments)}function $r(){Vr.apply(this,arguments),this._timer=null,this._input=null}function Zr(){Xr.apply(this,arguments)}function Kr(){Xr.apply(this,arguments)}function Jr(){Vr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Qr(t,e){return(e=e||{}).recognizers=Rn(e.recognizers,Qr.defaults.preset),new ti(t,e)}function ti(t,e){var n=this;this.options=Ye(Ye({},Qr.defaults),e),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Qn(this),this.touchAction=new zr(this,this.options.touchAction),ei(this,!0),this.options.recognizers&&this.options.recognizers.forEach((function(t){var e=n.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}))}function ei(t,e){var n,r=t.element;r.style&&(Object.entries(t.options.cssProps).forEach((function(i){var o=Ge(i,2),a=o[0],s=o[1];n=Vn(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=a):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}jn(Xr,Vr,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:Br}}),jn(Yr,Xr,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Dr),t&$n&&e.push(Nr),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Xr.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Wr(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),jn(Gr,Xr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mr]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),jn($r,Vr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lr]},process:function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!i||!r||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.time);else if(4&t.eventType)return 8;return Br},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Pn(),this.manager.emit(this.options.event,this._input)))}}),jn(Zr,Xr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mr]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),jn(Kr,Xr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Yr.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&$n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&An(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Wr(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),jn(Jr,Vr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rr]},process:function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&o&&r){if(4!=t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||or(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0==this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.interval),2):8}return Br},failTimeout:function(){var t=this;return this._timer=setTimeout((function(){t.state=Br}),this.options.interval),Br},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Qr.VERSION="2.0.7",Qr.defaults={domEvents:!1,touchAction:jr,enable:!0,inputTarget:null,inputClass:null,preset:[[Zr,{enable:!1}],[Gr,{enable:!1},["rotate"]],[Kr,{direction:6}],[Yr,{direction:6},["swipe"]],[Jr],[Jr,{event:"doubletap",taps:2},["tap"]],[$r]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ti.prototype={set:function(t){return Object.assign(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null),n.forEach((function(n){2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n)}))}},get:function(t){return t instanceof Vr?t:this.recognizers.find((function(e){return e.options.event==t}))||null},add:function(t){if(In(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(In(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers.indexOf(t);-1!==e&&(this.recognizers.splice(e,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return Fn(t).forEach((function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return Fn(t).forEach((function(t){e?n[t]&&n[t].splice(n[t].indexOf(e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();n&&n.length&&(e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()},n.forEach((function(t){return t(e)})))},destroy:function(){this.element&&ei(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Object.assign(Qr,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Br,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:$n,DIRECTION_ALL:30,Manager:ti,Input:Jn,TouchAction:zr,TouchInput:kr,MouseInput:fr,PointerEventInput:yr,TouchMouseInput:Tr,SingleTouchInput:_r,Recognizer:Vr,AttrRecognizer:Xr,Tap:Jr,Pan:Yr,Swipe:Kr,Pinch:Gr,Rotate:Zr,Press:$r,on:Mn,off:Nn,each:Cn,inherit:jn,prefixed:Vn});var ni=Qr,ri=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ve(this,t),this.el=e,this.options=n,this.visibility="gone",this.positioned=!1,this.active=!1,this.id=this.options.id,this.type=this.options.type,this.pageIds=this.options.pageIds,this.width=this.options.width,this.left=this.options.left,this.maxZoomScale=this.options.maxZoomScale}return We(t,[{key:"isZoomable",value:function(){return this.getMaxZoomScale()>1&&"false"!==this.getEl().getAttribute("data-zoomable")}},{key:"isScrollable",value:function(){return this.getEl().classList.contains("verso--scrollable")}},{key:"getEl",value:function(){return this.el}},{key:"getOverlayEls",value:function(){return this.getEl().querySelectorAll(".verso__overlay")}},{key:"getPageEls",value:function(){return this.getEl().querySelectorAll(".verso__page")}},{key:"getRect",value:function(){return this.getEl().getBoundingClientRect()}},{key:"getContentRect",value:function(){for(var t,e,n,r,i={top:null,left:null,right:null,bottom:null,width:null,height:null},o=0,a=Array.from(this.getPageEls());o<a.length;o++){var s=a[o].getBoundingClientRect();(s.top<i.top||null==i.top)&&(i.top=s.top),(s.left<i.left||null==i.left)&&(i.left=s.left),(s.right>i.right||null==i.right)&&(i.right=s.right),(s.bottom>i.bottom||null==i.bottom)&&(i.bottom=s.bottom)}return i.top=null!==(t=i.top)&&void 0!==t?t:0,i.left=null!==(e=i.left)&&void 0!==e?e:0,i.right=null!==(n=i.right)&&void 0!==n?n:0,i.bottom=null!==(r=i.bottom)&&void 0!==r?r:0,i.width=i.right-i.left,i.height=i.bottom-i.top,i}},{key:"getId",value:function(){return this.id}},{key:"getType",value:function(){return this.type}},{key:"getPageIds",value:function(){return this.pageIds}},{key:"getWidth",value:function(){return this.width}},{key:"getLeft",value:function(){return this.left}},{key:"getMaxZoomScale",value:function(){return this.maxZoomScale}},{key:"getVisibility",value:function(){return this.visibility}},{key:"setVisibility",value:function(t){return this.visibility!==t&&(this.getEl().style.display="visible"===t?"block":"none",this.visibility=t),this}},{key:"position",value:function(){return!1===this.positioned&&(this.getEl().style.left="".concat(this.getLeft(),"%"),this.positioned=!0),this}},{key:"activate",value:function(){this.active=!0,this.getEl().setAttribute("data-active",this.active)}},{key:"deactivate",value:function(){this.active=!1,this.getEl().setAttribute("data-active",this.active)}}]),t}(),ii=function(){function t(e){Ve(this,t),this.el=e,this.run=0}return We(t,[{key:"animate",value:function(){var t,e,n,r,i,o=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},c=null!==(t=a.x)&&void 0!==t?t:0,u=null!==(e=a.y)&&void 0!==e?e:0,l=null!==(n=a.scale)&&void 0!==n?n:1,h=null!==(r=a.easing)&&void 0!==r?r:"ease-out",f=null!==(i=a.duration)&&void 0!==i?i:0,p=++this.run,d="translateX(".concat(c,") translateY(").concat(u,") scale(").concat(l,")");if(this.el.style.transform===d)s();else if(f>0){var g=function t(){p===o.run&&(o.el.removeEventListener("transitionend",t),o.el.style.transition="none",s())};this.el.addEventListener("transitionend",g,!1),this.el.style.transition="transform ".concat(h," ").concat(f,"ms"),this.el.style.transform=d}else this.el.style.transition="none",this.el.style.transform=d,s();return this}}]),t}();return function(){function t(e){var n,r,i,o,a,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ve(this,t),this.el=e,this.options=c,this.swipeVelocity=null!==(n=this.options.swipeVelocity)&&void 0!==n?n:.3,this.swipeThreshold=null!==(r=this.options.swipeThreshold)&&void 0!==r?r:10,this.navigationDuration=null!==(i=this.options.navigationDuration)&&void 0!==i?i:240,this.navigationPanDuration=null!==(o=this.options.navigationPanDuration)&&void 0!==o?o:200,this.zoomDuration=null!==(a=this.options.zoomDuration)&&void 0!==a?a:200,this.doubleTapDelay=null!==(s=this.options.doubleTapDelay)&&void 0!==s?s:300,this.position=-1,this.pinching=!1,this.panning=!1,this.transform={left:0,top:0,scale:1},this.startTransform={left:0,top:0,scale:1},this.tap={count:0,delay:this.doubleTapDelay},this.started=!1,this.destroyed=!1,this._events={}}return We(t,[{key:"bind",value:function(t,e){return this._events[t]=this._events[t]||[],this._events[t].push(e)}},{key:"unbind",value:function(t,e){if(this._events[t])return this._events[t].splice(this._events[t].indexOf(e),1)}},{key:"trigger",value:function(t){for(var e,n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];null===(e=this._events[t])||void 0===e||e.forEach((function(t){return t.apply(n,i)}))}},{key:"start",value:function(){var t;this.scrollerEl=this.el.querySelector(".verso__scroller"),this.pageSpreadEls=this.el.querySelectorAll(".verso__page-spread"),this.pageSpreads=this.traversePageSpreads(this.pageSpreadEls),this.pageIds=this.buildPageIds(this.pageSpreads),this.animation=new ii(this.scrollerEl),this.hammer=new ni.Manager(this.scrollerEl,{touchAction:"none",enable:!1,inputClass:this.getHammerInputClass()}),this.hammer.add(new ni.Pan({threshold:5,direction:ni.DIRECTION_ALL})),this.hammer.add(new ni.Tap({event:"singletap",interval:0})),this.hammer.add(new ni.Pinch),this.hammer.add(new ni.Press({time:500})),this.hammer.on("panstart",this.onPanStart.bind(this)),this.hammer.on("panmove",this.onPanMove.bind(this)),this.hammer.on("panend",this.onPanEnd.bind(this)),this.hammer.on("pancancel",this.onPanEnd.bind(this)),this.hammer.on("singletap",this.onSingletap.bind(this)),this.hammer.on("pinchstart",this.onPinchStart.bind(this)),this.hammer.on("pinchmove",this.onPinchMove.bind(this)),this.hammer.on("pinchend",this.onPinchEnd.bind(this)),this.hammer.on("pinchcancel",this.onPinchEnd.bind(this)),this.hammer.on("press",this.onPress.bind(this)),this.scrollerEl.addEventListener("contextmenu",this.onContextmenu.bind(this),!1),this.scrollerEl.addEventListener("wheel",this.onWheel.bind(this),!1);var e=null!==(t=this.getPageSpreadPositionFromPageId(this.options.pageId))&&void 0!==t?t:0;return this.hammer.set({enable:!0}),this.started=!0,this.destroyed=!1,this.navigateTo(e,{duration:0}),this.resizeListener=this.onResize.bind(this),this.touchStartListener=this.onTouchStart.bind(this),this.touchEndListener=this.onTouchEnd.bind(this),this.el.addEventListener("touchstart",this.touchStartListener,!1),this.el.addEventListener("touchend",this.touchEndListener,!1),"undefined"!=typeof window&&null!==window&&window.addEventListener("resize",this.resizeListener,!1),this}},{key:"destroy",value:function(){return this.started?this.destroyed?console.warn("You've called .destroy() on a viewer that has already been destroyed and not restarted, this is a no-op."):(this.scrollerEl.removeEventListener("contextmenu",this.onContextmenu.bind(this)),this.scrollerEl.removeEventListener("wheel",this.onWheel.bind(this)),this.hammer.destroy(),this.el.removeEventListener("touchstart",this.touchStartListener),this.el.removeEventListener("touchend",this.touchEndListener),window.removeEventListener("resize",this.resizeListener),this.started=!1,this.destroyed=!0,this):console.warn("You've called .destroy() on a viewer that was not started yet, this is a no-op.")}},{key:"first",value:function(t){return this.navigateTo(0,t)}},{key:"prev",value:function(t){return this.navigateTo(this.getPosition()-1,t)}},{key:"next",value:function(t){return this.navigateTo(this.getPosition()+1,t)}},{key:"last",value:function(t){return this.navigateTo(this.getPageSpreadCount()-1,t)}},{key:"navigateTo",value:function(t){var e,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.destroyed)return console.warn("You've called a navigation method on a viewer that was previously destroyed, this is a no-op.\nPlease call viewer.start() again, if you want to reuse this Viewer instance.\n\nYou might have forgotten to remove an event handler that\ncalls first/prev/next/last/navigateTo on the viewer.");if(!this.started)return console.warn("\nYou've called a navigation method on a viewer that hasn't been started yet, this is a no-op.\nPlease call viewer.start() first.\n\nYou might have forgotten to remove an event handler that\ncalls .first()/.prev()/.next()/.last()/.navigateTo() on the viewer.\n");if(!(t<0||t>this.getPageSpreadCount()-1)){var o=this.getPosition(),a=this.getPageSpreadFromPosition(o),s=this.getPageSpreadFromPosition(t),c=this.getCarouselFromPageSpread(s),u=null!==(e=i.velocity)&&void 0!==e?e:1,l=null!==(n=i.duration)&&void 0!==n?n:this.navigationDuration;l/=Math.abs(u);var h=s.isScrollable()?"pan-y":"none";null==a||a.deactivate(),s.activate(),c.visible.forEach((function(t){return t.position().setVisibility("visible")})),this.hammer.set({touchAction:h}),this.transform.left=this.getLeftTransformFromPageSpread(t,s),this.setPosition(t),this.transform.scale>1&&(this.transform.top=0,this.transform.scale=1,this.trigger("zoomedOut",{position:o})),this.trigger("beforeNavigation",{currentPosition:o,newPosition:t}),this.animation.animate({x:"".concat(this.transform.left,"%"),duration:l},(function(){(c=r.getCarouselFromPageSpread(r.getActivePageSpread())).gone.forEach((function(t){return t.setVisibility("gone")})),r.trigger("afterNavigation",{newPosition:r.getPosition(),previousPosition:o})}))}}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position=t,this}},{key:"getLeftTransformFromPageSpread",value:function(t,e){var n=0;return t===this.getPageSpreadCount()-1?n=100-e.getWidth()-e.getLeft():t>0&&(n=(100-e.getWidth())/2-e.getLeft()),n}},{key:"getCarouselFromPageSpread",value:function(t){var e={visible:[],gone:[]};return this.pageSpreads.forEach((function(n){var r=!1;n.getLeft()<=t.getLeft()?n.getLeft()+n.getWidth()>t.getLeft()-100&&(r=!0):n.getLeft()-n.getWidth()<t.getLeft()+100&&(r=!0),!0===r?e.visible.push(n):e.gone.push(n)})),e}},{key:"traversePageSpreads",value:function(t){for(var e=[],n=0,r=0,i=Array.from(t);r<i.length;r++){var o,a,s,c=i[r],u=c.getAttribute("data-id"),l=c.getAttribute("data-type"),h=(null===(o=c.getAttribute("data-page-ids"))||void 0===o?void 0:o.split(","))||[],f=Number(null!==(a=c.getAttribute("data-max-zoom-scale"))&&void 0!==a?a:1),p=Number(null!==(s=c.getAttribute("data-width"))&&void 0!==s?s:100),d=new ri(c,{id:u,type:l,pageIds:h,maxZoomScale:f,width:p,left:n});n+=p,e.push(d)}return e}},{key:"buildPageIds",value:function(t){var e={};return t.forEach((function(t){t.options.pageIds.forEach((function(n){e[n]=t}))})),e}},{key:"isCoordinateInsideElement",value:function(t,e,n){var r=n.getBoundingClientRect();return t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom}},{key:"getCoordinateInfo",value:function(t,e,n){for(var r,i={x:t-=this.el.offsetLeft,y:e-=this.el.offsetTop,contentX:0,contentY:0,pageX:0,pageY:0,overlayEls:[],pageEl:null,isInsideContentX:!1,isInsideContentY:!1,isInsideContent:!1},o=n.getContentRect(),a=n.getOverlayEls(),s=n.getPageEls(),c=0,u=Array.from(a);c<u.length;c++){var l=u[c];this.isCoordinateInsideElement(t,e,l)&&i.overlayEls.push(l)}for(var h=0,f=Array.from(s);h<f.length;h++)if(r=f[h],this.isCoordinateInsideElement(t,e,r)){i.pageEl=r;break}return i.contentX=(t-o.left)/Math.max(1,o.width),i.contentY=(e-o.top)/Math.max(1,o.height),i.pageEl&&(i.isInsideContentX=i.contentX>=0&&i.contentX<=1,i.isInsideContentY=i.contentY>=0&&i.contentY<=1,i.isInsideContent=i.isInsideContentX&&i.isInsideContentY),i}},{key:"getPageSpreadCount",value:function(){return this.pageSpreads.length}},{key:"getActivePageSpread",value:function(){return this.getPageSpreadFromPosition(this.getPosition())}},{key:"getPageSpreadFromPosition",value:function(t){return this.pageSpreads[t]}},{key:"getPageSpreadPositionFromPageId",value:function(t){for(var e=0;e<this.pageSpreads.length;e++)if(this.pageSpreads[e].options.pageIds.indexOf(t)>-1)return e}},{key:"getPageSpreadBounds",value:function(t){var e=t.getRect(),n=t.getContentRect();return{left:(n.left-e.left)/e.width*100,top:(n.top-e.top)/e.height*100,width:n.width/e.width*100,height:n.height/e.height*100,pageSpreadRect:e,pageSpreadContentRect:n}}},{key:"clipCoordinate",value:function(t,e,n,r){return n*e<100?t=r*-e+50-n*e/2:(t=Math.min(t,r*-e),t=Math.max(t,r*-e-n*e+100)),t}},{key:"zoomTo",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=n.scale,o=this.transform.scale,a=this.getActivePageSpread(),s=this.getPageSpreadBounds(a),c=a.getLeft(),u=c*o,l=null!==(t=n.x)&&void 0!==t?t:0,h=null!==(e=n.y)&&void 0!==e?e:0;1!==i?(l-=s.pageSpreadRect.left,h-=s.pageSpreadRect.top,l=l/(s.pageSpreadRect.width/o)*100,h=h/(s.pageSpreadRect.height/o)*100,l=this.transform.left+u+l-l*i/o,h=this.transform.top+h-h*i/o,!1!==n.bounds&&i>1&&(l=this.clipCoordinate(l,i,s.width,s.left),h=this.clipCoordinate(h,i,s.height,s.top))):(l=0,h=0),l-=c*i,this.transform.left=l,this.transform.top=h,this.transform.scale=i,this.animation.animate({x:"".concat(l,"%"),y:"".concat(h,"%"),scale:i,easing:n.easing,duration:n.duration},r)}},{key:"refresh",value:function(){return this.pageSpreadEls=this.el.querySelectorAll(".verso__page-spread"),this.pageSpreads=this.traversePageSpreads(this.pageSpreadEls),this.pageIds=this.buildPageIds(this.pageSpreads),this}},{key:"getHammerInputClass",value:function(){return"undefined"!=typeof window&&"ontouchstart"in window&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent)?ni.TouchInput:null}},{key:"onPanStart",value:function(t){if(this.transform.scale>1||t.direction===ni.DIRECTION_LEFT||t.direction===ni.DIRECTION_RIGHT){var e=t.center.x,n=this.scrollerEl.offsetWidth;e>30&&e<n-30&&(this.startTransform.left=this.transform.left,this.startTransform.top=this.transform.top,this.panning=!0,this.trigger("panStart"))}}},{key:"onPanMove",value:function(t){var e;if(!0!==this.pinching&&!1!==this.panning)if(this.transform.scale>1){var n=this.getActivePageSpread(),r=n.getLeft()*this.transform.scale,i=this.getPageSpreadBounds(n),o=this.transform.scale;e=this.startTransform.left+r+t.deltaX/this.scrollerEl.offsetWidth*100;var a=this.startTransform.top+t.deltaY/this.scrollerEl.offsetHeight*100;e=this.clipCoordinate(e,o,i.width,i.left),a=this.clipCoordinate(a,o,i.height,i.top),e-=r,this.transform.left=e,this.transform.top=a,this.animation.animate({x:"".concat(e,"%"),y:"".concat(a,"%"),scale:o,easing:"linear"})}else e=this.transform.left+t.deltaX/this.scrollerEl.offsetWidth*100,this.animation.animate({x:"".concat(e,"%"),easing:"linear"})}},{key:"onPanEnd",value:function(t){if(!1!==this.panning&&(this.panning=!1,this.trigger("panEnd"),1===this.transform.scale&&!1===this.pinching)){var e=this.getPosition(),n=t.overallVelocityX;Math.abs(n)>=this.swipeVelocity&&Math.abs(t.deltaX)>=this.swipeThreshold&&(t.offsetDirection===ni.DIRECTION_LEFT?this.next({velocity:n,duration:this.navigationPanDuration}):t.offsetDirection===ni.DIRECTION_RIGHT&&this.prev({velocity:n,duration:this.navigationPanDuration})),e===this.getPosition()&&(this.animation.animate({x:"".concat(this.transform.left,"%"),duration:this.navigationPanDuration}),this.trigger("attemptedNavigation",{position:this.getPosition()}))}}},{key:"onPinchStart",value:function(){this.getActivePageSpread().isZoomable()&&(this.pinching=!0,this.el.setAttribute("data-pinching",!0),this.startTransform.scale=this.transform.scale)}},{key:"onPinchMove",value:function(t){!1!==this.pinching&&this.zoomTo({x:t.center.x,y:t.center.y,scale:this.startTransform.scale*t.scale,bounds:!1,easing:"linear"})}},{key:"onPinchEnd",value:function(t){var e=this;if(!1!==this.pinching){var n=this.getActivePageSpread().getMaxZoomScale(),r=Math.max(1,Math.min(this.transform.scale,n)),i=this.getPosition();1===this.startTransform.scale&&r>1?this.trigger("zoomedIn",{position:i}):this.startTransform.scale>1&&1===r&&this.trigger("zoomedOut",{position:i}),this.zoomTo({x:t.center.x,y:t.center.y,scale:r,duration:this.zoomDuration},(function(){e.pinching=!1,e.el.setAttribute("data-pinching",!1)}))}}},{key:"onPress",value:function(t){this.trigger("pressed",this.getCoordinateInfo(t.center.x,t.center.y,this.getActivePageSpread()))}},{key:"onContextmenu",value:function(t){return t.preventDefault(),this.trigger("contextmenu",this.getCoordinateInfo(t.clientX,t.clientY,this.getActivePageSpread())),!1}},{key:"onWheel",value:function(t){var e,n,r=this,i=this.getActivePageSpread();if(!1!==i.isZoomable()){var o=t.deltaY;event.webkitDirectionInvertedFromDevice&&(o=-o),o>0&&1===this.transform.scale?(n=i.getMaxZoomScale(),e=this.getPosition(),this.zoomTo({x:t.clientX,y:t.clientY,scale:n,duration:this.zoomDuration},(function(){r.trigger("zoomedIn",{position:e})}))):o<0&&this.transform.scale>1&&(e=this.getPosition(),this.zoomTo({x:t.clientX,y:t.clientY,scale:1,duration:this.zoomDuration},(function(){r.trigger("zoomedOut",{position:e})})))}}},{key:"onSingletap",value:function(t){var e=this,n=this.getActivePageSpread(),r=this.getCoordinateInfo(t.center.x,t.center.y,n);if(clearTimeout(this.tap.timeout),1===this.tap.count){if(this.tap.count=0,this.trigger("doubleClicked",r),n.isZoomable()){var i=n.getMaxZoomScale(),o=this.transform.scale>1,a=o?1:i,s=o?"zoomedOut":"zoomedIn",c=this.getPosition();this.zoomTo({x:t.center.x,y:t.center.y,scale:a,duration:this.zoomDuration},(function(){e.trigger(s,{position:c})}))}}else this.tap.count++,this.tap.timeout=setTimeout((function(){e.tap.count=0,e.trigger("clicked",r)}),this.tap.delay)}},{key:"onTouchStart",value:function(t){this.getActivePageSpread().isScrollable()||t.preventDefault()}},{key:"onTouchEnd",value:function(t){this.getActivePageSpread().isScrollable()||t.preventDefault()}},{key:"onResize",value:function(){if(this.transform.scale>1){var t=this.getPosition(),e=this.getActivePageSpread();this.transform.left=this.getLeftTransformFromPageSpread(t,e),this.transform.top=0,this.transform.scale=1,this.zoomTo({x:this.transform.left,y:this.transform.top,scale:this.transform.scale,duration:0}),this.trigger("zoomedOut",{position:t})}}}]),t}()},e.exports=r()})),Wf=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};da(this,t),this.options=e,this.contentsRendered=!1,this.hotspotsRendered=!1,this.el=this.renderEl()}return va(t,[{key:"getId",value:function(){return this.options.id}},{key:"getEl",value:function(){return this.el}},{key:"getPages",value:function(){return this.options.pages}},{key:"renderEl",value:function(){var t,e=document.createElement("div"),n=Fl(t=this.getPages()).call(t,(function(t){return t.id}));return e.className="verso__page-spread sgn-pp__page-spread",e.setAttribute("data-id",this.getId()),e.setAttribute("data-type","page"),e.setAttribute("data-width",this.options.width),e.setAttribute("data-page-ids",n.join(",")),e.setAttribute("data-max-zoom-scale",this.options.maxZoomScale),e.setAttribute("data-zoomable",!1),e}},{key:"renderContents",value:function(){var t=this,e=this.getId(),n=this.getEl(),r=this.getPages(),i=r.length,o=0,a=n.clientWidth*(window.devicePixelRatio||1);"double"===this.options.pageMode&&(a/=2);var s=a>700;return nn(r).call(r,(function(a,c){var u=a.images.medium;s&&(u=a.images.large);var l=document.createElement("div"),h=document.createElement("div");l.className="sgn-pp__page verso__page",null!=a.id&&l.setAttribute("data-id",a.id),2===i&&(l.className+=0===c?" verso-page--verso":" verso-page--recto"),l.appendChild(h),n.appendChild(l),h.className="sgn-pp-page__loader",h.innerHTML="<span>".concat(a.label,"</span>"),gl(u,(function(s,c,f){if(null==s){var p=++o===i;l.style.backgroundImage="url(".concat(u,")"),l.setAttribute("data-width",c),l.setAttribute("data-height",f),l.innerHTML="&nbsp;",p&&n.setAttribute("data-zoomable",!0),t.trigger("pageLoaded",{pageSpreadId:e,page:a}),p&&t.trigger("pagesLoaded",{pageSpreadId:e,pages:r})}else h.innerHTML="<span>!</span>"}))})),this.contentsRendered=!0,this}},{key:"clearContents",value:function(){return this.el.innerHTML="",this.contentsRendered=!1,this}},{key:"zoomIn",value:function(){var t=this,e=Dh([]).call(this.el.querySelectorAll(".sgn-pp__page")),n=this.getPages();nn(e).call(e,(function(e){var r=e.getAttribute("data-id"),i=Bf(n).call(n,(function(t){return t.id===r})).images.large;gl(i,(function(n){null==n&&"true"===t.el.getAttribute("data-active")&&(e.setAttribute("data-image",e.style.backgroundImage),e.style.backgroundImage="url(".concat(i,")"))}))}))}},{key:"zoomOut",value:function(){var t=mf(this.el.querySelectorAll(".sgn-pp__page[data-image]"));nn(t).call(t,(function(t){t.style.backgroundImage=t.getAttribute("data-image"),t.removeAttribute("data-image")}))}}]),t}();ya.mixin(Wf);var qf=function(){function t(e){da(this,t),this.options=e,this.collection=[],this.ids={}}return va(t,[{key:"get",value:function(t){return this.ids[t]}},{key:"getFrag",value:function(){var t,e=document.createDocumentFragment();return nn(t=this.collection).call(t,(function(t){return e.appendChild(t.el)})),e}},{key:"update",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single",r=[],i={},o=Dh(t=this.options.pages).call(t),a=this.options,s=a.width,c=a.maxZoomScale;if("single"===n)nn(o).call(o,(function(t){return r.push([t])}));else{var u=o.shift(),l=o.length%2==1?o.pop():null,h=pl(o,2);u&&r.push([u]),nn(h).call(h,(function(t){return r.push(Fl(t).call(t,(function(t){return t})))})),l&&r.push([l])}return this.collection=Fl(r).call(r,(function(t,r){var o,a=Cl(o="".concat(n,"-")).call(o,r),u=new Wf({width:s,pageMode:n,maxZoomScale:c,pages:t,id:a});return dr(u).call(u,"pageLoaded",(function(t){return e.trigger("pageLoaded",t)})),dr(u).call(u,"pagesLoaded",(function(t){return e.trigger("pagesLoaded",t)})),i[a]=u,u})),this.ids=i,this}}]),t}();ya.mixin(qf);var Xf=function(){function t(e){var n,r,i,o,a,s,c,u,l,h,f,p,d,g,v,y,m,b,w,_,S,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};da(this,t),this.beforeNavigation=dr(n=this.beforeNavigation).call(n,this),this.afterNavigation=dr(r=this.afterNavigation).call(r,this),this.attemptedNavigation=dr(i=this.attemptedNavigation).call(i,this),this.clicked=dr(o=this.clicked).call(o,this),this.doubleClicked=dr(a=this.doubleClicked).call(a,this),this.pressed=dr(s=this.pressed).call(s,this),this.contextmenu=dr(c=this.contextmenu).call(c,this),this.panStart=dr(u=this.panStart).call(u,this),this.panEnd=dr(l=this.panEnd).call(l,this),this.zoomedIn=dr(h=this.zoomedIn).call(h,this),this.zoomedOut=dr(f=this.zoomedOut).call(f,this),this.resize=dr(p=this.resize).call(p,this),this.unload=dr(d=this.unload).call(d,this),this.options=this.makeOptions(x,this.defaults),this.pageId=this.getOption("pageId"),this.els={root:e,pages:e.querySelector(".sgn-pp__pages"),verso:e.querySelector(".verso")},this.pageMode=this.getPageMode(),this.pageSpreads=new qf({pages:this.getOption("pages"),maxZoomScale:this.getOption("pageSpreadMaxZoomScale"),width:this.getOption("pageSpreadWidth")}),dr(g=this.pageSpreads).call(g,"pageLoaded",dr(v=this.pageLoaded).call(v,this)),dr(y=this.pageSpreads).call(y,"pagesLoaded",dr(m=this.pagesLoaded).call(m,this)),this.setColor(this.getOption("color")),this.els.pages.parentNode.insertBefore(this.pageSpreads.update(this.pageMode).getFrag(),this.els.pages),this.verso=this.createVerso(),dr(b=this).call(b,"started",dr(w=this.start).call(w,this)),dr(_=this).call(_,"destroyed",dr(S=this.destroy).call(S,this))}return va(t,[{key:"start",value:function(){var t,e,n=this.getVerso();n.start(),nn(t=n.pageSpreads).call(t,dr(e=this.overridePageSpreadContentRect).call(e,this)),this.resizeListener=dl(this.resize,this.getOption("resizeDelay")),window.addEventListener("resize",this.resizeListener,!1),window.addEventListener("beforeunload",this.unload,!1),this.els.root.setAttribute("data-started",""),this.els.root.setAttribute("tabindex","-1"),this.els.root.focus()}},{key:"destroy",value:function(){var t,e=this.getVerso(),n=e.el.querySelectorAll(".sgn-pp__page-spread");this.els.root.removeAttribute("data-started"),this.els.root.removeAttribute("data-idle"),this.els.root.removeAttribute("data-navigating"),this.els.root.removeAttribute("data-color-brightness"),this.els.root.removeAttribute("data-zoomed-in"),this.els.root.style.backgroundColor="#ffffff",nn(t=mf(n)).call(t,(function(t){t.parentNode.removeChild(t)})),e.destroy(),window.removeEventListener("resize",this.resizeListener,!1),window.removeEventListener("beforeunload",this.unload,!1)}},{key:"makeOptions",value:function(t,e){var n={};for(var r in t){var i;n[r]=null!==(i=t[r])&&void 0!==i?i:e[r]}return n}},{key:"getOption",value:function(t){return this.options[t]}},{key:"setColor",value:function(t){this.els.root.setAttribute("data-color-brightness",hl(t)),this.els.root.style.backgroundColor=t}},{key:"createVerso",value:function(){var t=new Hf(this.els.verso,{pageId:this.pageId});return dr(t).call(t,"beforeNavigation",this.beforeNavigation),dr(t).call(t,"afterNavigation",this.afterNavigation),dr(t).call(t,"attemptedNavigation",this.attemptedNavigation),dr(t).call(t,"clicked",this.clicked),dr(t).call(t,"doubleClicked",this.doubleClicked),dr(t).call(t,"pressed",this.pressed),dr(t).call(t,"contextmenu",this.contextmenu),dr(t).call(t,"panStart",this.panStart),dr(t).call(t,"panEnd",this.panEnd),dr(t).call(t,"zoomedIn",this.zoomedIn),dr(t).call(t,"zoomedOut",this.zoomedOut),t}},{key:"getVerso",value:function(){return this.verso}},{key:"getContentRect",value:function(t){var e={top:0,left:0,right:0,bottom:0,width:0,height:0},n=t.getPageEls(),r=n[0],i=n.length;if(!i)return e;var o=this.getVerso().transform.scale,a=r.offsetWidth*i*o,s=r.offsetHeight*o,c=+r.getAttribute("data-height")/(+r.getAttribute("data-width")*i),u=s,l=u/c;u=(l=Math.min(a,l))*c;var h=r.getBoundingClientRect();return e.width=l,e.height=u,e.top=h.top+(s-u)/2,e.left=h.left+(a-l)/2,e.right=e.width+e.left,e.bottom=e.height+e.top,e}},{key:"formatProgressLabel",value:function(t){var e,n=null!==(e=null==t?void 0:t.options.pages)&&void 0!==e?e:[],r=Fl(n).call(n,(function(t){return t.id})),i=Fl(n).call(n,(function(t){return t.label})),o=this.getOption("pages").length;return r.length>0?i.join("-")+" / "+o:null}},{key:"renderPageSpreads",value:function(){var t,e=this;return nn(t=this.getVerso().pageSpreads).call(t,(function(t){var n=t.getVisibility(),r=e.pageSpreads.get(t.getId());if(r){var i,o;if("visible"===n&&!1===r.contentsRendered)wu(dr(i=r.renderContents).call(i,r),0);if("gone"===n&&!0===r.contentsRendered)wu(dr(o=r.clearContents).call(o,r),0)}})),this}},{key:"findPage",value:function(t){var e;return Bf(e=this.getOption("pages")).call(e,(function(e){return e.id===t}))}},{key:"pageLoaded",value:function(t){this.trigger("pageLoaded",t)}},{key:"pagesLoaded",value:function(t){this.trigger("pagesLoaded",t)}},{key:"beforeNavigation",value:function(t){var e=t.newPosition,n=this.getVerso(),r=n.getPageSpreadFromPosition(e),i=this.pageSpreads.get(r.getId()),o=n.getPageSpreadCount(),a=n.pageSpreadEls[t.newPosition],s=e/(o-1)*100,c=this.formatProgressLabel(i);this.els.root.setAttribute("data-navigating",!0),this.renderPageSpreads(),this.resetIdleTimer(),this.startIdleTimer(),this.trigger("beforeNavigation",{verso:t,pageSpread:i,newSpreadEl:a,progress:s,progressLabel:c,pageSpreadCount:o,newPositionIsEnd:t.newPosition+1===o})}},{key:"afterNavigation",value:function(t){var e=t.newPosition,n=this.getVerso(),r=n.getPageSpreadFromPosition(e),i=this.pageSpreads.get(r.getId()),o=n.getPageSpreadCount(),a=n.pageSpreadEls[t.newPosition];this.els.root.setAttribute("data-navigating",!1),this.trigger("afterNavigation",{verso:t,pageSpread:i,pageSpreadCount:o,newSpreadEl:a,newPositionIsEnd:t.newPosition+1===o})}},{key:"attemptedNavigation",value:function(t){this.trigger("attemptedNavigation",{verso:t})}},{key:"clicked",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("clicked",{verso:t,page:n})}}},{key:"doubleClicked",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("doubleClicked",{verso:t,page:n})}}},{key:"pressed",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("pressed",{verso:t,page:n})}}},{key:"contextmenu",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("contextmenu",{verso:t,page:n})}}},{key:"panStart",value:function(){this.resetIdleTimer(),this.trigger("panStart",{scale:this.getVerso().transform.scale})}},{key:"panEnd",value:function(){this.startIdleTimer(),this.trigger("panEnd")}},{key:"zoomedIn",value:function(t){var e=t.position,n=this.getVerso().getPageSpreadFromPosition(e),r=this.pageSpreads.get(n.getId());null==r||r.zoomIn(),this.els.root.setAttribute("data-zoomed-in",!0),this.trigger("zoomedIn",{verso:t,pageSpread:r})}},{key:"zoomedOut",value:function(t){var e=t.position,n=this.getVerso().getPageSpreadFromPosition(e),r=this.pageSpreads.get(n.getId());null==r||r.zoomOut(),this.els.root.setAttribute("data-zoomed-in",!1),this.trigger("zoomedOut",{verso:t,pageSpread:r})}},{key:"getPageMode",value:function(){var t=this.getOption("pageMode");if(null==t){var e=this.els.root.offsetWidth;t=this.els.root.offsetHeight/e<.8?"double":"single"}return t}},{key:"resetIdleTimer",value:function(){return clearTimeout(this.idleTimeout),this.els.root.setAttribute("data-idle",!1),this}},{key:"startIdleTimer",value:function(){var t=this;return this.idleTimeout=wu((function(){t.els.root.setAttribute("data-idle",!0)}),this.getOption("idleDelay")),this}},{key:"switchPageMode",value:function(t){var e,n,r;if(this.pageMode===t)return this;var i=this.getVerso(),o=i.getPageSpreadFromPosition(i.getPosition()).getPageIds(),a=this.getVerso().el.querySelectorAll(".sgn-pp__page-spread");return this.pageMode=t,this.pageSpreads.update(this.pageMode),nn(e=mf(a)).call(e,(function(t){t.parentNode.removeChild(t)})),this.els.pages.parentNode.insertBefore(this.pageSpreads.getFrag(),this.els.pages),i.refresh(),i.navigateTo(i.getPageSpreadPositionFromPageId(o[0]),{duration:0}),nn(n=i.pageSpreads).call(n,dr(r=this.overridePageSpreadContentRect).call(r,this)),this}},{key:"overridePageSpreadContentRect",value:function(t){var e=this;if("page"===t.getType())return t.getContentRect=function(){return e.getContentRect(t)}}},{key:"resize",value:function(){var t=this.getPageMode();null==this.getOption("pageMode")&&t!==this.pageMode?this.switchPageMode(t):this.trigger("resized")}},{key:"unload",value:function(){this.trigger("disappeared")}}]),t}();Xf.prototype.defaults={pages:[],pageSpreadWidth:100,pageSpreadMaxZoomScale:2.3,idleDelay:1e3,resizeDelay:400,color:"#ffffff"},ya.mixin(Xf);var Yf=function(){function t(e,n){var r,i,o,a,s,c,u;da(this,t),this.eventTracker=e,this.id=n,this.hidden=!0,this.pageSpread=null,dr(this).call(this,"appeared",dr(r=this.appeared).call(r,this)),dr(this).call(this,"disappeared",dr(i=this.disappeared).call(i,this)),dr(this).call(this,"beforeNavigation",dr(o=this.beforeNavigation).call(o,this)),dr(this).call(this,"afterNavigation",dr(a=this.afterNavigation).call(a,this)),dr(this).call(this,"attemptedNavigation",dr(s=this.attemptedNavigation).call(s,this)),dr(this).call(this,"panStart",dr(c=this.panStart).call(c,this)),dr(this).call(this,"destroyed",dr(u=this.destroy).call(u,this))}return va(t,[{key:"destroy",value:function(){this.pageSpreadDisappeared()}},{key:"trackOpened",value:function(){return null==this.eventTracker||this.eventTracker.trackPagedPublicationOpened({"pp.id":this.id,vt:this.eventTracker.createViewToken(this.id)}),this}},{key:"trackPageSpreadDisappeared",value:function(t){var e=this;return null==this.eventTracker||nn(t).call(t,(function(t){e.eventTracker.trackPagedPublicationPageDisappeared({"pp.id":e.id,"ppp.n":t,vt:e.eventTracker.createViewToken(e.id,t)})})),this}},{key:"appeared",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"disappeared",value:function(){this.pageSpreadDisappeared()}},{key:"beforeNavigation",value:function(){this.pageSpreadDisappeared()}},{key:"afterNavigation",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"attemptedNavigation",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"panStart",value:function(t){1===t.scale&&this.pageSpreadDisappeared()}},{key:"pageSpreadAppeared",value:function(t){t&&!0===this.hidden&&(this.pageSpread=t,this.hidden=!1)}},{key:"pageSpreadDisappeared",value:function(){var t;this.pageSpread&&!1===this.hidden&&(this.trackPageSpreadDisappeared(Fl(t=this.pageSpread.getPages()).call(t,(function(t){return t.pageNumber}))),this.hidden=!0,this.pageSpread=null)}}]),t}();ya.mixin(Yf);var Gf=jl;var $f=function(t){if(Gf(t))return t},Zf=Qt("iterator"),Kf=function(t){var e=Object(t);return void 0!==e[Zf]||"@@iterator"in e||vt.hasOwnProperty(pe(e))};An("asyncDispose"),An("dispose"),An("observable"),An("patternMatch"),An("replaceAll");var Jf=pf;var Qf=function(t,e){if(void 0!==Jf&&Kf(Object(t))){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=hf(t);!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},tp=yf,ep=Nh;var np=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r};var rp=function(t,e){var n;if(t){if("string"==typeof t)return np(t,e);var r=ep(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?tp(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?np(t,e):void 0}};var ip=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var op=function(t,e){return $f(t)||Qf(t,e)||rp(t,e)||ip()},ap=function(){function t(){var e,n,r,i;da(this,t),this.currentPageSpreadId=null,this.pageSpreadsLoaded={},this.cache={},dr(this).call(this,"hotspotsReceived",dr(e=this.hotspotsReceived).call(e,this)),dr(this).call(this,"afterNavigation",dr(n=this.afterNavigation).call(n,this)),dr(this).call(this,"pagesLoaded",dr(r=this.pagesLoaded).call(r,this)),dr(this).call(this,"resized",dr(i=this.resized).call(i,this))}return va(t,[{key:"renderHotspots",value:function(t){var e,n=document.createDocumentFragment(),r=t.versoPageSpread.getContentRect(),i=t.pageSpread.getEl(),o=i.querySelectorAll(".sgn-pp__hotspot"),a=i.getBoundingClientRect();for(var s in nn(e=mf(o)).call(e,(function(t){t.parentNode.removeChild(t)})),t.hotspots){var c=t.hotspots[s],u=this.getPosition(t.pages,t.ratio,c),l=this.renderHotspot(c,u,r,a);n.appendChild(l)}return i.appendChild(n),this}},{key:"renderHotspot",value:function(t,e,n,r){var i=document.createElement("div"),o=Math.round(n.height/100*e.top),a=Math.round(n.width/100*e.left),s=Math.round(n.width/100*e.width),c=Math.round(n.height/100*e.height);return o+=Math.round(n.top),a+=Math.round(n.left),o-=r.top,a-=r.left,i.className="sgn-pp__hotspot verso__overlay",null!=t.id&&i.setAttribute("data-id",t.id),null!=t.type&&i.setAttribute("data-type",t.type),i.innerHTML=_a.render("",t),i.style.top="".concat(o,"px"),i.style.left="".concat(a,"px"),i.style.width="".concat(s,"px"),i.style.height="".concat(c,"px"),i}},{key:"getPosition",value:function(t,e,n){var r=null,i=null,o=null,a=null,s=Fl(t).call(t,(function(t){return t.pageNumber}));for(var c in n.locations){var u;-1!==rl(s).call(s,+c)&&nn(u=n.locations[c]).call(u,(function(e){var n=op(e,2),u=n[0],l=n[1];if(t[1]&&s[1]===+c&&(u+=1),u/=t.length,null==r&&(r=o=u,i=a=l),u<r&&(r=u),u>o&&(o=u),l<i&&(i=l),l>a)return a=l}))}return{top:i/e*100,left:100*r,width:100*(o-r),height:(a-i)/e*100}}},{key:"requestHotspots",value:function(t,e){this.trigger("hotspotsRequested",{id:t,pages:e})}},{key:"hotspotsReceived",value:function(t){var e=t.pageSpread.getId();this.setCache(e,t),this.renderHotspots(t)}},{key:"getCache",value:function(t){return this.cache[t]}},{key:"setCache",value:function(t,e){return this.cache[t]=e,this}},{key:"afterNavigation",value:function(t){if(null!=t.pageSpread){var e=t.pageSpread.getId();this.currentPageSpreadId=e,this.pageSpreadsLoaded[e]&&this.requestHotspots(e,t.pageSpread.getPages())}}},{key:"pagesLoaded",value:function(t){this.pageSpreadsLoaded[t.pageSpreadId]=!0,this.currentPageSpreadId===t.pageSpreadId&&this.requestHotspots(t.pageSpreadId,t.pages)}},{key:"resized",value:function(){var t=this.getCache(this.currentPageSpreadId);t&&this.renderHotspots(t)}}]),t}();function sp(t,e){var n;if(void 0===df||null==ff(t)){if(Ll(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return cp(t,e);var r=Dh(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return mf(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=hf(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function cp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function up(t,e,n,r){var i;return Th({el:n,header:xa("paged_publication.hotspot_picker.header"),x:e.verso.x,y:e.verso.y,items:Fl(i=_n(t).call(t,(function(t){return"offer"===t.type}))).call(i,(function(t){return{id:t.id,title:t.offer.heading,subtitle:t.offer.pricing.currency+""+t.offer.pricing.price}}))},(function(e){return r(Bf(t).call(t,(function(t){return t.id===e.id})))})).destroy}ya.mixin(ap);var lp=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};da(this,t),this.el=e,this.options=n,this._core=new Xf(this.el,{id:this.options.id,pages:this.options.pages,pageSpreadWidth:this.options.pageSpreadWidth,pageSpreadMaxZoomScale:this.options.pageSpreadMaxZoomScale,pageId:this.options.pageId,idleDelay:this.options.idleDelay,resizeDelay:this.options.resizeDelay,color:this.options.color}),this._hotspots=new ap,this._controls=new Vf(this.el,{keyboard:this.options.keyboard}),this._eventTracking=new Yf(this.options.eventTracker,this.options.id),this.viewSession=sl(),this.hotspots=null,this.hotspotQueue=[],this.popover=null,this._setupEventListeners()}return va(t,[{key:"start",value:function(){return this._eventTracking.trackOpened(),this._core.trigger("started"),this}},{key:"destroy",value:function(){return this._core.trigger("destroyed"),this._hotspots.trigger("destroyed"),this._controls.trigger("destroyed"),this._eventTracking.trigger("destroyed"),this.trigger("destroyed"),this}},{key:"navigateTo",value:function(t,e){return this.navigateToIndex(t,e),this}},{key:"navigateToIndex",value:function(t,e){return this._core.getVerso().navigateTo(t,e),this}},{key:"navigateToPageId",value:function(t,e){var n=this._core.getVerso().getPageSpreadPositionFromPageId(t);return this._core.getVerso().navigateTo(n,e)}},{key:"first",value:function(t){return this._core.getVerso().first(t),this}},{key:"prev",value:function(t){return this._core.getVerso().prev(t),this}},{key:"next",value:function(t){return this._core.getVerso().next(t),this}},{key:"last",value:function(t){return this._core.getVerso().last(t),this}},{key:"_setupEventListeners",value:function(){var t,e,n,r,i,o,a,s,c,u,l,h,f,p,d,g,v,y,m,b,w,_,S,x,k,E,T=this;dr(t=this._controls).call(t,"prev",(function(t){T.prev(t)})),dr(e=this._controls).call(e,"next",(function(t){T.next(t)})),dr(n=this._controls).call(n,"first",(function(t){T.first(t)})),dr(r=this._controls).call(r,"last",(function(t){T.last(t)})),dr(i=this._controls).call(i,"close",(function(t){T.destroy(t)})),dr(o=this._hotspots).call(o,"hotspotsRequested",(function(t){T.trigger("hotspotsRequested",t)})),dr(a=this._core).call(a,"appeared",(function(t){T._eventTracking.trigger("appeared",t),T.trigger("appeared",t)})),dr(s=this._core).call(s,"disappeared",(function(t){T._eventTracking.trigger("disappeared",t),T.trigger("disappeared",t)})),dr(c=this._core).call(c,"beforeNavigation",(function(t){T._eventTracking.trigger("beforeNavigation",t),T._controls.trigger("beforeNavigation",t),T.trigger("beforeNavigation",t)})),dr(u=this._core).call(u,"afterNavigation",(function(t){T._eventTracking.trigger("afterNavigation",t),T._hotspots.trigger("afterNavigation",t),T.trigger("afterNavigation",t)})),dr(l=this._core).call(l,"attemptedNavigation",(function(t){T._eventTracking.trigger("attemptedNavigation",t),T.trigger("attemptedNavigation",t)})),dr(h=this._core).call(h,"clicked",(function(t){T._eventTracking.trigger("clicked",t),T.trigger("clicked",t)})),dr(f=this._core).call(f,"doubleClicked",(function(t){T._eventTracking.trigger("doubleClicked",t),T.trigger("doubleClicked",t)})),dr(p=this._core).call(p,"contextmenu",(function(t){T.trigger("contextmenu",t)})),dr(d=this._core).call(d,"pressed",(function(t){T._eventTracking.trigger("pressed",t),T.trigger("pressed",t)})),dr(g=this._core).call(g,"panStart",(function(t){T._eventTracking.trigger("panStart",t),T.trigger("panStart",t)})),dr(v=this._core).call(v,"zoomedIn",(function(t){T._eventTracking.trigger("zoomedIn",t),T.trigger("zoomedIn",t)})),dr(y=this._core).call(y,"zoomedOut",(function(t){T._eventTracking.trigger("zoomedOut",t),T.trigger("zoomedOut",t)})),dr(m=this._core).call(m,"pageLoaded",(function(t){T._eventTracking.trigger("pageLoaded",t),T.trigger("pageLoaded",t)})),dr(b=this._core).call(b,"pagesLoaded",(function(t){T._hotspots.trigger("pagesLoaded",t),T.trigger("pagesLoaded",t)})),dr(w=this._core).call(w,"resized",(function(t){T._hotspots.trigger("resized"),T.trigger("resized",t)})),dr(this).call(this,"hotspotsRequested",dr(_=this.hotspotsRequested).call(_,this)),dr(this).call(this,"beforeNavigation",dr(S=this.beforeNavigation).call(S,this)),dr(this).call(this,"clicked",dr(x=this.clicked).call(x,this)),dr(this).call(this,"contextmenu",dr(k=this.contextmenu).call(k,this)),dr(this).call(this,"pressed",dr(E=this.pressed).call(E,this))}},{key:"pickHotspot",value:function(t,e){var n,r=this;if(null!=this.hotspots){var i,o;if(null!=this.popover)null===(i=(o=this.popover).destroy)||void 0===i||i.call(o),this.popover=null;var a=Fl(n=t.verso.overlayEls).call(n,(function(t){return r.hotspots[t.getAttribute("data-id")]}));1===a.length?e(a[0]):a.length>1&&(this.popover={destroy:(this.options.pickHotspot||up)(a,t,this.el,e)})}}},{key:"processHotspotQueue",value:function(){var t,e=this;null!=this.hotspots&&(this.hotspotQueue=_n(t=this.hotspotQueue).call(t,(function(t){var n,r,i={},o=Bf(n=e._core.getVerso().pageSpreads).call(n,(function(e){return e.getId()===t.id}));for(r in e.hotspots){var a=e.hotspots[r];if(!i[r]){var s,c=sp(t.pages);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(a.locations[u.pageNumber]){i[r]={type:a.type,id:a.id,locations:a.locations};break}}}catch(t){c.e(t)}finally{c.f()}}}return e._hotspots.trigger("hotspotsReceived",{pageSpread:e._core.pageSpreads.get(t.id),versoPageSpread:o,ratio:e.options.hotspotRatio,pages:t.pages,hotspots:i}),!1})))}},{key:"hotspotsRequested",value:function(t){this.hotspotQueue.push(t),this.processHotspotQueue()}},{key:"applyHotspots",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hotspots=t,this.processHotspotQueue()}},{key:"beforeNavigation",value:function(){var t,e;null===(t=this.popover)||void 0===t||null===(e=t.destroy)||void 0===e||e.call(t)}},{key:"clicked",value:function(t){var e=this;this.pickHotspot(t,(function(t){e.trigger("hotspotClicked",t)}))}},{key:"contextmenu",value:function(t){var e=this;this.pickHotspot(t,(function(t){e.trigger("hotspotContextmenu",t)}))}},{key:"pressed",value:function(t){var e=this;this.pickHotspot(t,(function(t){e.trigger("hotspotPressed",t)}))}}]),t}();ya.mixin(lp);var hp=Tr.Promise,fp=Qr("iterator"),pp=Array.prototype,dp=function(t,e,n){if(Kl(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},gp=Qr("iterator"),vp=function(t){var e=t.return;if(void 0!==e)return Lr(e.call(t)).value},yp=function(t,e){this.stopped=t,this.result=e},mp=function(t,e,n){var r,i,o,a,s,c,u,l,h=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),g=dp(e,h,1+f+d),v=function(t){return r&&vp(r),new yp(!0,t)},y=function(t){return f?(Lr(t),d?g(t[0],t[1],v):g(t[0],t[1])):d?g(t,v):g(t)};if(p)r=t;else{if("function"!=typeof(i=function(t){if(null!=t)return t[gp]||t["@@iterator"]||Pi[Wo(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(l=i)&&(Pi.Array===l||pp[fp]===l)){for(o=0,a=ii(t.length);a>o;o++)if((s=y(t[o]))&&s instanceof yp)return s;return new yp(!1)}r=i.call(t)}for(c=r.next;!(u=c.call(r)).done;){try{s=y(u.value)}catch(t){throw vp(r),t}if("object"==typeof s&&s&&s instanceof yp)return s}return new yp(!1)},bp=Qr("iterator"),wp=!1;try{var _p=0,Sp={next:function(){return{done:!!_p++}},return:function(){wp=!0}};Sp[bp]=function(){return this},Array.from(Sp,(function(){throw 2}))}catch(al){}var xp,kp,Ep,Tp=yi("navigator","userAgent")||"",Op=/(iphone|ipod|ipad).*applewebkit/i.test(Tp),Ap="process"==wr(Tr.process),Pp=Tr.location,Ip=Tr.setImmediate,Cp=Tr.clearImmediate,jp=Tr.process,Lp=Tr.MessageChannel,Rp=Tr.Dispatch,Mp=0,Np={},Dp="onreadystatechange",zp=function(t){if(Np.hasOwnProperty(t)){var e=Np[t];delete Np[t],e()}},Fp=function(t){return function(){zp(t)}},Up=function(t){zp(t.data)},Bp=function(t){Tr.postMessage(t+"",Pp.protocol+"//"+Pp.host)};Ip&&Cp||(Ip=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Np[++Mp]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},xp(Mp),Mp},Cp=function(t){delete Np[t]},Ap?xp=function(t){jp.nextTick(Fp(t))}:Rp&&Rp.now?xp=function(t){Rp.now(Fp(t))}:Lp&&!Op?(Ep=(kp=new Lp).port2,kp.port1.onmessage=Up,xp=dp(Ep.postMessage,Ep,1)):Tr.addEventListener&&"function"==typeof postMessage&&!Tr.importScripts&&Pp&&"file:"!==Pp.protocol&&!mr(Bp)?(xp=Bp,Tr.addEventListener("message",Up,!1)):xp=Dp in Cr("script")?function(t){mi.appendChild(Cr("script")).onreadystatechange=function(){mi.removeChild(this),zp(t)}}:function(t){setTimeout(Fp(t),0)});var Vp,Hp,Wp,qp,Xp,Yp,Gp,$p,Zp={set:Ip,clear:Cp},Kp=/web0s(?!.*chrome)/i.test(Tp),Jp=Ki.f,Qp=Zp.set,td=Tr.MutationObserver||Tr.WebKitMutationObserver,ed=Tr.document,nd=Tr.process,rd=Tr.Promise,id=Jp(Tr,"queueMicrotask"),od=id&&id.value;od||(Vp=function(){var t,e;for(Ap&&(t=nd.domain)&&t.exit();Hp;){e=Hp.fn,Hp=Hp.next;try{e()}catch(t){throw Hp?qp():Wp=void 0,t}}Wp=void 0,t&&t.enter()},Op||Ap||Kp||!td||!ed?rd&&rd.resolve?(Gp=rd.resolve(void 0),$p=Gp.then,qp=function(){$p.call(Gp,Vp)}):qp=Ap?function(){nd.nextTick(Vp)}:function(){Qp.call(Tr,Vp)}:(Xp=!0,Yp=ed.createTextNode(""),new td(Vp).observe(Yp,{characterData:!0}),qp=function(){Yp.data=Xp=!Xp}));var ad,sd,cd=od||function(t){var e={fn:t,next:void 0};Wp&&(Wp.next=e),Hp||(Hp=e,qp()),Wp=e},ud=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Kl(e),this.reject=Kl(n)},ld={f:function(t){return new ud(t)}},hd=function(t,e){if(Lr(t),Ar(e)&&e.constructor===t)return e;var n=ld.f(t);return(0,n.resolve)(e),n.promise},fd=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},pd=Tr.process,dd=pd&&pd.versions,gd=dd&&dd.v8;gd?sd=(ad=gd.split("."))[0]+ad[1]:Tp&&(!(ad=Tp.match(/Edge\/(\d+)/))||ad[1]>=74)&&(ad=Tp.match(/Chrome\/(\d+)/))&&(sd=ad[1]);var vd,yd,md,bd,wd=sd&&+sd,_d=Zp.set,Sd=Qr("species"),xd="Promise",kd=Xi.get,Ed=Xi.set,Td=Xi.getterFor(xd),Od=hp,Ad=Tr.TypeError,Pd=Tr.document,Id=Tr.process,Cd=yi("fetch"),jd=ld.f,Ld=jd,Rd=!!(Pd&&Pd.createEvent&&Tr.dispatchEvent),Md="function"==typeof PromiseRejectionEvent,Nd="unhandledrejection",Dd=lo(xd,(function(){if(!(Ri(Od)!==String(Od))){if(66===wd)return!0;if(!Ap&&!Md)return!0}if(wd>=51&&/native code/.test(Od))return!1;var t=Od.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Sd]=e,!(t.then((function(){}))instanceof e)})),zd=Dd||!function(t,e){if(!e&&!wp)return!1;var n=!1;try{var r={};r[bp]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){Od.all(t).catch((function(){}))})),Fd=function(t){var e;return!(!Ar(t)||"function"!=typeof(e=t.then))&&e},Ud=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;cd((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,h=u.resolve,f=u.reject,p=u.domain;try{l?(i||(2===t.rejection&&Wd(t),t.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?f(Ad("Promise-chain cycle")):(s=Fd(a))?s.call(a,h,f):h(a)):f(r)}catch(t){p&&!c&&p.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Vd(t)}))}},Bd=function(t,e,n){var r,i;Rd?((r=Pd.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Tr.dispatchEvent(r)):r={promise:e,reason:n},!Md&&(i=Tr["on"+t])?i(r):t===Nd&&function(t,e){var n=Tr.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Vd=function(t){_d.call(Tr,(function(){var e,n=t.facade,r=t.value;if(Hd(t)&&(e=fd((function(){Ap?Id.emit("unhandledRejection",r,n):Bd(Nd,n,r)})),t.rejection=Ap||Hd(t)?2:1,e.error))throw e.value}))},Hd=function(t){return 1!==t.rejection&&!t.parent},Wd=function(t){_d.call(Tr,(function(){var e=t.facade;Ap?Id.emit("rejectionHandled",e):Bd("rejectionhandled",e,t.value)}))},qd=function(t,e,n){return function(r){t(e,r,n)}},Xd=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Ud(t,!0))},Yd=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Ad("Promise can't be resolved itself");var r=Fd(e);r?cd((function(){var n={done:!1};try{r.call(e,qd(Yd,n,t),qd(Xd,n,t))}catch(e){Xd(n,e,t)}})):(t.value=e,t.state=1,Ud(t,!1))}catch(e){Xd({done:!1},e,t)}}};Dd&&(Od=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Od,xd),Kl(t),vd.call(this);var e=kd(this);try{t(qd(Yd,e),qd(Xd,e))}catch(t){Xd(e,t)}},(vd=function(t){Ed(this,{type:xd,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)Ji(t,r,e[r],n);return t}(Od.prototype,{then:function(t,e){var n=Td(this),r=jd(Ql(this,Od));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ap?Id.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ud(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),yd=function(){var t=new vd,e=kd(t);this.promise=t,this.resolve=qd(Yd,e),this.reject=qd(Xd,e)},ld.f=jd=function(t){return t===Od||t===md?new yd(t):Ld(t)},"function"==typeof hp&&(bd=hp.prototype.then,Ji(hp.prototype,"then",(function(t,e){var n=this;return new Od((function(t,e){bd.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Cd&&fo({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return hd(Od,Cd.apply(Tr,arguments))}}))),fo({global:!0,wrap:!0,forced:Dd},{Promise:Od}),ko(Od,xd,!1),Na(xd),md=yi(xd),fo({target:xd,stat:!0,forced:Dd},{reject:function(t){var e=jd(this);return e.reject.call(void 0,t),e.promise}}),fo({target:xd,stat:!0,forced:Dd},{resolve:function(t){return hd(this,t)}}),fo({target:xd,stat:!0,forced:zd},{all:function(t){var e=this,n=jd(e),r=n.resolve,i=n.reject,o=fd((function(){var n=Kl(e.resolve),o=[],a=0,s=1;mp(t,(function(t){var c=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[c]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=jd(e),r=n.reject,i=fd((function(){var i=Kl(e.resolve);mp(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Gd=ys.charAt,$d="String Iterator",Zd=Xi.set,Kd=Xi.getterFor($d);Mo(String,"String",(function(t){Zd(this,{type:$d,string:String(t),index:0})}),(function(){var t,e=Kd(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Gd(n,r),e.index+=t.length,{value:t,done:!1})}));var Jd=e((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?d:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",g={};function v(){}function y(){}function m(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(P([])));_&&_!==n&&r.call(_,o)&&(b=_);var S=m.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return y.prototype=S.constructor=m,m.constructor=y,y.displayName=c(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(S),c(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));V({target:"Promise",stat:!0},{try:function(t){var e=Lc.f(this),n=Mc(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var Qd=gu;function tg(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Qd.resolve(c).then(r,i)}var eg=function(t){return function(){var e=this,n=arguments;return new Qd((function(r,i){var o=t.apply(e,n);function a(t){tg(o,r,i,a,s,"next",t)}function s(t){tg(o,r,i,a,s,"throw",t)}a(void 0)}))}};function ng(t,e){var n=sr(t);if(or){var r=or(t);e&&(r=_n(r).call(r,(function(e){return cn(t,e).enumerable}))),n.push.apply(n,r)}return n}var rg=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};da(this,t),yr(this,"fetchDetails",(function(t){return _h({url:"/v2/catalogs/".concat(e.options.id)},t)})),yr(this,"fetchPages",(function(t){return _h({url:"/v2/catalogs/".concat(e.options.id,"/pages")},t)})),yr(this,"fetchHotspots",(function(t){return _h({url:"/v2/catalogs/".concat(e.options.id,"/hotspots")},t)})),this.options=n}var e;return va(t,[{key:"createViewer",value:function(t,e){return new lp(this.options.el,function(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)nn(n=ng(Object(r),!0)).call(n,(function(e){yr(t,e,r[e])}));else if(gt)st(t,gt(r));else{var i;nn(i=ng(Object(r))).call(i,(function(e){W(t,e,cn(r,e))}))}}return t}({id:this.options.id,ownedBy:t.details.dealer_id,color:"#"+t.details.branding.pageflip.color,hotspotRatio:t.details.dimensions.height,keyboard:!0,pageId:this.options.pageId,eventTracker:this.options.eventTracker,pages:this.transformPages(t.pages)},e))}},{key:"transformPages",value:function(t){return Fl(t).call(t,(function(t,e){var n=e+1;return{id:"page"+n,label:n+"",pageNumber:n,images:{medium:t.view,large:t.zoom}}}))}},{key:"applyHotspots",value:function(t,e){var n={};nn(e).call(e,(function(t){return n[t.id]=t})),t.applyHotspots(n)}},{key:"fetch",value:(e=eg(Jd.mark((function t(e){var n,r,i,o;return Jd.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vu.all([this.fetchDetails(),this.fetchPages()]);case 3:if(n=t.sent,r=op(n,2),i=r[0],o=r[1],!i||!o){t.next=11;break}e(null,{details:i,pages:o}),t.next=12;break;case 11:throw new Error;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e(t.t0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t){return e.apply(this,arguments)})}]),t}(),ig=Object.freeze({__proto__:null,Viewer:lp,Bootstrapper:rg}),og="sgn-",ag=function(){try{var t=window.sessionStorage;return t["".concat(og,"test-storage")]="foobar",delete t["".concat(og,"test-storage")],t}catch(t){return{}}}();var sg,cg=Object.freeze({__proto__:null,get:function(t){try{var e;return JSON.parse(ag[Cl(e="".concat(og)).call(e,t)])}catch(t){}},set:function(t,e){try{var n;ag[Cl(n="".concat(og)).call(n,t)]=Xl(e)}catch(t){}}});function ug(t,e){var n=sr(t);if(or){var r=or(t);e&&(r=_n(r).call(r,(function(e){return cn(t,e).enumerable}))),n.push.apply(n,r)}return n}var lg=function(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)nn(n=ug(Object(r),!0)).call(n,(function(e){yr(t,e,r[e])}));else if(gt)st(t,gt(r));else{var i;nn(i=ug(Object(r))).call(i,(function(e){W(t,e,cn(r,e))}))}}return t}({},bl);lg.storage={local:Jh,session:cg,cookie:lh},lg.EventsKit=sf,lg.CoreKit=Sh,lg.PagedPublicationKit=ig,lg.IncitoPublicationKit=Rf,lg.CoreUIKit=Oh;var hg=lg.storage.cookie.get("session");if("object"==typeof hg&&lg.config.set({coreSessionToken:hg.token,coreSessionClientId:hg.client_id}),dr(sg=lg.config).call(sg,"change",(function(t){var e,n=t.eventTracker,r=t.appKey;if((r||n)&&(null===(e=n||lg.config.get("eventTracker"))||void 0===e?void 0:e.trackId)===(r||lg.config.get("appKey")))throw al(new Error("Track identifier must not be identical to app key. Go to https://shopgun.com/developers/apps to get a track identifier for your app"));null!=n&&(n.eventsTrackUrl||n.setEventsTrackUrl(lg.config.get("eventsTrackUrl")));var i=t.eventsTrackUrl;i&&lg.config.get("eventTracker")&&lg.config.get("eventTracker").setEventsTrackUrl(i)})),il()){var fg=document.getElementById("sgn-sdk");if(fg){var pg=fg.getAttribute("data-app-key"),dg=fg.getAttribute("data-track-id"),gg={};pg&&(gg.appKey=pg),dg&&(gg.eventTracker=new lg.EventsKit.Tracker({trackId:dg})),lg.config.set(gg)}}return lg}));
//# sourceMappingURL=sgn-sdk.min.js.map
